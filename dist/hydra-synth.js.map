{"version":3,"file":"hydra-synth.js","sources":["../src/output.js","../src/lib/webcam.js","../src/lib/screenmedia.js","../src/hydra-source.js","../src/lib/mouse-event.js","../src/lib/mouse.js","../src/lib/audio.js","../src/lib/video-recorder.js","../src/lib/easing-functions.js","../src/lib/array-utils.js","../src/lib/strudel.js","../src/lib/sandbox.js","../src/eval-sandbox.js","../src/format-arguments.js","../src/generate-glsl.js","../src/glsl/utility-functions.js","../src/glsl-source.js","../src/glsl/glsl-functions.js","../src/generator-factory.js","../src/hydra-synth.js"],"sourcesContent":["//const transforms = require('./glsl-transforms.js')\n\nvar Output = function ({ regl, precision, label = \"\", width, height}) {\n  this.regl = regl\n  this.precision = precision\n  this.label = label\n  this.positionBuffer = this.regl.buffer([\n    [-2, 0],\n    [0, -2],\n    [2, 2]\n  ])\n\n  this.draw = () => {}\n  this.init()\n  this.pingPongIndex = 0\n\n  // for each output, create two fbos for pingponging\n  this.fbos = (Array(2)).fill().map(() => this.regl.framebuffer({\n    color: this.regl.texture({\n      mag: 'nearest',\n      width: width,\n      height: height,\n      format: 'rgba'\n    }),\n    depthStencil: false\n  }))\n\n  // array containing render passes\n//  this.passes = []\n}\n\nOutput.prototype.resize = function(width, height) {\n  this.fbos.forEach((fbo) => {\n    fbo.resize(width, height)\n  })\n//  console.log(this)\n}\n\n\nOutput.prototype.getCurrent = function () {\n  return this.fbos[this.pingPongIndex]\n}\n\nOutput.prototype.getTexture = function () {\n   var index = this.pingPongIndex ? 0 : 1\n  return this.fbos[index]\n}\n\nOutput.prototype.init = function () {\n//  console.log('clearing')\n  this.transformIndex = 0\n  this.fragHeader = `\n  precision ${this.precision} float;\n\n  uniform float time;\n  varying vec2 uv;\n  `\n\n  this.fragBody = ``\n\n  this.vert = `\n  precision ${this.precision} float;\n  attribute vec2 position;\n  varying vec2 uv;\n\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }`\n\n  this.attributes = {\n    position: this.positionBuffer\n  }\n  this.uniforms = {\n    time: this.regl.prop('time'),\n    resolution: this.regl.prop('resolution')\n  }\n\n  this.frag = `\n       ${this.fragHeader}\n\n      void main () {\n        vec4 c = vec4(0, 0, 0, 0);\n        vec2 st = uv;\n        ${this.fragBody}\n        gl_FragColor = c;\n      }\n  `\n  return this\n}\n\n\nOutput.prototype.render = function (passes) {\n  let pass = passes[0]\n  //console.log('pass', pass, this.pingPongIndex)\n  var self = this\n      var uniforms = Object.assign(pass.uniforms, { prevBuffer:  () =>  {\n             //var index = this.pingPongIndex ? 0 : 1\n          //   var index = self.pingPong[(passIndex+1)%2]\n          //  console.log('ping pong', self.pingPongIndex)\n            return self.fbos[self.pingPongIndex]\n          }\n        })\n\n  self.draw = self.regl({\n    frag: pass.frag,\n    vert: self.vert,\n    attributes: self.attributes,\n    uniforms: uniforms,\n    count: 3,\n    framebuffer: () => {\n      self.pingPongIndex = self.pingPongIndex ? 0 : 1\n      return self.fbos[self.pingPongIndex]\n    }\n  })\n}\n\n\nOutput.prototype.tick = function (props) {\n//  console.log(props)\n  this.draw(props)\n}\n\nexport default Output\n","//const enumerateDevices = require('enumerate-devices')\n\nexport default function (deviceId) {\n  return navigator.mediaDevices.enumerateDevices()\n    .then(devices => devices.filter(devices => devices.kind === 'videoinput'))\n    .then(cameras => {\n      let constraints = { audio: false, video: true}\n      if (cameras[deviceId]) {\n        constraints['video'] = {\n          deviceId: { exact: cameras[deviceId].deviceId }\n        }\n      }\n    //  console.log(cameras)\n      return window.navigator.mediaDevices.getUserMedia(constraints)\n    })\n    .then(stream => {\n      const video = document.createElement('video')\n      video.setAttribute('autoplay', '')\n      video.setAttribute('muted', '')\n      video.setAttribute('playsinline', '')\n      //  video.src = window.URL.createObjectURL(stream)\n      video.srcObject = stream\n      return new Promise((resolve, reject) => {\n        video.addEventListener('loadedmetadata', () => {\n          video.play().then(() => resolve({video: video}))\n        })\n      })\n    })\n    .catch(console.log.bind(console))\n}\n","\nexport default function (options) {\n  return new Promise(function(resolve, reject) {\n    //  async function startCapture(displayMediaOptions) {\n    navigator.mediaDevices.getDisplayMedia(options).then((stream) => {\n      const video = document.createElement('video')\n      video.srcObject = stream\n      video.addEventListener('loadedmetadata', () => {\n        video.play()\n        resolve({video: video})\n      })\n    }).catch((err) => reject(err))\n  })\n}\n","import Webcam from './lib/webcam.js'\nimport Screen from './lib/screenmedia.js'\n\nclass HydraSource {\n  constructor ({ regl, width, height, pb, label = \"\"}) {\n    this.label = label\n    this.regl = regl\n    this.src = null\n    this.dynamic = true\n    this.width = width\n    this.height = height\n    this.tex = this.regl.texture({\n      //  shape: [width, height]\n      shape: [ 1, 1 ]\n    })\n    this.pb = pb\n  }\n\n  init (opts, params) {\n    if ('src' in opts) {\n      this.src = opts.src\n      this.tex = this.regl.texture({ data: this.src, ...params })\n    }\n    if ('dynamic' in opts) this.dynamic = opts.dynamic\n  }\n\n  initCam (index, params) {\n    const self = this\n    Webcam(index)\n      .then(response => {\n        self.src = response.video\n        self.dynamic = true\n        self.tex = self.regl.texture({ data: self.src, ...params })\n      })\n      .catch(err => console.log('could not get camera', err))\n  }\n\n  initVideo (url = '', params) {\n    // const self = this\n    const vid = document.createElement('video')\n    vid.crossOrigin = 'anonymous'\n    vid.autoplay = true\n    vid.loop = true\n    vid.muted = true // mute in order to load without user interaction\n    const onload = vid.addEventListener('loadeddata', () => {\n      this.src = vid\n      vid.play()\n      this.tex = this.regl.texture({ data: this.src, ...params})\n      this.dynamic = true\n    })\n    vid.src = url\n  }\n\n  initImage (url = '', params) {\n    const img = document.createElement('img')\n    img.crossOrigin = 'anonymous'\n    img.src = url\n    img.onload = () => {\n      this.src = img\n      this.dynamic = false\n      this.tex = this.regl.texture({ data: this.src, ...params})\n    }\n  }\n\n  initStream (streamName, params) {\n    //  console.log(\"initing stream!\", streamName)\n    let self = this\n    if (streamName && this.pb) {\n      this.pb.initSource(streamName)\n\n      this.pb.on('got video', function (nick, video) {\n        if (nick === streamName) {\n          self.src = video\n          self.dynamic = true\n          self.tex = self.regl.texture({ data: self.src, ...params})\n        }\n      })\n    }\n  }\n\n  // index only relevant in atom-hydra + desktop apps\n  initScreen (index = 0, params) {\n    const self = this\n    Screen()\n      .then(function (response) {\n        self.src = response.video\n        self.tex = self.regl.texture({ data: self.src, ...params})\n        self.dynamic = true\n        //  console.log(\"received screen input\")\n      })\n      .catch(err => console.log('could not get screen', err))\n  }\n\n  resize (width, height) {\n    this.width = width\n    this.height = height\n  }\n\n  clear () {\n    if (this.src && this.src.srcObject) {\n      if (this.src.srcObject.getTracks) {\n        this.src.srcObject.getTracks().forEach(track => track.stop())\n      }\n    }\n    this.src = null\n    this.tex = this.regl.texture({ shape: [ 1, 1 ] })\n  }\n\n  tick (time) {\n    //  console.log(this.src, this.tex.width, this.tex.height)\n    if (this.src !== null && this.dynamic === true) {\n      if (this.src.videoWidth && this.src.videoWidth !== this.tex.width) {\n        console.log(\n          this.src.videoWidth,\n          this.src.videoHeight,\n          this.tex.width,\n          this.tex.height\n        )\n        this.tex.resize(this.src.videoWidth, this.src.videoHeight)\n      }\n\n      if (this.src.width && this.src.width !== this.tex.width) {\n        this.tex.resize(this.src.width, this.src.height)\n      }\n\n      this.tex.subimage(this.src)\n    }\n  }\n\n  getTexture () {\n    return this.tex\n  }\n}\n\nexport default HydraSource\n","// https://github.com/mikolalysenko/mouse-event\n\nconst mouse = {}\n\nfunction mouseButtons(ev) {\n  if(typeof ev === 'object') {\n    if('buttons' in ev) {\n      return ev.buttons\n    } else if('which' in ev) {\n      var b = ev.which\n      if(b === 2) {\n        return 4\n      } else if(b === 3) {\n        return 2\n      } else if(b > 0) {\n        return 1<<(b-1)\n      }\n    } else if('button' in ev) {\n      var b = ev.button\n      if(b === 1) {\n        return 4\n      } else if(b === 2) {\n        return 2\n      } else if(b >= 0) {\n        return 1<<b\n      }\n    }\n  }\n  return 0\n}\nmouse.buttons = mouseButtons\n\nfunction mouseElement(ev) {\n  return ev.target || ev.srcElement || window\n}\nmouse.element = mouseElement\n\nfunction mouseRelativeX(ev) {\n  if(typeof ev === 'object') {\n    if('pageX' in ev) {\n      return ev.pageX\n    }\n  }\n  return 0\n}\nmouse.x = mouseRelativeX\n\nfunction mouseRelativeY(ev) {\n  if(typeof ev === 'object') {\n    if('pageY' in ev) {\n      return ev.pageY\n    }\n  }\n  return 0\n}\nmouse.y = mouseRelativeY\n\nexport default mouse","// based on https://github.com/mikolalysenko/mouse-change\n\nexport default mouseListen\n\nimport mouse from './mouse-event.js'\n\nfunction mouseListen (element, callback) {\n  if (!callback) {\n    callback = element\n    element = window\n  }\n\n  var buttonState = 0\n  var x = 0\n  var y = 0\n  var mods = {\n    shift: false,\n    alt: false,\n    control: false,\n    meta: false\n  }\n  var attached = false\n\n  function updateMods (ev) {\n    var changed = false\n    if ('altKey' in ev) {\n      changed = changed || ev.altKey !== mods.alt\n      mods.alt = !!ev.altKey\n    }\n    if ('shiftKey' in ev) {\n      changed = changed || ev.shiftKey !== mods.shift\n      mods.shift = !!ev.shiftKey\n    }\n    if ('ctrlKey' in ev) {\n      changed = changed || ev.ctrlKey !== mods.control\n      mods.control = !!ev.ctrlKey\n    }\n    if ('metaKey' in ev) {\n      changed = changed || ev.metaKey !== mods.meta\n      mods.meta = !!ev.metaKey\n    }\n    return changed\n  }\n\n  function handleEvent (nextButtons, ev) {\n    var nextX = mouse.x(ev)\n    var nextY = mouse.y(ev)\n    if ('buttons' in ev) {\n      nextButtons = ev.buttons | 0\n    }\n    if (nextButtons !== buttonState ||\n      nextX !== x ||\n      nextY !== y ||\n      updateMods(ev)) {\n      buttonState = nextButtons | 0\n      x = nextX || 0\n      y = nextY || 0\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function clearState (ev) {\n    handleEvent(0, ev)\n  }\n\n  function handleBlur () {\n    if (buttonState ||\n      x ||\n      y ||\n      mods.shift ||\n      mods.alt ||\n      mods.meta ||\n      mods.control) {\n      x = y = 0\n      buttonState = 0\n      mods.shift = mods.alt = mods.control = mods.meta = false\n      callback && callback(0, 0, 0, mods)\n    }\n  }\n\n  function handleMods (ev) {\n    if (updateMods(ev)) {\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function handleMouseMove (ev) {\n    if (mouse.buttons(ev) === 0) {\n      handleEvent(0, ev)\n    } else {\n      handleEvent(buttonState, ev)\n    }\n  }\n\n  function handleMouseDown (ev) {\n    handleEvent(buttonState | mouse.buttons(ev), ev)\n  }\n\n  function handleMouseUp (ev) {\n    handleEvent(buttonState & ~mouse.buttons(ev), ev)\n  }\n\n  function attachListeners () {\n    if (attached) {\n      return\n    }\n    attached = true\n\n    element.addEventListener('mousemove', handleMouseMove)\n\n    element.addEventListener('mousedown', handleMouseDown)\n\n    element.addEventListener('mouseup', handleMouseUp)\n\n    element.addEventListener('mouseleave', clearState)\n    element.addEventListener('mouseenter', clearState)\n    element.addEventListener('mouseout', clearState)\n    element.addEventListener('mouseover', clearState)\n\n    element.addEventListener('blur', handleBlur)\n\n    element.addEventListener('keyup', handleMods)\n    element.addEventListener('keydown', handleMods)\n    element.addEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.addEventListener('blur', handleBlur)\n\n      window.addEventListener('keyup', handleMods)\n      window.addEventListener('keydown', handleMods)\n      window.addEventListener('keypress', handleMods)\n    }\n  }\n\n  function detachListeners () {\n    if (!attached) {\n      return\n    }\n    attached = false\n\n    element.removeEventListener('mousemove', handleMouseMove)\n\n    element.removeEventListener('mousedown', handleMouseDown)\n\n    element.removeEventListener('mouseup', handleMouseUp)\n\n    element.removeEventListener('mouseleave', clearState)\n    element.removeEventListener('mouseenter', clearState)\n    element.removeEventListener('mouseout', clearState)\n    element.removeEventListener('mouseover', clearState)\n\n    element.removeEventListener('blur', handleBlur)\n\n    element.removeEventListener('keyup', handleMods)\n    element.removeEventListener('keydown', handleMods)\n    element.removeEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.removeEventListener('blur', handleBlur)\n\n      window.removeEventListener('keyup', handleMods)\n      window.removeEventListener('keydown', handleMods)\n      window.removeEventListener('keypress', handleMods)\n    }\n  }\n\n  // Attach listeners\n  attachListeners()\n\n  var result = {\n    element: element\n  }\n\n  Object.defineProperties(result, {\n    enabled: {\n      get: function () { return attached },\n      set: function (f) {\n        if (f) {\n          attachListeners()\n        } else {\n          detachListeners()\n        }\n      },\n      enumerable: true\n    },\n    buttons: {\n      get: function () { return buttonState },\n      enumerable: true\n    },\n    x: {\n      get: function () { return x },\n      enumerable: true\n    },\n    y: {\n      get: function () { return y },\n      enumerable: true\n    },\n    mods: {\n      get: function () { return mods },\n      enumerable: true\n    }\n  })\n\n  return result\n}\n","import Meyda from 'meyda'\n\nclass Audio {\n  constructor ({\n    numBins = 4,\n    cutoff = 2,\n    smooth = 0.4,\n    max = 15,\n    scale = 10,\n    isDrawing = false,\n    parentEl = document.body\n  }) {\n    this.vol = 0\n    this.scale = scale\n    this.max = max\n    this.cutoff = cutoff\n    this.smooth = smooth\n    this.setBins(numBins)\n\n    // beat detection from: https://github.com/therewasaguy/p5-music-viz/blob/gh-pages/demos/01d_beat_detect_amplitude/sketch.js\n    this.beat = {\n      holdFrames: 20,\n      threshold: 40,\n      _cutoff: 0, // adaptive based on sound state\n      decay: 0.98,\n      _framesSinceBeat: 0 // keeps track of frames\n    }\n\n    this.onBeat = () => {\n    //  console.log(\"beat\")\n    }\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 100\n    this.canvas.height = 80\n    this.canvas.style.width = \"100px\"\n    this.canvas.style.height = \"80px\"\n    this.canvas.style.position = 'absolute'\n    this.canvas.style.right = '0px'\n    this.canvas.style.bottom = '0px'\n    parentEl.appendChild(this.canvas)\n\n    this.isDrawing = isDrawing\n    this.ctx = this.canvas.getContext('2d')\n    this.ctx.fillStyle=\"#DFFFFF\"\n    this.ctx.strokeStyle=\"#0ff\"\n    this.ctx.lineWidth=0.5\n    if(window.navigator.mediaDevices) {\n    window.navigator.mediaDevices.getUserMedia({video: false, audio: true})\n      .then((stream) => {\n      //  console.log('got mic stream', stream)\n        this.stream = stream\n        this.context = new AudioContext()\n        //  this.context = new AudioContext()\n        let audio_stream = this.context.createMediaStreamSource(stream)\n\n      //  console.log(this.context)\n        this.meyda = Meyda.createMeydaAnalyzer({\n          audioContext: this.context,\n          source: audio_stream,\n          featureExtractors: [\n            'loudness',\n            //  'perceptualSpread',\n            //  'perceptualSharpness',\n            //  'spectralCentroid'\n          ]\n        })\n      })\n      .catch((err) => console.log('ERROR', err))\n    }\n  }\n\n  detectBeat (level) {\n    //console.log(level,   this.beat._cutoff)\n    if (level > this.beat._cutoff && level > this.beat.threshold) {\n      this.onBeat()\n      this.beat._cutoff = level *1.2\n      this.beat._framesSinceBeat = 0\n    } else {\n      if (this.beat._framesSinceBeat <= this.beat.holdFrames){\n        this.beat._framesSinceBeat ++;\n      } else {\n        this.beat._cutoff *= this.beat.decay\n        this.beat._cutoff = Math.max(  this.beat._cutoff, this.beat.threshold);\n      }\n    }\n  }\n\n  tick() {\n   if(this.meyda){\n     var features = this.meyda.get()\n     if(features && features !== null){\n       this.vol = features.loudness.total\n       this.detectBeat(this.vol)\n       // reduce loudness array to number of bins\n       const reducer = (accumulator, currentValue) => accumulator + currentValue;\n       let spacing = Math.floor(features.loudness.specific.length/this.bins.length)\n       this.prevBins = this.bins.slice(0)\n       this.bins = this.bins.map((bin, index) => {\n         return features.loudness.specific.slice(index * spacing, (index + 1)*spacing).reduce(reducer)\n       }).map((bin, index) => {\n         // map to specified range\n\n        // return (bin * (1.0 - this.smooth) + this.prevBins[index] * this.smooth)\n          return (bin * (1.0 - this.settings[index].smooth) + this.prevBins[index] * this.settings[index].smooth)\n       })\n       // var y = this.canvas.height - scale*this.settings[index].cutoff\n       // this.ctx.beginPath()\n       // this.ctx.moveTo(index*spacing, y)\n       // this.ctx.lineTo((index+1)*spacing, y)\n       // this.ctx.stroke()\n       //\n       // var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n       this.fft = this.bins.map((bin, index) => (\n        // Math.max(0, (bin - this.cutoff) / (this.max - this.cutoff))\n         Math.max(0, (bin - this.settings[index].cutoff)/this.settings[index].scale)\n       ))\n       if(this.isDrawing) this.draw()\n     }\n   }\n  }\n\n  setCutoff (cutoff) {\n    this.cutoff = cutoff\n    this.settings = this.settings.map((el) => {\n      el.cutoff = cutoff\n      return el\n    })\n  }\n\n  setSmooth (smooth) {\n    this.smooth = smooth\n    this.settings = this.settings.map((el) => {\n      el.smooth = smooth\n      return el\n    })\n  }\n\n  setBins (numBins) {\n    this.bins = Array(numBins).fill(0)\n    this.prevBins = Array(numBins).fill(0)\n    this.fft = Array(numBins).fill(0)\n    this.settings = Array(numBins).fill(0).map(() => ({\n      cutoff: this.cutoff,\n      scale: this.scale,\n      smooth: this.smooth\n    }))\n    // to do: what to do in non-global mode?\n    this.bins.forEach((bin, index) => {\n      window['a' + index] = (scale = 1, offset = 0) => () => (a.fft[index] * scale + offset)\n    })\n  //  console.log(this.settings)\n  }\n\n  setScale(scale){\n    this.scale = scale\n    this.settings = this.settings.map((el) => {\n      el.scale = scale\n      return el\n    })\n  }\n\n  setMax(max) {\n    this.max = max\n    console.log('set max is deprecated')\n  }\n  hide() {\n    this.isDrawing = false\n    this.canvas.style.display = 'none'\n  }\n\n  show() {\n    this.isDrawing = true\n    this.canvas.style.display = 'block'\n\n  }\n\n  draw () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    var spacing = this.canvas.width / this.bins.length\n    var scale = this.canvas.height / (this.max * 2)\n  //  console.log(this.bins)\n    this.bins.forEach((bin, index) => {\n\n      var height = bin * scale\n\n     this.ctx.fillRect(index * spacing, this.canvas.height - height, spacing, height)\n\n  //   console.log(this.settings[index])\n     var y = this.canvas.height - scale*this.settings[index].cutoff\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, y)\n     this.ctx.lineTo((index+1)*spacing, y)\n     this.ctx.stroke()\n\n     var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, yMax)\n     this.ctx.lineTo((index+1)*spacing, yMax)\n     this.ctx.stroke()\n    })\n\n\n    /*var y = this.canvas.height - scale*this.cutoff\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, y)\n    this.ctx.lineTo(this.canvas.width, y)\n    this.ctx.stroke()\n    var yMax = this.canvas.height - scale*this.max\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, yMax)\n    this.ctx.lineTo(this.canvas.width, yMax)\n    this.ctx.stroke()*/\n  }\n}\n\nexport default Audio\n","class VideoRecorder {\n  constructor(stream) {\n    this.mediaSource = new MediaSource()\n    this.stream = stream\n\n    // testing using a recording as input\n    this.output = document.createElement('video')\n    this.output.autoplay = true\n    this.output.loop = true\n\n    let self = this\n    this.mediaSource.addEventListener('sourceopen', () => {\n      console.log('MediaSource opened');\n      self.sourceBuffer = self.mediaSource.addSourceBuffer('video/webm; codecs=\"vp8\"');\n      console.log('Source buffer: ', sourceBuffer);\n    })\n  }\n\n  start() {\n  //  let options = {mimeType: 'video/webm'};\n\n//   let options = {mimeType: 'video/webm;codecs=h264'};\n   let options = {mimeType: 'video/webm;codecs=vp9'};\n\n    this.recordedBlobs = []\n    try {\n     this.mediaRecorder = new MediaRecorder(this.stream, options)\n    } catch (e0) {\n     console.log('Unable to create MediaRecorder with options Object: ', e0)\n     try {\n       options = {mimeType: 'video/webm,codecs=vp9'}\n       this.mediaRecorder = new MediaRecorder(this.stream, options)\n     } catch (e1) {\n       console.log('Unable to create MediaRecorder with options Object: ', e1)\n       try {\n         options = 'video/vp8' // Chrome 47\n         this.mediaRecorder = new MediaRecorder(this.stream, options)\n       } catch (e2) {\n         alert('MediaRecorder is not supported by this browser.\\n\\n' +\n           'Try Firefox 29 or later, or Chrome 47 or later, ' +\n           'with Enable experimental Web Platform features enabled from chrome://flags.')\n         console.error('Exception while creating MediaRecorder:', e2)\n         return\n       }\n     }\n   }\n   console.log('Created MediaRecorder', this.mediaRecorder, 'with options', options);\n   this.mediaRecorder.onstop = this._handleStop.bind(this)\n   this.mediaRecorder.ondataavailable = this._handleDataAvailable.bind(this)\n   this.mediaRecorder.start(100) // collect 100ms of data\n   console.log('MediaRecorder started', this.mediaRecorder)\n }\n\n  \n   stop(){\n     this.mediaRecorder.stop()\n   }\n\n _handleStop() {\n   //const superBuffer = new Blob(recordedBlobs, {type: 'video/webm'})\n   // const blob = new Blob(this.recordedBlobs, {type: 'video/webm;codecs=h264'})\n  const blob = new Blob(this.recordedBlobs, {type: this.mediaRecorder.mimeType})\n   const url = window.URL.createObjectURL(blob)\n   this.output.src = url\n\n    const a = document.createElement('a')\n    a.style.display = 'none'\n    a.href = url\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.webm`\n    document.body.appendChild(a)\n    a.click()\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 300);\n  }\n\n  _handleDataAvailable(event) {\n    if (event.data && event.data.size > 0) {\n      this.recordedBlobs.push(event.data);\n    }\n  }\n}\n\nexport default VideoRecorder\n","// from https://gist.github.com/gre/1650294\n\nexport default {\n  // no easing, no acceleration\n  linear: function (t) { return t },\n  // accelerating from zero velocity\n  easeInQuad: function (t) { return t*t },\n  // decelerating to zero velocity\n  easeOutQuad: function (t) { return t*(2-t) },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n  // accelerating from zero velocity\n  easeInCubic: function (t) { return t*t*t },\n  // decelerating to zero velocity\n  easeOutCubic: function (t) { return (--t)*t*t+1 },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n  // accelerating from zero velocity\n  easeInQuart: function (t) { return t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuart: function (t) { return 1-(--t)*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n  // accelerating from zero velocity\n  easeInQuint: function (t) { return t*t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t },\n  // sin shape\n  sin: function (t) { return (1 + Math.sin(Math.PI*t-Math.PI/2))/2 }\n}\n","// WIP utils for working with arrays\n// Possibly should be integrated with lfo extension, etc.\n// to do: transform time rather than array values, similar to working with coordinates in hydra\n\nimport easing from './easing-functions.js'\n\nvar map = (num, in_min, in_max, out_min, out_max) => {\n  return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nexport default {\n  init: () => {\n\n    Array.prototype.fast = function(speed = 1) {\n      this._speed = speed\n      return this\n    }\n\n    Array.prototype.smooth = function(smooth = 1) {\n      this._smooth = smooth\n      return this\n    }\n\n    Array.prototype.ease = function(ease = 'linear') {\n      if (typeof ease == 'function') {\n        this._smooth = 1\n        this._ease = ease\n      }\n      else if (easing[ease]){\n        this._smooth = 1\n        this._ease = easing[ease]\n      }\n      return this\n    }\n\n    Array.prototype.offset = function(offset = 0.5) {\n      this._offset = offset%1.0\n      return this\n    }\n\n    // Array.prototype.bounce = function() {\n    //   this.modifiers.bounce = true\n    //   return this\n    // }\n\n    Array.prototype.fit = function(low = 0, high =1) {\n      let lowest = Math.min(...this)\n      let highest =  Math.max(...this)\n      var newArr = this.map((num) => map(num, lowest, highest, low, high))\n      newArr._speed = this._speed\n      newArr._smooth = this._smooth\n      newArr._ease = this._ease\n      return newArr\n    }\n  },\n\n  getValue: (arr = []) => ({time, bpm}) =>{\n    let speed = arr._speed ? arr._speed : 1\n    let smooth = arr._smooth ? arr._smooth : 0\n    let index = time * speed * (bpm / 60) + (arr._offset || 0)\n\n    if (smooth!==0) {\n      let ease = arr._ease ? arr._ease : easing['linear']\n      let _index = index - (smooth / 2)\n      let currValue = arr[Math.floor(_index % (arr.length))]\n      let nextValue = arr[Math.floor((_index + 1) % (arr.length))]\n      let t = Math.min((_index%1)/smooth,1)\n      return ease(t) * (nextValue - currValue) + currValue\n    }\n    else {\n      const val = arr[Math.floor(index % (arr.length))]\n      return arr[Math.floor(index % (arr.length))]\n    }\n  }\n}\n","/*\n    Utility functions for using strudel within hydra. \n    (EXPERIMENTAL) Parses all strings as mini notation. \n*/\nimport { mini } from '@strudel.cycles/mini'\n\nwindow.mini = mini\nconst parseStrudel = (pattern) => ({ time, bpm }) => {\n    try {\n        const start = time * bpm / 60\n        // const m = mini(str)\n        const m = pattern\n        const events = m.queryArc(start, start+ 0.0001)\n        if(events.length > 0) {\n          //  console.log(typeof events[0].value, events[0].value)\n            if(typeof events[0].value === 'number') return events[0].value\n        }\n        return 0\n    } catch (e) {\n        console.warn(\"error within strudel pattern\", e)\n        return 0\n    }\n}\n\nwindow.strudel = parseStrudel\n\nexport { parseStrudel }","// attempt custom evaluation sandbox for hydra functions\n// for now, just avoids polluting the global namespace\n// should probably be replaced with an abstract syntax tree\n\nexport default (parent) => {\n  var initialCode = ``\n\n  var sandbox = createSandbox(initialCode)\n\n  var addToContext = (name, object) => {\n    console.log('running', name, object)\n    initialCode += `\n      var ${name} = ${object}\n    `\n    sandbox = createSandbox(initialCode)\n  }\n\n\n  return {\n    addToContext: addToContext,\n    eval: (code) => sandbox.eval(code)\n  }\n\n  function createSandbox (initial) {\n    console.log('evaling', initial)\n    eval(initial)\n    // optional params\n    var localEval = function (code)  {\n      eval(code)\n    }\n\n    // API/data for end-user\n    return {\n      eval: localEval\n    }\n  }\n}\n","// handles code evaluation and attaching relevant objects to global and evaluation contexts\n\nimport Sandbox from './lib/sandbox.js'\nimport ArrayUtils from './lib/array-utils.js'\n\nclass EvalSandbox {\n  constructor(parent, makeGlobal, userProps = []) {\n    this.makeGlobal = makeGlobal\n    this.sandbox = Sandbox(parent)\n    this.parent = parent\n    var properties = Object.keys(parent)\n    properties.forEach((property) => this.add(property))\n    this.userProps = userProps\n  }\n\n  add(name) {\n    if(this.makeGlobal) window[name] = this.parent[name]\n    this.sandbox.addToContext(name, `parent.${name}`)\n  }\n\n// sets on window as well as synth object if global (not needed for objects, which can be set directly)\n\n  set(property, value) {\n    if(this.makeGlobal) {\n      window[property] = value\n    }\n    this.parent[property] = value\n  }\n\n  tick() {\n    if(this.makeGlobal) {\n      this.userProps.forEach((property) => {\n        this.parent[property] = window[property]\n      })\n      //  this.parent.speed = window.speed\n    } else {\n\n    }\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n}\n\nexport default EvalSandbox\n","import arrayUtils from './lib/array-utils.js'\nimport { parseStrudel } from './lib/strudel.js'\nimport { mini } from '@strudel.cycles/mini'\n\n// [WIP] how to treat different dimensions (?)\nconst DEFAULT_CONVERSIONS = {\n  float: {\n    'vec4': { name: 'sum', args: [[1, 1, 1, 1]] },\n    'vec2': { name: 'sum', args: [[1, 1]] }\n  }\n}\n\nfunction fillArrayWithDefaults(arr, len) {\n  // fill the array with default values if it's too short\n  while (arr.length < len) {\n    if (arr.length === 3) { // push a 1 as the default for .a in vec4\n      arr.push(1.0)\n    } else {\n      arr.push(0.0)\n    }\n  }\n  return arr.slice(0, len)\n}\n\nconst ensure_decimal_dot = (val) => {\n  val = val.toString()\n  if (val.indexOf('.') < 0) {\n    val += '.'\n  }\n  return val\n}\n\n\n\nexport default function formatArguments(transform, startIndex, synthContext) {\n  const defaultArgs = transform.transform.inputs\n  const userArgs = transform.userArgs\n  const { generators } = transform.synth\n  const { src } = generators // depends on synth having src() function\n  return defaultArgs.map((input, index) => {\n    const typedArg = {\n      value: input.default,\n      type: input.type, //\n      isUniform: false,\n      name: input.name,\n      vecLen: 0\n      //  generateGlsl: null // function for creating glsl\n    }\n\n    if (typedArg.type === 'float') typedArg.value = ensure_decimal_dot(input.default)\n    if (input.type.startsWith('vec')) {\n      try {\n        typedArg.vecLen = Number.parseInt(input.type.substr(3))\n      } catch (e) {\n        console.log(`Error determining length of vector input type ${input.type} (${input.name})`)\n      }\n    }\n\n    // if user has input something for this argument\n    if (userArgs.length > index) {\n      typedArg.value = userArgs[index]\n      // do something if a composite or transform\n\n      if (typeof userArgs[index] === 'function') {\n        // if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n        //    typedArg.value = (context, props, batchId) => (fillArrayWithDefaults(userArgs[index](props), typedArg.vecLen))\n        // } else {\n        typedArg.value = (context, props, batchId) => {\n          try {\n            const val = userArgs[index](props)\n            if(typeof val === 'number') {\n              return val\n            } else {\n              console.warn('function does not return a number', userArgs[index])\n            }\n            return input.default\n          } catch (e) {\n            console.warn('ERROR', e)\n            return input.default\n          }\n        }\n        //  }\n\n        typedArg.isUniform = true\n      } else if (userArgs[index].constructor === Array) {\n        //   if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n        //     typedArg.isUniform = true\n        //     typedArg.value = fillArrayWithDefaults(typedArg.value, typedArg.vecLen)\n        //  } else {\n        //  console.log(\"is Array\")\n        // filter out values that are not a number\n       // const filteredArray = userArgs[index].filter((val) => typeof val === 'number')\n       // typedArg.value = (context, props, batchId) => arrayUtils.getValue(filteredArray)(props)\n       typedArg.value = (context, props, batchId) => arrayUtils.getValue(userArgs[index])(props)\n       typedArg.isUniform = true\n        // }\n      } else if (userArgs[index].constructor.name === 'Pattern') {\n        typedArg.value = (context, props, batchId) => parseStrudel(userArgs[index])(props)\n        typedArg.isUniform = true\n      // parse strings as strudel mini notation\n      } else if (typeof userArgs[index] === \"string\") {\n        typedArg.value = input.default\n        try {\n          const pattern = mini(userArgs[index])\n          typedArg.value = (context, props, batchId) => parseStrudel(pattern)(props)\n          typedArg.isUniform = true\n        } catch (e) {\n          console.warn('error parsing strudel pattern', e)\n        }\n      }\n       \n    }\n\n    if (startIndex < 0) {\n    } else {\n      if (typedArg.value && typedArg.value.transforms) {\n        const final_transform = typedArg.value.transforms[typedArg.value.transforms.length - 1]\n\n        if (final_transform.transform.glsl_return_type !== input.type) {\n          const defaults = DEFAULT_CONVERSIONS[input.type]\n          if (typeof defaults !== 'undefined') {\n            const default_def = defaults[final_transform.transform.glsl_return_type]\n            if (typeof default_def !== 'undefined') {\n              const { name, args } = default_def\n              typedArg.value = typedArg.value[name](...args)\n            }\n          }\n        }\n\n        typedArg.isUniform = false\n      } else if (typedArg.type === 'float' && typeof typedArg.value === 'number') {\n        typedArg.value = ensure_decimal_dot(typedArg.value)\n      } else if (typedArg.type.startsWith('vec') && typeof typedArg.value === 'object' && Array.isArray(typedArg.value)) {\n        typedArg.isUniform = false\n        typedArg.value = `${typedArg.type}(${typedArg.value.map(ensure_decimal_dot).join(', ')})`\n      } else if (input.type === 'sampler2D') {\n        // typedArg.tex = typedArg.value\n        var x = typedArg.value\n        typedArg.value = () => (x.getTexture())\n        typedArg.isUniform = true\n      } else {\n        // if passing in a texture reference, when function asks for vec4, convert to vec4\n        if (typedArg.value.getTexture && input.type === 'vec4') {\n          var x1 = typedArg.value\n          typedArg.value = src(x1)\n          typedArg.isUniform = false\n        }\n      }\n\n      // add tp uniform array if is a function that will pass in a different value on each render frame,\n      // or a texture/ external source\n\n      if (typedArg.isUniform) {\n        typedArg.name += startIndex\n        //  shaderParams.uniforms.push(typedArg)\n      }\n    }\n    return typedArg\n  })\n}\n\n","import formatArguments from './format-arguments.js'\n\n// Add extra functionality to Array.prototype for generating sequences in time\nimport arrayUtils from './lib/array-utils.js'\n\n\n\n// converts a tree of javascript functions to a shader\nexport default function (transforms) {\n    var shaderParams = {\n      uniforms: [], // list of uniforms used in shader\n      glslFunctions: [], // list of functions used in shader\n      fragColor: ''\n    }\n\n    var gen = generateGlsl(transforms, shaderParams)('st')\n    shaderParams.fragColor = gen\n    // remove uniforms with duplicate names\n    let uniforms = {}\n    shaderParams.uniforms.forEach((uniform) => uniforms[uniform.name] = uniform)\n    shaderParams.uniforms = Object.values(uniforms)\n    return shaderParams\n\n}\n\n\n// recursive function for generating shader string from object containing functions and user arguments. Order of functions in string depends on type of function\n// to do: improve variable names\nfunction generateGlsl (transforms, shaderParams) {\n  // transform function that outputs a shader string corresponding to gl_FragColor\n  var fragColor = () => ''\n  // var uniforms = []\n  // var glslFunctions = []\n  transforms.forEach((transform) => {\n    var inputs = formatArguments(transform, shaderParams.uniforms.length)\n    inputs.forEach((input) => {\n      if(input.isUniform) shaderParams.uniforms.push(input)\n    })\n\n    // add new glsl function to running list of functions\n    if(!contains(transform, shaderParams.glslFunctions)) shaderParams.glslFunctions.push(transform)\n\n    // current function for generating frag color shader code\n    var f0 = fragColor\n    if (transform.transform.type === 'src') {\n      fragColor = (uv) => `${shaderString(uv, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'coord') {\n      fragColor = (uv) => `${f0(`${shaderString(uv, transform.name, inputs, shaderParams)}`)}`\n    } else if (transform.transform.type === 'color') {\n      fragColor = (uv) =>  `${shaderString(`${f0(uv)}`, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'combine') {\n      // combining two generated shader strings (i.e. for blend, mult, add funtions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${shaderString(`${f0(uv)}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`\n    } else if (transform.transform.type === 'combineCoord') {\n      // combining two generated shader strings (i.e. for modulate functions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${f0(`${shaderString(`${uv}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`)}`\n\n\n    }\n  })\n//  console.log(fragColor)\n  //  break;\n  return fragColor\n}\n\n// assembles a shader string containing the arguments and the function name, i.e. 'osc(uv, frequency)'\nfunction shaderString (uv, method, inputs, shaderParams) {\n  const str = inputs.map((input) => {\n    if (input.isUniform) {\n      return input.name\n    } else if (input.value && input.value.transforms) {\n      // this by definition needs to be a generator, hence we start with 'st' as the initial value for generating the glsl fragment\n      return `${generateGlsl(input.value.transforms, shaderParams)('st')}`\n    }\n    return input.value\n  }).reduce((p, c) => `${p}, ${c}`, '')\n\n  return `${method}(${uv}${str})`\n}\n\n// merge two arrays and remove duplicates\nfunction mergeArrays (a, b) {\n  return a.concat(b.filter(function (item) {\n    return a.indexOf(item) < 0;\n  }))\n}\n\n// check whether array\nfunction contains(object, arr) {\n  for(var i = 0; i < arr.length; i++){\n    if(object.name == arr[i].name) return true\n  }\n  return false\n}\n\n\n\n","// functions that are only used within other functions\n\nexport default {\n  _luminance: {\n    type: 'util',\n    glsl: `float _luminance(vec3 rgb){\n      const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n      return dot(rgb, W);\n    }`\n  },\n  _noise: {\n    type: 'util',\n    glsl: `\n    //\tSimplex 3D Noise\n    //\tby Ian McEwan, Ashima Arts\n    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n  vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n  float _noise(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    //  x0 = x0 - 0. + 0.0 * C\n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n    i = mod(i, 289.0 );\n    vec4 p = permute( permute( permute(\n               i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n             + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n             + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n    float n_ = 1.0/7.0; // N=7\n    vec3  ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n  // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n  }\n    `\n  },\n\n\n  _rgbToHsv: {\n    type: 'util',\n    glsl: `vec3 _rgbToHsv(vec3 c){\n            vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n            vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n            vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n            float d = q.x - min(q.w, q.y);\n            float e = 1.0e-10;\n            return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n        }`\n  },\n  _hsvToRgb: {\n    type: 'util',\n    glsl: `vec3 _hsvToRgb(vec3 c){\n        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }`\n  }\n}\n","import generateGlsl from './generate-glsl.js'\n// const formatArguments = require('./glsl-utils.js').formatArguments\n\n// const glslTransforms = require('./glsl/composable-glsl-functions.js')\nimport utilityGlsl from './glsl/utility-functions.js'\n\nvar GlslSource = function (obj) {\n  this.transforms = []\n  this.transforms.push(obj)\n  this.defaultOutput = obj.defaultOutput\n  this.synth = obj.synth\n  this.type = 'GlslSource'\n  this.defaultUniforms = obj.defaultUniforms\n  return this\n}\n\nGlslSource.prototype.addTransform = function (obj)  {\n    this.transforms.push(obj)\n}\n\nGlslSource.prototype.out = function (_output) {\n  var output = _output || this.defaultOutput\n  var glsl = this.glsl(output)\n  this.synth.currentFunctions = []\n // output.renderPasses(glsl)\n  if(output) try{\n    output.render(glsl)\n  } catch (error) {\n    console.log('shader could not compile', error)\n  }\n}\n\nGlslSource.prototype.glsl = function () {\n  //var output = _output || this.defaultOutput\n  var self = this\n  // uniforms included in all shaders\n//  this.defaultUniforms = output.uniforms\n  var passes = []\n  var transforms = []\n//  console.log('output', output)\n  this.transforms.forEach((transform) => {\n    if(transform.transform.type === 'renderpass'){\n      // if (transforms.length > 0) passes.push(this.compile(transforms, output))\n      // transforms = []\n      // var uniforms = {}\n      // const inputs = formatArguments(transform, -1)\n      // inputs.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n      //\n      // passes.push({\n      //   frag: transform.transform.frag,\n      //   uniforms: Object.assign({}, self.defaultUniforms, uniforms)\n      // })\n      // transforms.push({name: 'prev', transform:  glslTransforms['prev'], synth: this.synth})\n      console.warn('no support for renderpass')\n    } else {\n      transforms.push(transform)\n    }\n  })\n\n  if (transforms.length > 0) passes.push(this.compile(transforms))\n\n  return passes\n}\n\nGlslSource.prototype.compile = function (transforms) {\n  var shaderInfo = generateGlsl(transforms, this.synth)\n  var uniforms = {}\n  shaderInfo.uniforms.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n\n  var frag = `\n  precision ${this.defaultOutput.precision} float;\n  ${Object.values(shaderInfo.uniforms).map((uniform) => {\n    let type = uniform.type\n    switch (uniform.type) {\n      case 'texture':\n        type = 'sampler2D'\n        break\n    }\n    return `\n      uniform ${type} ${uniform.name};`\n  }).join('')}\n  uniform float time;\n  uniform vec2 resolution;\n  varying vec2 uv;\n  uniform sampler2D prevBuffer;\n\n  ${Object.values(utilityGlsl).map((transform) => {\n  //  console.log(transform.glsl)\n    return `\n            ${transform.glsl}\n          `\n  }).join('')}\n\n  ${shaderInfo.glslFunctions.map((transform) => {\n    return `\n            ${transform.transform.glsl}\n          `\n  }).join('')}\n\n  void main () {\n    vec4 c = vec4(1, 0, 0, 1);\n    vec2 st = gl_FragCoord.xy/resolution.xy;\n    gl_FragColor = ${shaderInfo.fragColor};\n  }\n  `\n\n  return {\n    frag: frag,\n    uniforms: Object.assign({}, this.defaultUniforms, uniforms)\n  }\n\n}\n\nexport default GlslSource\n","/*\nFormat for adding functions to hydra. For each entry in this file, hydra automatically generates a glsl function and javascript function with the same name. You can also ass functions dynamically using setFunction(object).\n\n{\n  name: 'osc', // name that will be used to access function in js as well as in glsl\n  type: 'src', // can be 'src', 'color', 'combine', 'combineCoords'. see below for more info\n  inputs: [\n    {\n      name: 'freq',\n      type: 'float',\n      default: 0.2\n    },\n    {\n      name: 'sync',\n      type: 'float',\n      default: 0.1\n    },\n    {\n      name: 'offset',\n      type: 'float',\n      default: 0.0\n    }\n  ],\n    glsl: `\n      vec2 st = _st;\n      float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n      float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n      float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n      return vec4(r, g, b, 1.0);\n   `\n}\n\n// The above code generates the glsl function:\n`vec4 osc(vec2 _st, float freq, float sync, float offset){\n vec2 st = _st;\n float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n return vec4(r, g, b, 1.0);\n}`\n\n\nTypes and default arguments for hydra functions.\nThe value in the 'type' field lets the parser know which type the function will be returned as well as default arguments.\n\nconst types = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n\n*/\n\nexport default () => [\n  {\n  name: 'noise',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 1.0);`\n},\n{\n  name: 'voronoi',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'blending',\n      default: 0.3,\n    }\n  ],\n  glsl:\n`   vec3 color = vec3(.0);\n   // Scale\n   _st *= scale;\n   // Tile the space\n   vec2 i_st = floor(_st);\n   vec2 f_st = fract(_st);\n   float m_dist = 10.;  // minimun distance\n   vec2 m_point;        // minimum point\n   for (int j=-1; j<=1; j++ ) {\n   for (int i=-1; i<=1; i++ ) {\n   vec2 neighbor = vec2(float(i),float(j));\n   vec2 p = i_st + neighbor;\n   vec2 point = fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n   point = 0.5 + 0.5*sin(time*speed + 6.2831*point);\n   vec2 diff = neighbor + point - f_st;\n   float dist = length(diff);\n   if( dist < m_dist ) {\n   m_dist = dist;\n   m_point = point;\n   }\n   }\n   }\n   // Assign a color using the closest point position\n   color += dot(m_point,vec2(.3,.6));\n   color *= 1.0 - blending*m_dist;\n   return vec4(color, 1.0);`\n},\n{\n  name: 'osc',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'frequency',\n      default: 60,\n    },\n{\n      type: 'float',\n      name: 'sync',\n      default: 0.1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   float g = sin((st.x+time*sync)*frequency)*0.5 + 0.5;\n   float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   return vec4(r, g, b, 1.0);`\n},\n{\n  name: 'shape',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'sides',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'radius',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'smoothing',\n      default: 0.01,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * 2. - 1.;\n   // Angle and radius from the current pixel\n   float a = atan(st.x,st.y)+3.1416;\n   float r = (2.*3.1416)/sides;\n   float d = cos(floor(.5+a/r)*r-a)*length(st);\n   return vec4(vec3(1.0-smoothstep(radius,radius + smoothing + 0.0000001,d)), 1.0);`\n},\n{\n  name: 'gradient',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_st, sin(time*speed), 1.0);`\n},\n{\n  name: 'src',\n  type: 'src',\n  inputs: [\n    {\n      type: 'sampler2D',\n      name: 'tex',\n      default: NaN,\n    }\n  ],\n  glsl:\n`   //  vec2 uv = gl_FragCoord.xy/vec2(1280., 720.);\n   return texture2D(tex, fract(_st));`\n},\n{\n  name: 'solid',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4(r, g, b, a);`\n},\n{\n  name: 'rotate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'angle',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float ang = angle + speed *time;\n   xy = mat2(cos(ang),-sin(ang), sin(ang),cos(ang))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'scale',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.5,\n    },\n{\n      type: 'float',\n      name: 'xMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'yMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(offsetX, offsetY);\n   xy*=(1.0/vec2(amount*xMult, amount*yMult));\n   xy+=vec2(offsetX, offsetY);\n   return xy;\n   `\n},\n{\n  name: 'pixelate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'pixelX',\n      default: 20,\n    },\n{\n      type: 'float',\n      name: 'pixelY',\n      default: 20,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(pixelX, pixelY);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'posterize',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'bins',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'gamma',\n      default: 0.6,\n    }\n  ],\n  glsl:\n`   vec4 c2 = pow(_c0, vec4(gamma));\n   c2 *= vec4(bins);\n   c2 = floor(c2);\n   c2/= vec4(bins);\n   c2 = pow(c2, vec4(1.0/gamma));\n   return vec4(c2.xyz, _c0.a);`\n},\n{\n  name: 'shift',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec4 c2 = vec4(_c0);\n   c2.r = fract(c2.r + r);\n   c2.g = fract(c2.g + g);\n   c2.b = fract(c2.b + b);\n   c2.a = fract(c2.a + a);\n   return vec4(c2.rgba);`\n},\n{\n  name: 'repeat',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) * offsetX;\n   st.y += step(1., mod(st.x,2.0)) * offsetY;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeat',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offsetX;\n   st.y += step(1., mod(st.x,2.0)) + _c0.g * offsetY;\n   return fract(st);`\n},\n{\n  name: 'repeatX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'repeatY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(1.0, reps);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'kaleid',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   st -= 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return r*vec2(cos(a), sin(a));`\n},\n{\n  name: 'modulateKaleid',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st - 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return (_c0.r+r)*vec2(cos(a), sin(a));`\n},\n{\n  name: 'scroll',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speedX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'speedY',\n      default: 0,\n    }\n  ],\n  glsl:\n`\n   _st.x += scrollX + time*speedX;\n   _st.y += scrollY + time*speedY;\n   return fract(_st);`\n},\n{\n  name: 'scrollX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += _c0.r*scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'scrollY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += _c0.r*scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'add',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0+_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'sub',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0-_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'layer',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(mix(_c0.rgb, _c1.rgb, _c1.a), clamp(_c0.a + _c1.a, 0.0, 1.0));`\n},\n{\n  name: 'blend',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+_c1*amount;`\n},\n{\n  name: 'mult',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+(_c0*_c1)*amount;`\n},\n{\n  name: 'diff',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(abs(_c0.rgb-_c1.rgb), max(_c0.a, _c1.a));`\n},\n{\n  name: 'modulate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   //  return fract(st+(_c0.xy-0.5)*amount);\n   return _st + _c0.xy*amount;`\n},\n{\n  name: 'modulateScale',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   xy*=(1.0/vec2(offset + multiple*_c0.r, offset + multiple*_c0.g));\n   xy+=vec2(0.5);\n   return xy;`\n},\n{\n  name: 'modulatePixelate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 3,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(offset + _c0.x*multiple, offset + _c0.y*multiple);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'modulateRotate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float angle = offset + _c0.x * multiple;\n   xy = mat2(cos(angle),-sin(angle), sin(angle),cos(angle))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'modulateHue',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _st + (vec2(_c0.g - _c0.r, _c0.b - _c0.g) * amount * 1.0/resolution);`\n},\n{\n  name: 'invert',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4((1.0-_c0.rgb)*amount + _c0.rgb*(1.0-amount), _c0.a);`\n},\n{\n  name: 'contrast',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.6,\n    }\n  ],\n  glsl:\n`   vec4 c = (_c0-vec4(0.5))*vec4(amount) + vec4(0.5);\n   return vec4(c.rgb, _c0.a);`\n},\n{\n  name: 'brightness',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.rgb + vec3(amount), _c0.a);`\n},\n{\n  name: 'mask',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n  `   float a = _luminance(_c1.rgb);\n  return vec4(_c0.rgb*a, a*_c0.a);`\n},\n\n{\n  name: 'luma',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   float a = smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb));\n   return vec4(_c0.rgb*a, a);`\n},\n{\n  name: 'thresh',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.04,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb))), _c0.a);`\n},\n{\n  name: 'color',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 c = vec4(r, g, b, a);\n   vec4 pos = step(0.0, c); // detect whether negative\n   // if > 0, return r * _c0\n   // if < 0 return (1.0-r) * _c0\n   return vec4(mix((1.0-_c0)*abs(c), c*_c0, pos));`\n},\n{\n  name: 'saturate',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 2,\n    }\n  ],\n  glsl:\n`   const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n   vec3 intensity = vec3(dot(_c0.rgb, W));\n   return vec4(mix(intensity, _c0.rgb, amount), _c0.a);`\n},\n{\n  name: 'hue',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'hue',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c.r += hue;\n   //  c.r = fract(c.r);\n   return vec4(_hsvToRgb(c), _c0.a);`\n},\n{\n  name: 'colorama',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.005,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c += vec3(amount);\n   c = _hsvToRgb(c);\n   c = fract(c);\n   return vec4(c, _c0.a);`\n},\n{\n  name: 'prev',\n  type: 'src',\n  inputs: [\n\n  ],\n  glsl:\n`   return texture2D(prevBuffer, fract(_st));`\n},\n{\n  name: 'sum',\n  type: 'color',\n  inputs: [\n    {\n      type: 'vec4',\n      name: 'scale',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 v = _c0 * s;\n   return v.r + v.g + v.b + v.a;\n   }\n   float sum(vec2 _st, vec4 s) { // vec4 is not a typo, because argument type is not overloaded\n   vec2 v = _st.xy * s.xy;\n   return v.x + v.y;`\n},\n{\n  name: 'r',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.r * scale + offset);`\n},\n{\n  name: 'g',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.g * scale + offset);`\n},\n{\n  name: 'b',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.b * scale + offset);`\n},\n{\n  name: 'a',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.a * scale + offset);`\n}\n]\n","import GlslSource from './glsl-source.js'\nimport glslFunctions from './glsl/glsl-functions.js'\nconst functions = glslFunctions()\n\nclass GeneratorFactory {\n  constructor ({\n      defaultUniforms,\n      defaultOutput,\n      extendTransforms = [],\n      changeListener = (() => {})\n    } = {}\n    ) {\n    this.defaultOutput = defaultOutput\n    this.defaultUniforms = defaultUniforms\n    this.changeListener = changeListener\n    this.extendTransforms = extendTransforms\n    this.generators = {}\n    this.init()\n  }\n  init () {\n    this.glslTransforms = {}\n    this.generators = Object.entries(this.generators).reduce((prev, [method, transform]) => {\n      this.changeListener({type: 'remove', synth: this, method})\n      return prev\n    }, {})\n\n    this.sourceClass = (() => {\n      return class extends GlslSource {\n      }\n    })()\n\n    \n\n    // add user definied transforms\n    if (Array.isArray(this.extendTransforms)) {\n      functions.concat(this.extendTransforms)\n    } else if (typeof this.extendTransforms === 'object' && this.extendTransforms.type) {\n      functions.push(this.extendTransforms)\n    }\n\n    return functions.map((transform) => this.setFunction(transform))\n }\n\n _addMethod (method, transform) {\n    const self = this\n    this.glslTransforms[method] = transform\n    if (transform.type === 'src') {\n      const func = (...args) => new this.sourceClass({\n        name: method,\n        transform: transform,\n        userArgs: args,\n        defaultOutput: this.defaultOutput,\n        defaultUniforms: this.defaultUniforms,\n        synth: self\n      })\n      this.generators[method] = func\n      this.changeListener({type: 'add', synth: this, method})\n      return func\n    } else  {\n      this.sourceClass.prototype[method] = function (...args) {\n        this.transforms.push({name: method, transform: transform, userArgs: args, synth: self})\n        return this\n      }\n    }\n    return undefined\n  }\n\n  setFunction(obj) {\n    var processedGlsl = processGlsl(obj)\n    if(processedGlsl) this._addMethod(obj.name, processedGlsl)\n  }\n}\n\nconst typeLookup = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n// expects glsl of format\n// {\n//   name: 'osc', // name that will be used to access function as well as within glsl\n//   type: 'src', // can be src: vec4(vec2 _st), coord: vec2(vec2 _st), color: vec4(vec4 _c0), combine: vec4(vec4 _c0, vec4 _c1), combineCoord: vec2(vec2 _st, vec4 _c0)\n//   inputs: [\n//     {\n//       name: 'freq',\n//       type: 'float', // 'float'   //, 'texture', 'vec4'\n//       default: 0.2\n//     },\n//     {\n//           name: 'sync',\n//           type: 'float',\n//           default: 0.1\n//         },\n//         {\n//           name: 'offset',\n//           type: 'float',\n//           default: 0.0\n//         }\n//   ],\n   //  glsl: `\n   //    vec2 st = _st;\n   //    float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n   //    float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n   //    float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n   //    return vec4(r, g, b, 1.0);\n   // `\n// }\n\n// // generates glsl function:\n// `vec4 osc(vec2 _st, float freq, float sync, float offset){\n//  vec2 st = _st;\n//  float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n//  float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n//  float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n//  return vec4(r, g, b, 1.0);\n// }`\n\nfunction processGlsl(obj) {\n  let t = typeLookup[obj.type]\n  if(t) {\n  let baseArgs = t.args.map((arg) => arg).join(\", \")\n  // @todo: make sure this works for all input types, add validation\n  let customArgs = obj.inputs.map((input) => `${input.type} ${input.name}`).join(', ')\n  let args = `${baseArgs}${customArgs.length > 0 ? ', '+ customArgs: ''}`\n//  console.log('args are ', args)\n\n    let glslFunction =\n`\n  ${t.returnType} ${obj.name}(${args}) {\n      ${obj.glsl}\n  }\n`\n\n  // add extra input to beginning for backward combatibility @todo update compiler so this is no longer necessary\n    if(obj.type === 'combine' || obj.type === 'combineCoord') obj.inputs.unshift({\n        name: 'color',\n        type: 'vec4'\n      })\n    return Object.assign({}, obj, { glsl: glslFunction})\n  } else {\n    console.warn(`type ${obj.type} not recognized`, obj)\n  }\n\n}\n\nexport default GeneratorFactory\n","\nimport Output from './output.js'\nimport loop from 'raf-loop'\nimport Source from './hydra-source.js'\nimport MouseTools from './lib/mouse.js'\nimport Audio from './lib/audio.js'\nimport VidRecorder from './lib/video-recorder.js'\nimport ArrayUtils from './lib/array-utils.js'\nimport strudel from './lib/strudel.js'\nimport Sandbox from './eval-sandbox.js'\nimport Generator from './generator-factory.js'\n\nconst Mouse = MouseTools()\n// to do: add ability to pass in certain uniforms and transforms\nclass HydraRenderer {\n\n  constructor ({\n    pb = null,\n    width = 1280,\n    height = 720,\n    numSources = 4,\n    numOutputs = 4,\n    makeGlobal = true,\n    autoLoop = true,\n    detectAudio = true,\n    enableStreamCapture = true,\n    canvas,\n    precision,\n    extendTransforms = {} // add your own functions on init\n  } = {}) {\n\n    ArrayUtils.init()\n\n    this.pb = pb\n\n    this.width = width\n    this.height = height\n    this.renderAll = false\n    this.detectAudio = detectAudio\n\n    this._initCanvas(canvas)\n\n\n    // object that contains all properties that will be made available on the global context and during local evaluation\n    this.synth = {\n      time: 0,\n      bpm: 30,\n      width: this.width,\n      height: this.height,\n      fps: undefined,\n      stats: {\n        fps: 0\n      },\n      speed: 1,\n      mouse: Mouse,\n      render: this._render.bind(this),\n      setResolution: this.setResolution.bind(this),\n      update: (dt) => {},// user defined update function\n      hush: this.hush.bind(this),\n      tick: this.tick.bind(this)\n    }\n\n    if (makeGlobal) window.loadScript = this.loadScript\n\n\n    this.timeSinceLastUpdate = 0\n    this._time = 0 // for internal use, only to use for deciding when to render frames\n\n    // only allow valid precision options\n    let precisionOptions = ['lowp','mediump','highp']\n    if(precision && precisionOptions.includes(precision.toLowerCase())) {\n      this.precision = precision.toLowerCase()\n      //\n      // if(!precisionValid){\n      //   console.warn('[hydra-synth warning]\\nConstructor was provided an invalid floating point precision value of \"' + precision + '\". Using default value of \"mediump\" instead.')\n      // }\n    } else {\n      let isIOS =\n    (/iPad|iPhone|iPod/.test(navigator.platform) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n    !window.MSStream;\n      this.precision = isIOS ? 'highp' : 'mediump'\n    }\n\n\n\n    this.extendTransforms = extendTransforms\n\n    // boolean to store when to save screenshot\n    this.saveFrame = false\n\n    // if stream capture is enabled, this object contains the capture stream\n    this.captureStream = null\n\n    this.generator = undefined\n\n    this._initRegl()\n    this._initOutputs(numOutputs)\n    this._initSources(numSources)\n    this._generateGlslTransforms()\n\n    this.synth.screencap = () => {\n      this.saveFrame = true\n    }\n\n    if (enableStreamCapture) {\n      try {\n        this.captureStream = this.canvas.captureStream(25)\n        // to do: enable capture stream of specific sources and outputs\n        this.synth.vidRecorder = new VidRecorder(this.captureStream)\n      } catch (e) {\n        console.warn('[hydra-synth warning]\\nnew MediaSource() is not currently supported on iOS.')\n        console.error(e)\n      }\n    }\n\n    if(detectAudio) this._initAudio()\n\n    if(autoLoop) loop(this.tick.bind(this)).start()\n\n    // final argument is properties that the user can set, all others are treated as read-only\n    this.sandbox = new Sandbox(this.synth, makeGlobal, ['speed', 'update', 'bpm', 'fps'])\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n\n  getScreenImage(callback) {\n    this.imageCallback = callback\n    this.saveFrame = true\n  }\n\n  hush() {\n    this.s.forEach((source) => {\n      source.clear()\n    })\n    this.o.forEach((output) => {\n      this.synth.solid(0, 0, 0, 0).out(output)\n    })\n    this.synth.render(this.o[0])\n    // this.synth.update = (dt) => {}\n    this.sandbox.set('update', (dt) => {})\n  }\n\n  loadScript(url = \"\") {\n   const p = new Promise((res, rej) => {\n     var script = document.createElement(\"script\");\n     script.onload = function () {\n       console.log(`loaded script ${url}`);\n       res();\n     };\n     script.onerror = (err) => {\n       console.log(`error loading script ${url}`, \"log-error\");\n       res()\n     };\n     script.src = url;\n     document.head.appendChild(script);\n   });\n   return p;\n }\n\n  setResolution(width, height) {\n  //  console.log(width, height)\n    this.canvas.width = width\n    this.canvas.height = height\n    this.width = width // is this necessary?\n    this.height = height // ?\n    this.sandbox.set('width', width)\n    this.sandbox.set('height', height)\n    console.log(this.width)\n    this.o.forEach((output) => {\n      output.resize(width, height)\n    })\n    this.s.forEach((source) => {\n      source.resize(width, height)\n    })\n    this.regl._refresh()\n     console.log(this.canvas.width)\n  }\n\n  canvasToImage (callback) {\n    const a = document.createElement('a')\n    a.style.display = 'none'\n\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.png`\n    document.body.appendChild(a)\n    var self = this\n    this.canvas.toBlob( (blob) => {\n        if(self.imageCallback){\n          self.imageCallback(blob)\n          delete self.imageCallback\n        } else {\n          a.href = URL.createObjectURL(blob)\n          console.log(a.href)\n          a.click()\n        }\n    }, 'image/png')\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(a.href);\n    }, 300);\n  }\n\n  _initAudio () {\n    const that = this\n    this.synth.a = new Audio({\n      numBins: 4,\n      parentEl: this.canvas.parentNode\n      // changeListener: ({audio}) => {\n      //   that.a = audio.bins.map((_, index) =>\n      //     (scale = 1, offset = 0) => () => (audio.fft[index] * scale + offset)\n      //   )\n      //\n      //   if (that.makeGlobal) {\n      //     that.a.forEach((a, index) => {\n      //       const aname = `a${index}`\n      //       window[aname] = a\n      //     })\n      //   }\n      // }\n    })\n  }\n\n  // create main output canvas and add to screen\n  _initCanvas (canvas) {\n    if (canvas) {\n      this.canvas = canvas\n      this.width = canvas.width\n      this.height = canvas.height\n    } else {\n      this.canvas = document.createElement('canvas')\n      this.canvas.width = this.width\n      this.canvas.height = this.height\n      this.canvas.style.width = '100%'\n      this.canvas.style.height = '100%'\n      this.canvas.style.imageRendering = 'pixelated'\n      document.body.appendChild(this.canvas)\n    }\n  }\n\n  _initRegl () {\n    this.regl = require('regl')({\n    //  profile: true,\n      canvas: this.canvas,\n      pixelRatio: 1//,\n      // extensions: [\n      //   'oes_texture_half_float',\n      //   'oes_texture_half_float_linear'\n      // ],\n      // optionalExtensions: [\n      //   'oes_texture_float',\n      //   'oes_texture_float_linear'\n     //]\n   })\n\n    // This clears the color buffer to black and the depth buffer to 1\n    this.regl.clear({\n      color: [0, 0, 0, 1]\n    })\n\n    this.renderAll = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform sampler2D tex0;\n      uniform sampler2D tex1;\n      uniform sampler2D tex2;\n      uniform sampler2D tex3;\n\n      void main () {\n        vec2 st = vec2(1.0 - uv.x, uv.y);\n        st*= vec2(2);\n        vec2 q = floor(st).xy*(vec2(2.0, 1.0));\n        int quad = int(q.x) + int(q.y);\n        st.x += step(1., mod(st.y,2.0));\n        st.y += step(1., mod(st.x,2.0));\n        st = fract(st);\n        if(quad==0){\n          gl_FragColor = texture2D(tex0, st);\n        } else if(quad==1){\n          gl_FragColor = texture2D(tex1, st);\n        } else if (quad==2){\n          gl_FragColor = texture2D(tex2, st);\n        } else {\n          gl_FragColor = texture2D(tex3, st);\n        }\n\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        tex1: this.regl.prop('tex1'),\n        tex2: this.regl.prop('tex2'),\n        tex3: this.regl.prop('tex3')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n\n    this.renderFbo = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform vec2 resolution;\n      uniform sampler2D tex0;\n\n      void main () {\n        gl_FragColor = texture2D(tex0, vec2(1.0 - uv.x, uv.y));\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        resolution: this.regl.prop('resolution')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n  }\n\n  _initOutputs (numOutputs) {\n    const self = this\n    this.o = (Array(numOutputs)).fill().map((el, index) => {\n      var o = new Output({\n        regl: this.regl,\n        width: this.width,\n        height: this.height,\n        precision: this.precision,\n        label: `o${index}`\n      })\n    //  o.render()\n      o.id = index\n      self.synth['o'+index] = o\n      return o\n    })\n\n    // set default output\n    this.output = this.o[0]\n  }\n\n  _initSources (numSources) {\n    this.s = []\n    for(var i = 0; i < numSources; i++) {\n      this.createSource(i)\n    }\n  }\n\n  createSource (i) {\n    let s = new Source({regl: this.regl, pb: this.pb, width: this.width, height: this.height, label: `s${i}`})\n    this.synth['s' + this.s.length] = s\n    this.s.push(s)\n    return s\n  }\n\n  _generateGlslTransforms () {\n    var self = this\n    this.generator = new Generator({\n      defaultOutput: this.o[0],\n      defaultUniforms: this.o[0].uniforms,\n      extendTransforms: this.extendTransforms,\n      changeListener: ({type, method, synth}) => {\n          if (type === 'add') {\n            self.synth[method] = synth.generators[method]\n            if(self.sandbox) self.sandbox.add(method)\n          } else if (type === 'remove') {\n            // what to do here? dangerously deleting window methods\n            //delete window[method]\n          }\n      //  }\n      }\n    })\n    this.synth.setFunction = this.generator.setFunction.bind(this.generator)\n  }\n\n  _render (output) {\n    if (output) {\n      this.output = output\n      this.isRenderingAll = false\n    } else {\n      this.isRenderingAll = true\n    }\n  }\n\n  // dt in ms\n  tick (dt, uniforms) {\n    this.sandbox.tick()\n    if(this.detectAudio === true) this.synth.a.tick()\n  //  let updateInterval = 1000/this.synth.fps // ms\n    this.sandbox.set('time', this.synth.time += dt * 0.001 * this.synth.speed)\n    this.timeSinceLastUpdate += dt\n    if(!this.synth.fps || this.timeSinceLastUpdate >= 1000/this.synth.fps) {\n    //  console.log(1000/this.timeSinceLastUpdate)\n      this.synth.stats.fps = Math.ceil(1000/this.timeSinceLastUpdate)\n      if(this.synth.update) {\n        try { this.synth.update(this.timeSinceLastUpdate) } catch (e) { console.log(e) }\n      }\n    //  console.log(this.synth.speed, this.synth.time)\n      for (let i = 0; i < this.s.length; i++) {\n        this.s[i].tick(this.synth.time)\n      }\n    //  console.log(this.canvas.width, this.canvas.height)\n      for (let i = 0; i < this.o.length; i++) {\n        this.o[i].tick({\n          time: this.synth.time,\n          mouse: this.synth.mouse,\n          bpm: this.synth.bpm,\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      if (this.isRenderingAll) {\n        this.renderAll({\n          tex0: this.o[0].getCurrent(),\n          tex1: this.o[1].getCurrent(),\n          tex2: this.o[2].getCurrent(),\n          tex3: this.o[3].getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      } else {\n\n        this.renderFbo({\n          tex0: this.output.getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      this.timeSinceLastUpdate = 0\n    }\n    if(this.saveFrame === true) {\n      this.canvasToImage()\n      this.saveFrame = false\n    }\n  //  this.regl.poll()\n  }\n\n\n}\n\nexport default HydraRenderer\n"],"names":["Output","regl","precision","label","width","height","positionBuffer","buffer","draw","init","pingPongIndex","fbos","Array","fill","map","framebuffer","color","texture","mag","format","depthStencil","prototype","resize","forEach","fbo","getCurrent","getTexture","index","transformIndex","fragHeader","fragBody","vert","attributes","position","uniforms","time","prop","resolution","frag","render","passes","pass","self","Object","assign","prevBuffer","count","tick","props","deviceId","navigator","mediaDevices","enumerateDevices","then","devices","filter","kind","cameras","constraints","audio","video","exact","window","getUserMedia","stream","document","createElement","setAttribute","srcObject","Promise","resolve","reject","addEventListener","play","console","log","bind","options","getDisplayMedia","err","HydraSource","pb","src","dynamic","tex","shape","opts","params","data","initCam","Webcam","response","initVideo","url","vid","crossOrigin","autoplay","loop","muted","initImage","img","onload","initStream","streamName","initSource","on","nick","initScreen","Screen","clear","getTracks","track","stop","videoWidth","videoHeight","subimage","mouse","mouseButtons","ev","buttons","b","which","button","mouseElement","target","srcElement","element","mouseRelativeX","pageX","x","mouseRelativeY","pageY","y","mouseListen","callback","buttonState","mods","shift","alt","control","meta","attached","updateMods","changed","altKey","shiftKey","ctrlKey","metaKey","handleEvent","nextButtons","nextX","nextY","clearState","handleBlur","handleMods","handleMouseMove","handleMouseDown","handleMouseUp","attachListeners","detachListeners","removeEventListener","result","defineProperties","enabled","get","set","f","enumerable","Audio","numBins","cutoff","smooth","max","scale","isDrawing","parentEl","body","vol","setBins","beat","holdFrames","threshold","_cutoff","decay","_framesSinceBeat","onBeat","canvas","style","right","bottom","appendChild","ctx","getContext","fillStyle","strokeStyle","lineWidth","context","AudioContext","audio_stream","createMediaStreamSource","meyda","Meyda","createMeydaAnalyzer","audioContext","source","featureExtractors","detectBeat","level","Math","features","loudness","total","reducer","accumulator","currentValue","spacing","floor","specific","length","bins","prevBins","slice","bin","reduce","settings","fft","setCutoff","el","setSmooth","offset","a","setScale","setMax","hide","display","show","clearRect","fillRect","beginPath","moveTo","lineTo","stroke","yMax","VideoRecorder","mediaSource","MediaSource","output","sourceBuffer","addSourceBuffer","start","mimeType","recordedBlobs","mediaRecorder","MediaRecorder","e0","e1","e2","alert","error","onstop","_handleStop","ondataavailable","_handleDataAvailable","blob","Blob","type","URL","createObjectURL","href","d","Date","download","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","click","setTimeout","removeChild","revokeObjectURL","event","size","push","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","sin","PI","num","in_min","in_max","out_min","out_max","fast","speed","_speed","_smooth","ease","_ease","easing","_offset","fit","low","high","lowest","min","highest","newArr","getValue","arr","bpm","_index","currValue","nextValue","mini","parseStrudel","pattern","m","events","queryArc","value","e","warn","strudel","parent","initialCode","sandbox","createSandbox","addToContext","name","object","eval","code","initial","localEval","EvalSandbox","makeGlobal","userProps","Sandbox","properties","keys","property","add","DEFAULT_CONVERSIONS","args","ensure_decimal_dot","val","toString","indexOf","formatArguments","transform","startIndex","synthContext","defaultArgs","inputs","userArgs","generators","synth","input","typedArg","isUniform","vecLen","startsWith","Number","parseInt","substr","batchId","constructor","arrayUtils","transforms","final_transform","glsl_return_type","defaults","default_def","isArray","join","x1","shaderParams","glslFunctions","fragColor","gen","generateGlsl","uniform","values","contains","f0","uv","shaderString","f1","method","str","p","c","i","_luminance","glsl","_noise","_rgbToHsv","_hsvToRgb","GlslSource","obj","defaultOutput","defaultUniforms","addTransform","out","_output","currentFunctions","compile","shaderInfo","utilityGlsl","NaN","functions","GeneratorFactory","extendTransforms","changeListener","glslTransforms","entries","prev","sourceClass","setFunction","_addMethod","func","undefined","processedGlsl","processGlsl","typeLookup","returnType","baseArgs","arg","customArgs","glslFunction","unshift","Mouse","MouseTools","HydraRenderer","numSources","numOutputs","autoLoop","detectAudio","enableStreamCapture","ArrayUtils","renderAll","_initCanvas","fps","stats","_render","setResolution","update","dt","hush","loadScript","timeSinceLastUpdate","_time","precisionOptions","includes","toLowerCase","isIOS","test","platform","maxTouchPoints","MSStream","saveFrame","captureStream","generator","_initRegl","_initOutputs","_initSources","_generateGlslTransforms","screencap","vidRecorder","VidRecorder","_initAudio","getScreenImage","imageCallback","s","o","solid","res","rej","script","onerror","head","_refresh","canvasToImage","toBlob","parentNode","imageRendering","require","pixelRatio","tex0","tex1","tex2","tex3","depth","enable","renderFbo","id","createSource","Source","Generator","isRenderingAll","ceil"],"mappings":"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"}