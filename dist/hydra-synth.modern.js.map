{"version":3,"file":"hydra-synth.modern.js","sources":["../src/output.js","../src/lib/webcam.js","../src/lib/screenmedia.js","../src/hydra-source.js","../src/lib/mouse-event.js","../src/lib/mouse.js","../src/lib/audio.js","../src/lib/video-recorder.js","../src/lib/easing-functions.js","../src/lib/array-utils.js","../src/lib/strudel.js","../src/lib/sandbox.js","../src/eval-sandbox.js","../src/format-arguments.js","../src/generate-glsl.js","../src/glsl/utility-functions.js","../src/glsl-source.js","../src/glsl/glsl-functions.js","../src/generator-factory.js","../src/hydra-synth.js","../src/index.js"],"sourcesContent":["//const transforms = require('./glsl-transforms.js')\n\nvar Output = function ({ regl, precision, label = \"\", width, height}) {\n  this.regl = regl\n  this.precision = precision\n  this.label = label\n  this.positionBuffer = this.regl.buffer([\n    [-2, 0],\n    [0, -2],\n    [2, 2]\n  ])\n\n  this.draw = () => {}\n  this.init()\n  this.pingPongIndex = 0\n\n  // for each output, create two fbos for pingponging\n  this.fbos = (Array(2)).fill().map(() => this.regl.framebuffer({\n    color: this.regl.texture({\n      mag: 'nearest',\n      width: width,\n      height: height,\n      format: 'rgba'\n    }),\n    depthStencil: false\n  }))\n\n  // array containing render passes\n//  this.passes = []\n}\n\nOutput.prototype.resize = function(width, height) {\n  this.fbos.forEach((fbo) => {\n    fbo.resize(width, height)\n  })\n//  console.log(this)\n}\n\n\nOutput.prototype.getCurrent = function () {\n  return this.fbos[this.pingPongIndex]\n}\n\nOutput.prototype.getTexture = function () {\n   var index = this.pingPongIndex ? 0 : 1\n  return this.fbos[index]\n}\n\nOutput.prototype.init = function () {\n//  console.log('clearing')\n  this.transformIndex = 0\n  this.fragHeader = `\n  precision ${this.precision} float;\n\n  uniform float time;\n  varying vec2 uv;\n  `\n\n  this.fragBody = ``\n\n  this.vert = `\n  precision ${this.precision} float;\n  attribute vec2 position;\n  varying vec2 uv;\n\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }`\n\n  this.attributes = {\n    position: this.positionBuffer\n  }\n  this.uniforms = {\n    time: this.regl.prop('time'),\n    resolution: this.regl.prop('resolution')\n  }\n\n  this.frag = `\n       ${this.fragHeader}\n\n      void main () {\n        vec4 c = vec4(0, 0, 0, 0);\n        vec2 st = uv;\n        ${this.fragBody}\n        gl_FragColor = c;\n      }\n  `\n  return this\n}\n\n\nOutput.prototype.render = function (passes) {\n  let pass = passes[0]\n  //console.log('pass', pass, this.pingPongIndex)\n  var self = this\n      var uniforms = Object.assign(pass.uniforms, { prevBuffer:  () =>  {\n             //var index = this.pingPongIndex ? 0 : 1\n          //   var index = self.pingPong[(passIndex+1)%2]\n          //  console.log('ping pong', self.pingPongIndex)\n            return self.fbos[self.pingPongIndex]\n          }\n        })\n\n  self.draw = self.regl({\n    frag: pass.frag,\n    vert: self.vert,\n    attributes: self.attributes,\n    uniforms: uniforms,\n    count: 3,\n    framebuffer: () => {\n      self.pingPongIndex = self.pingPongIndex ? 0 : 1\n      return self.fbos[self.pingPongIndex]\n    }\n  })\n}\n\n\nOutput.prototype.tick = function (props) {\n//  console.log(props)\n  this.draw(props)\n}\n\nexport default Output\n","//const enumerateDevices = require('enumerate-devices')\n\nexport default function (deviceId) {\n  return navigator.mediaDevices.enumerateDevices()\n    .then(devices => devices.filter(devices => devices.kind === 'videoinput'))\n    .then(cameras => {\n      let constraints = { audio: false, video: true}\n      if (cameras[deviceId]) {\n        constraints['video'] = {\n          deviceId: { exact: cameras[deviceId].deviceId }\n        }\n      }\n    //  console.log(cameras)\n      return window.navigator.mediaDevices.getUserMedia(constraints)\n    })\n    .then(stream => {\n      const video = document.createElement('video')\n      video.setAttribute('autoplay', '')\n      video.setAttribute('muted', '')\n      video.setAttribute('playsinline', '')\n      //  video.src = window.URL.createObjectURL(stream)\n      video.srcObject = stream\n      return new Promise((resolve, reject) => {\n        video.addEventListener('loadedmetadata', () => {\n          video.play().then(() => resolve({video: video}))\n        })\n      })\n    })\n    .catch(console.log.bind(console))\n}\n","\nexport default function (options) {\n  return new Promise(function(resolve, reject) {\n    //  async function startCapture(displayMediaOptions) {\n    navigator.mediaDevices.getDisplayMedia(options).then((stream) => {\n      const video = document.createElement('video')\n      video.srcObject = stream\n      video.addEventListener('loadedmetadata', () => {\n        video.play()\n        resolve({video: video})\n      })\n    }).catch((err) => reject(err))\n  })\n}\n","import Webcam from './lib/webcam.js'\nimport Screen from './lib/screenmedia.js'\n\nclass HydraSource {\n  constructor ({ regl, width, height, pb, label = \"\"}) {\n    this.label = label\n    this.regl = regl\n    this.src = null\n    this.dynamic = true\n    this.width = width\n    this.height = height\n    this.tex = this.regl.texture({\n      //  shape: [width, height]\n      shape: [ 1, 1 ]\n    })\n    this.pb = pb\n  }\n\n  init (opts, params) {\n    if ('src' in opts) {\n      this.src = opts.src\n      this.tex = this.regl.texture({ data: this.src, ...params })\n    }\n    if ('dynamic' in opts) this.dynamic = opts.dynamic\n  }\n\n  initCam (index, params) {\n    const self = this\n    Webcam(index)\n      .then(response => {\n        self.src = response.video\n        self.dynamic = true\n        self.tex = self.regl.texture({ data: self.src, ...params })\n      })\n      .catch(err => console.log('could not get camera', err))\n  }\n\n  initVideo (url = '', params) {\n    // const self = this\n    const vid = document.createElement('video')\n    vid.crossOrigin = 'anonymous'\n    vid.autoplay = true\n    vid.loop = true\n    vid.muted = true // mute in order to load without user interaction\n    const onload = vid.addEventListener('loadeddata', () => {\n      this.src = vid\n      vid.play()\n      this.tex = this.regl.texture({ data: this.src, ...params})\n      this.dynamic = true\n    })\n    vid.src = url\n  }\n\n  initImage (url = '', params) {\n    const img = document.createElement('img')\n    img.crossOrigin = 'anonymous'\n    img.src = url\n    img.onload = () => {\n      this.src = img\n      this.dynamic = false\n      this.tex = this.regl.texture({ data: this.src, ...params})\n    }\n  }\n\n  initStream (streamName, params) {\n    //  console.log(\"initing stream!\", streamName)\n    let self = this\n    if (streamName && this.pb) {\n      this.pb.initSource(streamName)\n\n      this.pb.on('got video', function (nick, video) {\n        if (nick === streamName) {\n          self.src = video\n          self.dynamic = true\n          self.tex = self.regl.texture({ data: self.src, ...params})\n        }\n      })\n    }\n  }\n\n  // index only relevant in atom-hydra + desktop apps\n  initScreen (index = 0, params) {\n    const self = this\n    Screen()\n      .then(function (response) {\n        self.src = response.video\n        self.tex = self.regl.texture({ data: self.src, ...params})\n        self.dynamic = true\n        //  console.log(\"received screen input\")\n      })\n      .catch(err => console.log('could not get screen', err))\n  }\n\n  resize (width, height) {\n    this.width = width\n    this.height = height\n  }\n\n  clear () {\n    if (this.src && this.src.srcObject) {\n      if (this.src.srcObject.getTracks) {\n        this.src.srcObject.getTracks().forEach(track => track.stop())\n      }\n    }\n    this.src = null\n    this.tex = this.regl.texture({ shape: [ 1, 1 ] })\n  }\n\n  tick (time) {\n    //  console.log(this.src, this.tex.width, this.tex.height)\n    if (this.src !== null && this.dynamic === true) {\n      if (this.src.videoWidth && this.src.videoWidth !== this.tex.width) {\n        console.log(\n          this.src.videoWidth,\n          this.src.videoHeight,\n          this.tex.width,\n          this.tex.height\n        )\n        this.tex.resize(this.src.videoWidth, this.src.videoHeight)\n      }\n\n      if (this.src.width && this.src.width !== this.tex.width) {\n        this.tex.resize(this.src.width, this.src.height)\n      }\n\n      this.tex.subimage(this.src)\n    }\n  }\n\n  getTexture () {\n    return this.tex\n  }\n}\n\nexport default HydraSource\n","// https://github.com/mikolalysenko/mouse-event\n\nconst mouse = {}\n\nfunction mouseButtons(ev) {\n  if(typeof ev === 'object') {\n    if('buttons' in ev) {\n      return ev.buttons\n    } else if('which' in ev) {\n      var b = ev.which\n      if(b === 2) {\n        return 4\n      } else if(b === 3) {\n        return 2\n      } else if(b > 0) {\n        return 1<<(b-1)\n      }\n    } else if('button' in ev) {\n      var b = ev.button\n      if(b === 1) {\n        return 4\n      } else if(b === 2) {\n        return 2\n      } else if(b >= 0) {\n        return 1<<b\n      }\n    }\n  }\n  return 0\n}\nmouse.buttons = mouseButtons\n\nfunction mouseElement(ev) {\n  return ev.target || ev.srcElement || window\n}\nmouse.element = mouseElement\n\nfunction mouseRelativeX(ev) {\n  if(typeof ev === 'object') {\n    if('pageX' in ev) {\n      return ev.pageX\n    }\n  }\n  return 0\n}\nmouse.x = mouseRelativeX\n\nfunction mouseRelativeY(ev) {\n  if(typeof ev === 'object') {\n    if('pageY' in ev) {\n      return ev.pageY\n    }\n  }\n  return 0\n}\nmouse.y = mouseRelativeY\n\nexport default mouse","// based on https://github.com/mikolalysenko/mouse-change\n\nexport default mouseListen\n\nimport mouse from './mouse-event.js'\n\nfunction mouseListen (element, callback) {\n  if (!callback) {\n    callback = element\n    element = window\n  }\n\n  var buttonState = 0\n  var x = 0\n  var y = 0\n  var mods = {\n    shift: false,\n    alt: false,\n    control: false,\n    meta: false\n  }\n  var attached = false\n\n  function updateMods (ev) {\n    var changed = false\n    if ('altKey' in ev) {\n      changed = changed || ev.altKey !== mods.alt\n      mods.alt = !!ev.altKey\n    }\n    if ('shiftKey' in ev) {\n      changed = changed || ev.shiftKey !== mods.shift\n      mods.shift = !!ev.shiftKey\n    }\n    if ('ctrlKey' in ev) {\n      changed = changed || ev.ctrlKey !== mods.control\n      mods.control = !!ev.ctrlKey\n    }\n    if ('metaKey' in ev) {\n      changed = changed || ev.metaKey !== mods.meta\n      mods.meta = !!ev.metaKey\n    }\n    return changed\n  }\n\n  function handleEvent (nextButtons, ev) {\n    var nextX = mouse.x(ev)\n    var nextY = mouse.y(ev)\n    if ('buttons' in ev) {\n      nextButtons = ev.buttons | 0\n    }\n    if (nextButtons !== buttonState ||\n      nextX !== x ||\n      nextY !== y ||\n      updateMods(ev)) {\n      buttonState = nextButtons | 0\n      x = nextX || 0\n      y = nextY || 0\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function clearState (ev) {\n    handleEvent(0, ev)\n  }\n\n  function handleBlur () {\n    if (buttonState ||\n      x ||\n      y ||\n      mods.shift ||\n      mods.alt ||\n      mods.meta ||\n      mods.control) {\n      x = y = 0\n      buttonState = 0\n      mods.shift = mods.alt = mods.control = mods.meta = false\n      callback && callback(0, 0, 0, mods)\n    }\n  }\n\n  function handleMods (ev) {\n    if (updateMods(ev)) {\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function handleMouseMove (ev) {\n    if (mouse.buttons(ev) === 0) {\n      handleEvent(0, ev)\n    } else {\n      handleEvent(buttonState, ev)\n    }\n  }\n\n  function handleMouseDown (ev) {\n    handleEvent(buttonState | mouse.buttons(ev), ev)\n  }\n\n  function handleMouseUp (ev) {\n    handleEvent(buttonState & ~mouse.buttons(ev), ev)\n  }\n\n  function attachListeners () {\n    if (attached) {\n      return\n    }\n    attached = true\n\n    element.addEventListener('mousemove', handleMouseMove)\n\n    element.addEventListener('mousedown', handleMouseDown)\n\n    element.addEventListener('mouseup', handleMouseUp)\n\n    element.addEventListener('mouseleave', clearState)\n    element.addEventListener('mouseenter', clearState)\n    element.addEventListener('mouseout', clearState)\n    element.addEventListener('mouseover', clearState)\n\n    element.addEventListener('blur', handleBlur)\n\n    element.addEventListener('keyup', handleMods)\n    element.addEventListener('keydown', handleMods)\n    element.addEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.addEventListener('blur', handleBlur)\n\n      window.addEventListener('keyup', handleMods)\n      window.addEventListener('keydown', handleMods)\n      window.addEventListener('keypress', handleMods)\n    }\n  }\n\n  function detachListeners () {\n    if (!attached) {\n      return\n    }\n    attached = false\n\n    element.removeEventListener('mousemove', handleMouseMove)\n\n    element.removeEventListener('mousedown', handleMouseDown)\n\n    element.removeEventListener('mouseup', handleMouseUp)\n\n    element.removeEventListener('mouseleave', clearState)\n    element.removeEventListener('mouseenter', clearState)\n    element.removeEventListener('mouseout', clearState)\n    element.removeEventListener('mouseover', clearState)\n\n    element.removeEventListener('blur', handleBlur)\n\n    element.removeEventListener('keyup', handleMods)\n    element.removeEventListener('keydown', handleMods)\n    element.removeEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.removeEventListener('blur', handleBlur)\n\n      window.removeEventListener('keyup', handleMods)\n      window.removeEventListener('keydown', handleMods)\n      window.removeEventListener('keypress', handleMods)\n    }\n  }\n\n  // Attach listeners\n  attachListeners()\n\n  var result = {\n    element: element\n  }\n\n  Object.defineProperties(result, {\n    enabled: {\n      get: function () { return attached },\n      set: function (f) {\n        if (f) {\n          attachListeners()\n        } else {\n          detachListeners()\n        }\n      },\n      enumerable: true\n    },\n    buttons: {\n      get: function () { return buttonState },\n      enumerable: true\n    },\n    x: {\n      get: function () { return x },\n      enumerable: true\n    },\n    y: {\n      get: function () { return y },\n      enumerable: true\n    },\n    mods: {\n      get: function () { return mods },\n      enumerable: true\n    }\n  })\n\n  return result\n}\n","import Meyda from 'meyda'\n\nclass Audio {\n  constructor ({\n    numBins = 4,\n    cutoff = 2,\n    smooth = 0.4,\n    max = 15,\n    scale = 10,\n    isDrawing = false,\n    parentEl = document.body\n  }) {\n    this.vol = 0\n    this.scale = scale\n    this.max = max\n    this.cutoff = cutoff\n    this.smooth = smooth\n    this.setBins(numBins)\n\n    // beat detection from: https://github.com/therewasaguy/p5-music-viz/blob/gh-pages/demos/01d_beat_detect_amplitude/sketch.js\n    this.beat = {\n      holdFrames: 20,\n      threshold: 40,\n      _cutoff: 0, // adaptive based on sound state\n      decay: 0.98,\n      _framesSinceBeat: 0 // keeps track of frames\n    }\n\n    this.onBeat = () => {\n    //  console.log(\"beat\")\n    }\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 100\n    this.canvas.height = 80\n    this.canvas.style.width = \"100px\"\n    this.canvas.style.height = \"80px\"\n    this.canvas.style.position = 'absolute'\n    this.canvas.style.right = '0px'\n    this.canvas.style.bottom = '0px'\n    parentEl.appendChild(this.canvas)\n\n    this.isDrawing = isDrawing\n    this.ctx = this.canvas.getContext('2d')\n    this.ctx.fillStyle=\"#DFFFFF\"\n    this.ctx.strokeStyle=\"#0ff\"\n    this.ctx.lineWidth=0.5\n    if(window.navigator.mediaDevices) {\n    window.navigator.mediaDevices.getUserMedia({video: false, audio: true})\n      .then((stream) => {\n      //  console.log('got mic stream', stream)\n        this.stream = stream\n        this.context = new AudioContext()\n        //  this.context = new AudioContext()\n        let audio_stream = this.context.createMediaStreamSource(stream)\n\n      //  console.log(this.context)\n        this.meyda = Meyda.createMeydaAnalyzer({\n          audioContext: this.context,\n          source: audio_stream,\n          featureExtractors: [\n            'loudness',\n            //  'perceptualSpread',\n            //  'perceptualSharpness',\n            //  'spectralCentroid'\n          ]\n        })\n      })\n      .catch((err) => console.log('ERROR', err))\n    }\n  }\n\n  detectBeat (level) {\n    //console.log(level,   this.beat._cutoff)\n    if (level > this.beat._cutoff && level > this.beat.threshold) {\n      this.onBeat()\n      this.beat._cutoff = level *1.2\n      this.beat._framesSinceBeat = 0\n    } else {\n      if (this.beat._framesSinceBeat <= this.beat.holdFrames){\n        this.beat._framesSinceBeat ++;\n      } else {\n        this.beat._cutoff *= this.beat.decay\n        this.beat._cutoff = Math.max(  this.beat._cutoff, this.beat.threshold);\n      }\n    }\n  }\n\n  tick() {\n   if(this.meyda){\n     var features = this.meyda.get()\n     if(features && features !== null){\n       this.vol = features.loudness.total\n       this.detectBeat(this.vol)\n       // reduce loudness array to number of bins\n       const reducer = (accumulator, currentValue) => accumulator + currentValue;\n       let spacing = Math.floor(features.loudness.specific.length/this.bins.length)\n       this.prevBins = this.bins.slice(0)\n       this.bins = this.bins.map((bin, index) => {\n         return features.loudness.specific.slice(index * spacing, (index + 1)*spacing).reduce(reducer)\n       }).map((bin, index) => {\n         // map to specified range\n\n        // return (bin * (1.0 - this.smooth) + this.prevBins[index] * this.smooth)\n          return (bin * (1.0 - this.settings[index].smooth) + this.prevBins[index] * this.settings[index].smooth)\n       })\n       // var y = this.canvas.height - scale*this.settings[index].cutoff\n       // this.ctx.beginPath()\n       // this.ctx.moveTo(index*spacing, y)\n       // this.ctx.lineTo((index+1)*spacing, y)\n       // this.ctx.stroke()\n       //\n       // var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n       this.fft = this.bins.map((bin, index) => (\n        // Math.max(0, (bin - this.cutoff) / (this.max - this.cutoff))\n         Math.max(0, (bin - this.settings[index].cutoff)/this.settings[index].scale)\n       ))\n       if(this.isDrawing) this.draw()\n     }\n   }\n  }\n\n  setCutoff (cutoff) {\n    this.cutoff = cutoff\n    this.settings = this.settings.map((el) => {\n      el.cutoff = cutoff\n      return el\n    })\n  }\n\n  setSmooth (smooth) {\n    this.smooth = smooth\n    this.settings = this.settings.map((el) => {\n      el.smooth = smooth\n      return el\n    })\n  }\n\n  setBins (numBins) {\n    this.bins = Array(numBins).fill(0)\n    this.prevBins = Array(numBins).fill(0)\n    this.fft = Array(numBins).fill(0)\n    this.settings = Array(numBins).fill(0).map(() => ({\n      cutoff: this.cutoff,\n      scale: this.scale,\n      smooth: this.smooth\n    }))\n    // to do: what to do in non-global mode?\n    this.bins.forEach((bin, index) => {\n      window['a' + index] = (scale = 1, offset = 0) => () => (a.fft[index] * scale + offset)\n    })\n  //  console.log(this.settings)\n  }\n\n  setScale(scale){\n    this.scale = scale\n    this.settings = this.settings.map((el) => {\n      el.scale = scale\n      return el\n    })\n  }\n\n  setMax(max) {\n    this.max = max\n    console.log('set max is deprecated')\n  }\n  hide() {\n    this.isDrawing = false\n    this.canvas.style.display = 'none'\n  }\n\n  show() {\n    this.isDrawing = true\n    this.canvas.style.display = 'block'\n\n  }\n\n  draw () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    var spacing = this.canvas.width / this.bins.length\n    var scale = this.canvas.height / (this.max * 2)\n  //  console.log(this.bins)\n    this.bins.forEach((bin, index) => {\n\n      var height = bin * scale\n\n     this.ctx.fillRect(index * spacing, this.canvas.height - height, spacing, height)\n\n  //   console.log(this.settings[index])\n     var y = this.canvas.height - scale*this.settings[index].cutoff\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, y)\n     this.ctx.lineTo((index+1)*spacing, y)\n     this.ctx.stroke()\n\n     var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, yMax)\n     this.ctx.lineTo((index+1)*spacing, yMax)\n     this.ctx.stroke()\n    })\n\n\n    /*var y = this.canvas.height - scale*this.cutoff\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, y)\n    this.ctx.lineTo(this.canvas.width, y)\n    this.ctx.stroke()\n    var yMax = this.canvas.height - scale*this.max\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, yMax)\n    this.ctx.lineTo(this.canvas.width, yMax)\n    this.ctx.stroke()*/\n  }\n}\n\nexport default Audio\n","class VideoRecorder {\n  constructor(stream) {\n    this.mediaSource = new MediaSource()\n    this.stream = stream\n\n    // testing using a recording as input\n    this.output = document.createElement('video')\n    this.output.autoplay = true\n    this.output.loop = true\n\n    let self = this\n    this.mediaSource.addEventListener('sourceopen', () => {\n      console.log('MediaSource opened');\n      self.sourceBuffer = self.mediaSource.addSourceBuffer('video/webm; codecs=\"vp8\"');\n      console.log('Source buffer: ', sourceBuffer);\n    })\n  }\n\n  start() {\n  //  let options = {mimeType: 'video/webm'};\n\n//   let options = {mimeType: 'video/webm;codecs=h264'};\n   let options = {mimeType: 'video/webm;codecs=vp9'};\n\n    this.recordedBlobs = []\n    try {\n     this.mediaRecorder = new MediaRecorder(this.stream, options)\n    } catch (e0) {\n     console.log('Unable to create MediaRecorder with options Object: ', e0)\n     try {\n       options = {mimeType: 'video/webm,codecs=vp9'}\n       this.mediaRecorder = new MediaRecorder(this.stream, options)\n     } catch (e1) {\n       console.log('Unable to create MediaRecorder with options Object: ', e1)\n       try {\n         options = 'video/vp8' // Chrome 47\n         this.mediaRecorder = new MediaRecorder(this.stream, options)\n       } catch (e2) {\n         alert('MediaRecorder is not supported by this browser.\\n\\n' +\n           'Try Firefox 29 or later, or Chrome 47 or later, ' +\n           'with Enable experimental Web Platform features enabled from chrome://flags.')\n         console.error('Exception while creating MediaRecorder:', e2)\n         return\n       }\n     }\n   }\n   console.log('Created MediaRecorder', this.mediaRecorder, 'with options', options);\n   this.mediaRecorder.onstop = this._handleStop.bind(this)\n   this.mediaRecorder.ondataavailable = this._handleDataAvailable.bind(this)\n   this.mediaRecorder.start(100) // collect 100ms of data\n   console.log('MediaRecorder started', this.mediaRecorder)\n }\n\n  \n   stop(){\n     this.mediaRecorder.stop()\n   }\n\n _handleStop() {\n   //const superBuffer = new Blob(recordedBlobs, {type: 'video/webm'})\n   // const blob = new Blob(this.recordedBlobs, {type: 'video/webm;codecs=h264'})\n  const blob = new Blob(this.recordedBlobs, {type: this.mediaRecorder.mimeType})\n   const url = window.URL.createObjectURL(blob)\n   this.output.src = url\n\n    const a = document.createElement('a')\n    a.style.display = 'none'\n    a.href = url\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.webm`\n    document.body.appendChild(a)\n    a.click()\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 300);\n  }\n\n  _handleDataAvailable(event) {\n    if (event.data && event.data.size > 0) {\n      this.recordedBlobs.push(event.data);\n    }\n  }\n}\n\nexport default VideoRecorder\n","// from https://gist.github.com/gre/1650294\n\nexport default {\n  // no easing, no acceleration\n  linear: function (t) { return t },\n  // accelerating from zero velocity\n  easeInQuad: function (t) { return t*t },\n  // decelerating to zero velocity\n  easeOutQuad: function (t) { return t*(2-t) },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n  // accelerating from zero velocity\n  easeInCubic: function (t) { return t*t*t },\n  // decelerating to zero velocity\n  easeOutCubic: function (t) { return (--t)*t*t+1 },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n  // accelerating from zero velocity\n  easeInQuart: function (t) { return t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuart: function (t) { return 1-(--t)*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n  // accelerating from zero velocity\n  easeInQuint: function (t) { return t*t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t },\n  // sin shape\n  sin: function (t) { return (1 + Math.sin(Math.PI*t-Math.PI/2))/2 }\n}\n","// WIP utils for working with arrays\n// Possibly should be integrated with lfo extension, etc.\n// to do: transform time rather than array values, similar to working with coordinates in hydra\n\nimport easing from './easing-functions.js'\n\nvar map = (num, in_min, in_max, out_min, out_max) => {\n  return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nexport default {\n  init: () => {\n\n    Array.prototype.fast = function(speed = 1) {\n      this._speed = speed\n      return this\n    }\n\n    Array.prototype.smooth = function(smooth = 1) {\n      this._smooth = smooth\n      return this\n    }\n\n    Array.prototype.ease = function(ease = 'linear') {\n      if (typeof ease == 'function') {\n        this._smooth = 1\n        this._ease = ease\n      }\n      else if (easing[ease]){\n        this._smooth = 1\n        this._ease = easing[ease]\n      }\n      return this\n    }\n\n    Array.prototype.offset = function(offset = 0.5) {\n      this._offset = offset%1.0\n      return this\n    }\n\n    // Array.prototype.bounce = function() {\n    //   this.modifiers.bounce = true\n    //   return this\n    // }\n\n    Array.prototype.fit = function(low = 0, high =1) {\n      let lowest = Math.min(...this)\n      let highest =  Math.max(...this)\n      var newArr = this.map((num) => map(num, lowest, highest, low, high))\n      newArr._speed = this._speed\n      newArr._smooth = this._smooth\n      newArr._ease = this._ease\n      return newArr\n    }\n  },\n\n  getValue: (arr = []) => ({time, bpm}) =>{\n    let speed = arr._speed ? arr._speed : 1\n    let smooth = arr._smooth ? arr._smooth : 0\n    let index = time * speed * (bpm / 60) + (arr._offset || 0)\n\n    if (smooth!==0) {\n      let ease = arr._ease ? arr._ease : easing['linear']\n      let _index = index - (smooth / 2)\n      let currValue = arr[Math.floor(_index % (arr.length))]\n      let nextValue = arr[Math.floor((_index + 1) % (arr.length))]\n      let t = Math.min((_index%1)/smooth,1)\n      return ease(t) * (nextValue - currValue) + currValue\n    }\n    else {\n      const val = arr[Math.floor(index % (arr.length))]\n      return arr[Math.floor(index % (arr.length))]\n    }\n  }\n}\n","/*\n    Utility functions for using strudel within hydra. \n    (EXPERIMENTAL) Parses all strings as mini notation. \n*/\nimport { mini } from '@strudel.cycles/mini'\n\nwindow.mini = mini\nconst parseStrudel = (pattern) => ({ time, bpm }) => {\n    try {\n        const start = time * bpm / 60\n        // const m = mini(str)\n        const m = pattern\n        const events = m.queryArc(start, start+ 0.0001)\n        if(events.length > 0) {\n          //  console.log(typeof events[0].value, events[0].value)\n            if(typeof events[0].value === 'number') return events[0].value\n        }\n        return 0\n    } catch (e) {\n        console.warn(\"error within strudel pattern\", e)\n        return 0\n    }\n}\n\nwindow.strudel = parseStrudel\n\nexport { parseStrudel }","// attempt custom evaluation sandbox for hydra functions\n// for now, just avoids polluting the global namespace\n// should probably be replaced with an abstract syntax tree\n\nexport default (parent) => {\n  var initialCode = ``\n\n  var sandbox = createSandbox(initialCode)\n\n  var addToContext = (name, object) => {\n    console.log('running', name, object)\n    initialCode += `\n      var ${name} = ${object}\n    `\n    sandbox = createSandbox(initialCode)\n  }\n\n\n  return {\n    addToContext: addToContext,\n    eval: (code) => sandbox.eval(code)\n  }\n\n  function createSandbox (initial) {\n    console.log('evaling', initial)\n    eval(initial)\n    // optional params\n    var localEval = function (code)  {\n      eval(code)\n    }\n\n    // API/data for end-user\n    return {\n      eval: localEval\n    }\n  }\n}\n","// handles code evaluation and attaching relevant objects to global and evaluation contexts\n\nimport Sandbox from './lib/sandbox.js'\nimport ArrayUtils from './lib/array-utils.js'\n\nclass EvalSandbox {\n  constructor(parent, makeGlobal, userProps = []) {\n    this.makeGlobal = makeGlobal\n    this.sandbox = Sandbox(parent)\n    this.parent = parent\n    var properties = Object.keys(parent)\n    properties.forEach((property) => this.add(property))\n    this.userProps = userProps\n  }\n\n  add(name) {\n    if(this.makeGlobal) window[name] = this.parent[name]\n    this.sandbox.addToContext(name, `parent.${name}`)\n  }\n\n// sets on window as well as synth object if global (not needed for objects, which can be set directly)\n\n  set(property, value) {\n    if(this.makeGlobal) {\n      window[property] = value\n    }\n    this.parent[property] = value\n  }\n\n  tick() {\n    if(this.makeGlobal) {\n      this.userProps.forEach((property) => {\n        this.parent[property] = window[property]\n      })\n      //  this.parent.speed = window.speed\n    } else {\n\n    }\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n}\n\nexport default EvalSandbox\n","import arrayUtils from './lib/array-utils.js'\nimport { parseStrudel } from './lib/strudel.js'\nimport { mini } from '@strudel.cycles/mini'\n\n// [WIP] how to treat different dimensions (?)\nconst DEFAULT_CONVERSIONS = {\n  float: {\n    'vec4': { name: 'sum', args: [[1, 1, 1, 1]] },\n    'vec2': { name: 'sum', args: [[1, 1]] }\n  }\n}\n\nfunction fillArrayWithDefaults(arr, len) {\n  // fill the array with default values if it's too short\n  while (arr.length < len) {\n    if (arr.length === 3) { // push a 1 as the default for .a in vec4\n      arr.push(1.0)\n    } else {\n      arr.push(0.0)\n    }\n  }\n  return arr.slice(0, len)\n}\n\nconst ensure_decimal_dot = (val) => {\n  val = val.toString()\n  if (val.indexOf('.') < 0) {\n    val += '.'\n  }\n  return val\n}\n\n\n\nexport default function formatArguments(transform, startIndex, synthContext) {\n  const defaultArgs = transform.transform.inputs\n  const userArgs = transform.userArgs\n  const { generators } = transform.synth\n  const { src } = generators // depends on synth having src() function\n  return defaultArgs.map((input, index) => {\n    const typedArg = {\n      value: input.default,\n      type: input.type, //\n      isUniform: false,\n      name: input.name,\n      vecLen: 0\n      //  generateGlsl: null // function for creating glsl\n    }\n\n    if (typedArg.type === 'float') typedArg.value = ensure_decimal_dot(input.default)\n    if (input.type.startsWith('vec')) {\n      try {\n        typedArg.vecLen = Number.parseInt(input.type.substr(3))\n      } catch (e) {\n        console.log(`Error determining length of vector input type ${input.type} (${input.name})`)\n      }\n    }\n\n    // if user has input something for this argument\n    if (userArgs.length > index) {\n      typedArg.value = userArgs[index]\n      // do something if a composite or transform\n\n      if (typeof userArgs[index] === 'function') {\n        // if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n        //    typedArg.value = (context, props, batchId) => (fillArrayWithDefaults(userArgs[index](props), typedArg.vecLen))\n        // } else {\n        typedArg.value = (context, props, batchId) => {\n          try {\n            const val = userArgs[index](props)\n            if(typeof val === 'number') {\n              return val\n            } else {\n              console.warn('function does not return a number', userArgs[index])\n            }\n            return input.default\n          } catch (e) {\n            console.warn('ERROR', e)\n            return input.default\n          }\n        }\n        //  }\n\n        typedArg.isUniform = true\n      } else if (userArgs[index].constructor === Array) {\n        //   if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n        //     typedArg.isUniform = true\n        //     typedArg.value = fillArrayWithDefaults(typedArg.value, typedArg.vecLen)\n        //  } else {\n        //  console.log(\"is Array\")\n        // filter out values that are not a number\n       // const filteredArray = userArgs[index].filter((val) => typeof val === 'number')\n       // typedArg.value = (context, props, batchId) => arrayUtils.getValue(filteredArray)(props)\n       typedArg.value = (context, props, batchId) => arrayUtils.getValue(userArgs[index])(props)\n       typedArg.isUniform = true\n        // }\n      } else if (userArgs[index].constructor.name === 'Pattern') {\n        typedArg.value = (context, props, batchId) => parseStrudel(userArgs[index])(props)\n        typedArg.isUniform = true\n      // parse strings as strudel mini notation\n      } else if (typeof userArgs[index] === \"string\") {\n        typedArg.value = input.default\n        try {\n          const pattern = mini(userArgs[index])\n          typedArg.value = (context, props, batchId) => parseStrudel(pattern)(props)\n          typedArg.isUniform = true\n        } catch (e) {\n          console.warn('error parsing strudel pattern', e)\n        }\n      }\n       \n    }\n\n    if (startIndex < 0) {\n    } else {\n      if (typedArg.value && typedArg.value.transforms) {\n        const final_transform = typedArg.value.transforms[typedArg.value.transforms.length - 1]\n\n        if (final_transform.transform.glsl_return_type !== input.type) {\n          const defaults = DEFAULT_CONVERSIONS[input.type]\n          if (typeof defaults !== 'undefined') {\n            const default_def = defaults[final_transform.transform.glsl_return_type]\n            if (typeof default_def !== 'undefined') {\n              const { name, args } = default_def\n              typedArg.value = typedArg.value[name](...args)\n            }\n          }\n        }\n\n        typedArg.isUniform = false\n      } else if (typedArg.type === 'float' && typeof typedArg.value === 'number') {\n        typedArg.value = ensure_decimal_dot(typedArg.value)\n      } else if (typedArg.type.startsWith('vec') && typeof typedArg.value === 'object' && Array.isArray(typedArg.value)) {\n        typedArg.isUniform = false\n        typedArg.value = `${typedArg.type}(${typedArg.value.map(ensure_decimal_dot).join(', ')})`\n      } else if (input.type === 'sampler2D') {\n        // typedArg.tex = typedArg.value\n        var x = typedArg.value\n        typedArg.value = () => (x.getTexture())\n        typedArg.isUniform = true\n      } else {\n        // if passing in a texture reference, when function asks for vec4, convert to vec4\n        if (typedArg.value.getTexture && input.type === 'vec4') {\n          var x1 = typedArg.value\n          typedArg.value = src(x1)\n          typedArg.isUniform = false\n        }\n      }\n\n      // add tp uniform array if is a function that will pass in a different value on each render frame,\n      // or a texture/ external source\n\n      if (typedArg.isUniform) {\n        typedArg.name += startIndex\n        //  shaderParams.uniforms.push(typedArg)\n      }\n    }\n    return typedArg\n  })\n}\n\n","import formatArguments from './format-arguments.js'\n\n// Add extra functionality to Array.prototype for generating sequences in time\nimport arrayUtils from './lib/array-utils.js'\n\n\n\n// converts a tree of javascript functions to a shader\nexport default function (transforms) {\n    var shaderParams = {\n      uniforms: [], // list of uniforms used in shader\n      glslFunctions: [], // list of functions used in shader\n      fragColor: ''\n    }\n\n    var gen = generateGlsl(transforms, shaderParams)('st')\n    shaderParams.fragColor = gen\n    // remove uniforms with duplicate names\n    let uniforms = {}\n    shaderParams.uniforms.forEach((uniform) => uniforms[uniform.name] = uniform)\n    shaderParams.uniforms = Object.values(uniforms)\n    return shaderParams\n\n}\n\n\n// recursive function for generating shader string from object containing functions and user arguments. Order of functions in string depends on type of function\n// to do: improve variable names\nfunction generateGlsl (transforms, shaderParams) {\n  // transform function that outputs a shader string corresponding to gl_FragColor\n  var fragColor = () => ''\n  // var uniforms = []\n  // var glslFunctions = []\n  transforms.forEach((transform) => {\n    var inputs = formatArguments(transform, shaderParams.uniforms.length)\n    inputs.forEach((input) => {\n      if(input.isUniform) shaderParams.uniforms.push(input)\n    })\n\n    // add new glsl function to running list of functions\n    if(!contains(transform, shaderParams.glslFunctions)) shaderParams.glslFunctions.push(transform)\n\n    // current function for generating frag color shader code\n    var f0 = fragColor\n    if (transform.transform.type === 'src') {\n      fragColor = (uv) => `${shaderString(uv, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'coord') {\n      fragColor = (uv) => `${f0(`${shaderString(uv, transform.name, inputs, shaderParams)}`)}`\n    } else if (transform.transform.type === 'color') {\n      fragColor = (uv) =>  `${shaderString(`${f0(uv)}`, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'combine') {\n      // combining two generated shader strings (i.e. for blend, mult, add funtions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${shaderString(`${f0(uv)}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`\n    } else if (transform.transform.type === 'combineCoord') {\n      // combining two generated shader strings (i.e. for modulate functions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${f0(`${shaderString(`${uv}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`)}`\n\n\n    }\n  })\n//  console.log(fragColor)\n  //  break;\n  return fragColor\n}\n\n// assembles a shader string containing the arguments and the function name, i.e. 'osc(uv, frequency)'\nfunction shaderString (uv, method, inputs, shaderParams) {\n  const str = inputs.map((input) => {\n    if (input.isUniform) {\n      return input.name\n    } else if (input.value && input.value.transforms) {\n      // this by definition needs to be a generator, hence we start with 'st' as the initial value for generating the glsl fragment\n      return `${generateGlsl(input.value.transforms, shaderParams)('st')}`\n    }\n    return input.value\n  }).reduce((p, c) => `${p}, ${c}`, '')\n\n  return `${method}(${uv}${str})`\n}\n\n// merge two arrays and remove duplicates\nfunction mergeArrays (a, b) {\n  return a.concat(b.filter(function (item) {\n    return a.indexOf(item) < 0;\n  }))\n}\n\n// check whether array\nfunction contains(object, arr) {\n  for(var i = 0; i < arr.length; i++){\n    if(object.name == arr[i].name) return true\n  }\n  return false\n}\n\n\n\n","// functions that are only used within other functions\n\nexport default {\n  _luminance: {\n    type: 'util',\n    glsl: `float _luminance(vec3 rgb){\n      const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n      return dot(rgb, W);\n    }`\n  },\n  _noise: {\n    type: 'util',\n    glsl: `\n    //\tSimplex 3D Noise\n    //\tby Ian McEwan, Ashima Arts\n    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n  vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n  float _noise(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    //  x0 = x0 - 0. + 0.0 * C\n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n    i = mod(i, 289.0 );\n    vec4 p = permute( permute( permute(\n               i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n             + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n             + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n    float n_ = 1.0/7.0; // N=7\n    vec3  ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n  // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n  }\n    `\n  },\n\n\n  _rgbToHsv: {\n    type: 'util',\n    glsl: `vec3 _rgbToHsv(vec3 c){\n            vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n            vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n            vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n            float d = q.x - min(q.w, q.y);\n            float e = 1.0e-10;\n            return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n        }`\n  },\n  _hsvToRgb: {\n    type: 'util',\n    glsl: `vec3 _hsvToRgb(vec3 c){\n        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }`\n  }\n}\n","import generateGlsl from './generate-glsl.js'\n// const formatArguments = require('./glsl-utils.js').formatArguments\n\n// const glslTransforms = require('./glsl/composable-glsl-functions.js')\nimport utilityGlsl from './glsl/utility-functions.js'\n\nvar GlslSource = function (obj) {\n  this.transforms = []\n  this.transforms.push(obj)\n  this.defaultOutput = obj.defaultOutput\n  this.synth = obj.synth\n  this.type = 'GlslSource'\n  this.defaultUniforms = obj.defaultUniforms\n  return this\n}\n\nGlslSource.prototype.addTransform = function (obj)  {\n    this.transforms.push(obj)\n}\n\nGlslSource.prototype.out = function (_output) {\n  var output = _output || this.defaultOutput\n  var glsl = this.glsl(output)\n  this.synth.currentFunctions = []\n // output.renderPasses(glsl)\n  if(output) try{\n    output.render(glsl)\n  } catch (error) {\n    console.log('shader could not compile', error)\n  }\n}\n\nGlslSource.prototype.glsl = function () {\n  //var output = _output || this.defaultOutput\n  var self = this\n  // uniforms included in all shaders\n//  this.defaultUniforms = output.uniforms\n  var passes = []\n  var transforms = []\n//  console.log('output', output)\n  this.transforms.forEach((transform) => {\n    if(transform.transform.type === 'renderpass'){\n      // if (transforms.length > 0) passes.push(this.compile(transforms, output))\n      // transforms = []\n      // var uniforms = {}\n      // const inputs = formatArguments(transform, -1)\n      // inputs.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n      //\n      // passes.push({\n      //   frag: transform.transform.frag,\n      //   uniforms: Object.assign({}, self.defaultUniforms, uniforms)\n      // })\n      // transforms.push({name: 'prev', transform:  glslTransforms['prev'], synth: this.synth})\n      console.warn('no support for renderpass')\n    } else {\n      transforms.push(transform)\n    }\n  })\n\n  if (transforms.length > 0) passes.push(this.compile(transforms))\n\n  return passes\n}\n\nGlslSource.prototype.compile = function (transforms) {\n  var shaderInfo = generateGlsl(transforms, this.synth)\n  var uniforms = {}\n  shaderInfo.uniforms.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n\n  var frag = `\n  precision ${this.defaultOutput.precision} float;\n  ${Object.values(shaderInfo.uniforms).map((uniform) => {\n    let type = uniform.type\n    switch (uniform.type) {\n      case 'texture':\n        type = 'sampler2D'\n        break\n    }\n    return `\n      uniform ${type} ${uniform.name};`\n  }).join('')}\n  uniform float time;\n  uniform vec2 resolution;\n  varying vec2 uv;\n  uniform sampler2D prevBuffer;\n\n  ${Object.values(utilityGlsl).map((transform) => {\n  //  console.log(transform.glsl)\n    return `\n            ${transform.glsl}\n          `\n  }).join('')}\n\n  ${shaderInfo.glslFunctions.map((transform) => {\n    return `\n            ${transform.transform.glsl}\n          `\n  }).join('')}\n\n  void main () {\n    vec4 c = vec4(1, 0, 0, 1);\n    vec2 st = gl_FragCoord.xy/resolution.xy;\n    gl_FragColor = ${shaderInfo.fragColor};\n  }\n  `\n\n  return {\n    frag: frag,\n    uniforms: Object.assign({}, this.defaultUniforms, uniforms)\n  }\n\n}\n\nexport default GlslSource\n","/*\nFormat for adding functions to hydra. For each entry in this file, hydra automatically generates a glsl function and javascript function with the same name. You can also ass functions dynamically using setFunction(object).\n\n{\n  name: 'osc', // name that will be used to access function in js as well as in glsl\n  type: 'src', // can be 'src', 'color', 'combine', 'combineCoords'. see below for more info\n  inputs: [\n    {\n      name: 'freq',\n      type: 'float',\n      default: 0.2\n    },\n    {\n      name: 'sync',\n      type: 'float',\n      default: 0.1\n    },\n    {\n      name: 'offset',\n      type: 'float',\n      default: 0.0\n    }\n  ],\n    glsl: `\n      vec2 st = _st;\n      float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n      float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n      float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n      return vec4(r, g, b, 1.0);\n   `\n}\n\n// The above code generates the glsl function:\n`vec4 osc(vec2 _st, float freq, float sync, float offset){\n vec2 st = _st;\n float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n return vec4(r, g, b, 1.0);\n}`\n\n\nTypes and default arguments for hydra functions.\nThe value in the 'type' field lets the parser know which type the function will be returned as well as default arguments.\n\nconst types = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n\n*/\n\nexport default () => [\n  {\n  name: 'noise',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 1.0);`\n},\n{\n  name: 'voronoi',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'blending',\n      default: 0.3,\n    }\n  ],\n  glsl:\n`   vec3 color = vec3(.0);\n   // Scale\n   _st *= scale;\n   // Tile the space\n   vec2 i_st = floor(_st);\n   vec2 f_st = fract(_st);\n   float m_dist = 10.;  // minimun distance\n   vec2 m_point;        // minimum point\n   for (int j=-1; j<=1; j++ ) {\n   for (int i=-1; i<=1; i++ ) {\n   vec2 neighbor = vec2(float(i),float(j));\n   vec2 p = i_st + neighbor;\n   vec2 point = fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n   point = 0.5 + 0.5*sin(time*speed + 6.2831*point);\n   vec2 diff = neighbor + point - f_st;\n   float dist = length(diff);\n   if( dist < m_dist ) {\n   m_dist = dist;\n   m_point = point;\n   }\n   }\n   }\n   // Assign a color using the closest point position\n   color += dot(m_point,vec2(.3,.6));\n   color *= 1.0 - blending*m_dist;\n   return vec4(color, 1.0);`\n},\n{\n  name: 'osc',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'frequency',\n      default: 60,\n    },\n{\n      type: 'float',\n      name: 'sync',\n      default: 0.1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   float g = sin((st.x+time*sync)*frequency)*0.5 + 0.5;\n   float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   return vec4(r, g, b, 1.0);`\n},\n{\n  name: 'shape',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'sides',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'radius',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'smoothing',\n      default: 0.01,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * 2. - 1.;\n   // Angle and radius from the current pixel\n   float a = atan(st.x,st.y)+3.1416;\n   float r = (2.*3.1416)/sides;\n   float d = cos(floor(.5+a/r)*r-a)*length(st);\n   return vec4(vec3(1.0-smoothstep(radius,radius + smoothing + 0.0000001,d)), 1.0);`\n},\n{\n  name: 'gradient',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_st, sin(time*speed), 1.0);`\n},\n{\n  name: 'src',\n  type: 'src',\n  inputs: [\n    {\n      type: 'sampler2D',\n      name: 'tex',\n      default: NaN,\n    }\n  ],\n  glsl:\n`   //  vec2 uv = gl_FragCoord.xy/vec2(1280., 720.);\n   return texture2D(tex, fract(_st));`\n},\n{\n  name: 'solid',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4(r, g, b, a);`\n},\n{\n  name: 'rotate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'angle',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float ang = angle + speed *time;\n   xy = mat2(cos(ang),-sin(ang), sin(ang),cos(ang))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'scale',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.5,\n    },\n{\n      type: 'float',\n      name: 'xMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'yMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(offsetX, offsetY);\n   xy*=(1.0/vec2(amount*xMult, amount*yMult));\n   xy+=vec2(offsetX, offsetY);\n   return xy;\n   `\n},\n{\n  name: 'pixelate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'pixelX',\n      default: 20,\n    },\n{\n      type: 'float',\n      name: 'pixelY',\n      default: 20,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(pixelX, pixelY);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'posterize',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'bins',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'gamma',\n      default: 0.6,\n    }\n  ],\n  glsl:\n`   vec4 c2 = pow(_c0, vec4(gamma));\n   c2 *= vec4(bins);\n   c2 = floor(c2);\n   c2/= vec4(bins);\n   c2 = pow(c2, vec4(1.0/gamma));\n   return vec4(c2.xyz, _c0.a);`\n},\n{\n  name: 'shift',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec4 c2 = vec4(_c0);\n   c2.r = fract(c2.r + r);\n   c2.g = fract(c2.g + g);\n   c2.b = fract(c2.b + b);\n   c2.a = fract(c2.a + a);\n   return vec4(c2.rgba);`\n},\n{\n  name: 'repeat',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) * offsetX;\n   st.y += step(1., mod(st.x,2.0)) * offsetY;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeat',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offsetX;\n   st.y += step(1., mod(st.x,2.0)) + _c0.g * offsetY;\n   return fract(st);`\n},\n{\n  name: 'repeatX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'repeatY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(1.0, reps);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'kaleid',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   st -= 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return r*vec2(cos(a), sin(a));`\n},\n{\n  name: 'modulateKaleid',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st - 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return (_c0.r+r)*vec2(cos(a), sin(a));`\n},\n{\n  name: 'scroll',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speedX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'speedY',\n      default: 0,\n    }\n  ],\n  glsl:\n`\n   _st.x += scrollX + time*speedX;\n   _st.y += scrollY + time*speedY;\n   return fract(_st);`\n},\n{\n  name: 'scrollX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += _c0.r*scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'scrollY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += _c0.r*scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'add',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0+_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'sub',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0-_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'layer',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(mix(_c0.rgb, _c1.rgb, _c1.a), clamp(_c0.a + _c1.a, 0.0, 1.0));`\n},\n{\n  name: 'blend',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+_c1*amount;`\n},\n{\n  name: 'mult',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+(_c0*_c1)*amount;`\n},\n{\n  name: 'diff',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(abs(_c0.rgb-_c1.rgb), max(_c0.a, _c1.a));`\n},\n{\n  name: 'modulate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   //  return fract(st+(_c0.xy-0.5)*amount);\n   return _st + _c0.xy*amount;`\n},\n{\n  name: 'modulateScale',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   xy*=(1.0/vec2(offset + multiple*_c0.r, offset + multiple*_c0.g));\n   xy+=vec2(0.5);\n   return xy;`\n},\n{\n  name: 'modulatePixelate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 3,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(offset + _c0.x*multiple, offset + _c0.y*multiple);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'modulateRotate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float angle = offset + _c0.x * multiple;\n   xy = mat2(cos(angle),-sin(angle), sin(angle),cos(angle))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'modulateHue',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _st + (vec2(_c0.g - _c0.r, _c0.b - _c0.g) * amount * 1.0/resolution);`\n},\n{\n  name: 'invert',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4((1.0-_c0.rgb)*amount + _c0.rgb*(1.0-amount), _c0.a);`\n},\n{\n  name: 'contrast',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.6,\n    }\n  ],\n  glsl:\n`   vec4 c = (_c0-vec4(0.5))*vec4(amount) + vec4(0.5);\n   return vec4(c.rgb, _c0.a);`\n},\n{\n  name: 'brightness',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.rgb + vec3(amount), _c0.a);`\n},\n{\n  name: 'mask',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n  `   float a = _luminance(_c1.rgb);\n  return vec4(_c0.rgb*a, a*_c0.a);`\n},\n\n{\n  name: 'luma',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   float a = smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb));\n   return vec4(_c0.rgb*a, a);`\n},\n{\n  name: 'thresh',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.04,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb))), _c0.a);`\n},\n{\n  name: 'color',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 c = vec4(r, g, b, a);\n   vec4 pos = step(0.0, c); // detect whether negative\n   // if > 0, return r * _c0\n   // if < 0 return (1.0-r) * _c0\n   return vec4(mix((1.0-_c0)*abs(c), c*_c0, pos));`\n},\n{\n  name: 'saturate',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 2,\n    }\n  ],\n  glsl:\n`   const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n   vec3 intensity = vec3(dot(_c0.rgb, W));\n   return vec4(mix(intensity, _c0.rgb, amount), _c0.a);`\n},\n{\n  name: 'hue',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'hue',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c.r += hue;\n   //  c.r = fract(c.r);\n   return vec4(_hsvToRgb(c), _c0.a);`\n},\n{\n  name: 'colorama',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.005,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c += vec3(amount);\n   c = _hsvToRgb(c);\n   c = fract(c);\n   return vec4(c, _c0.a);`\n},\n{\n  name: 'prev',\n  type: 'src',\n  inputs: [\n\n  ],\n  glsl:\n`   return texture2D(prevBuffer, fract(_st));`\n},\n{\n  name: 'sum',\n  type: 'color',\n  inputs: [\n    {\n      type: 'vec4',\n      name: 'scale',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 v = _c0 * s;\n   return v.r + v.g + v.b + v.a;\n   }\n   float sum(vec2 _st, vec4 s) { // vec4 is not a typo, because argument type is not overloaded\n   vec2 v = _st.xy * s.xy;\n   return v.x + v.y;`\n},\n{\n  name: 'r',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.r * scale + offset);`\n},\n{\n  name: 'g',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.g * scale + offset);`\n},\n{\n  name: 'b',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.b * scale + offset);`\n},\n{\n  name: 'a',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.a * scale + offset);`\n}\n]\n","import GlslSource from './glsl-source.js'\nimport glslFunctions from './glsl/glsl-functions.js'\nconst functions = glslFunctions()\n\nclass GeneratorFactory {\n  constructor ({\n      defaultUniforms,\n      defaultOutput,\n      extendTransforms = [],\n      changeListener = (() => {})\n    } = {}\n    ) {\n    this.defaultOutput = defaultOutput\n    this.defaultUniforms = defaultUniforms\n    this.changeListener = changeListener\n    this.extendTransforms = extendTransforms\n    this.generators = {}\n    this.init()\n  }\n  init () {\n    this.glslTransforms = {}\n    this.generators = Object.entries(this.generators).reduce((prev, [method, transform]) => {\n      this.changeListener({type: 'remove', synth: this, method})\n      return prev\n    }, {})\n\n    this.sourceClass = (() => {\n      return class extends GlslSource {\n      }\n    })()\n\n    \n\n    // add user definied transforms\n    if (Array.isArray(this.extendTransforms)) {\n      functions.concat(this.extendTransforms)\n    } else if (typeof this.extendTransforms === 'object' && this.extendTransforms.type) {\n      functions.push(this.extendTransforms)\n    }\n\n    return functions.map((transform) => this.setFunction(transform))\n }\n\n _addMethod (method, transform) {\n    const self = this\n    this.glslTransforms[method] = transform\n    if (transform.type === 'src') {\n      const func = (...args) => new this.sourceClass({\n        name: method,\n        transform: transform,\n        userArgs: args,\n        defaultOutput: this.defaultOutput,\n        defaultUniforms: this.defaultUniforms,\n        synth: self\n      })\n      this.generators[method] = func\n      this.changeListener({type: 'add', synth: this, method})\n      return func\n    } else  {\n      this.sourceClass.prototype[method] = function (...args) {\n        this.transforms.push({name: method, transform: transform, userArgs: args, synth: self})\n        return this\n      }\n    }\n    return undefined\n  }\n\n  setFunction(obj) {\n    var processedGlsl = processGlsl(obj)\n    if(processedGlsl) this._addMethod(obj.name, processedGlsl)\n  }\n}\n\nconst typeLookup = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n// expects glsl of format\n// {\n//   name: 'osc', // name that will be used to access function as well as within glsl\n//   type: 'src', // can be src: vec4(vec2 _st), coord: vec2(vec2 _st), color: vec4(vec4 _c0), combine: vec4(vec4 _c0, vec4 _c1), combineCoord: vec2(vec2 _st, vec4 _c0)\n//   inputs: [\n//     {\n//       name: 'freq',\n//       type: 'float', // 'float'   //, 'texture', 'vec4'\n//       default: 0.2\n//     },\n//     {\n//           name: 'sync',\n//           type: 'float',\n//           default: 0.1\n//         },\n//         {\n//           name: 'offset',\n//           type: 'float',\n//           default: 0.0\n//         }\n//   ],\n   //  glsl: `\n   //    vec2 st = _st;\n   //    float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n   //    float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n   //    float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n   //    return vec4(r, g, b, 1.0);\n   // `\n// }\n\n// // generates glsl function:\n// `vec4 osc(vec2 _st, float freq, float sync, float offset){\n//  vec2 st = _st;\n//  float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n//  float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n//  float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n//  return vec4(r, g, b, 1.0);\n// }`\n\nfunction processGlsl(obj) {\n  let t = typeLookup[obj.type]\n  if(t) {\n  let baseArgs = t.args.map((arg) => arg).join(\", \")\n  // @todo: make sure this works for all input types, add validation\n  let customArgs = obj.inputs.map((input) => `${input.type} ${input.name}`).join(', ')\n  let args = `${baseArgs}${customArgs.length > 0 ? ', '+ customArgs: ''}`\n//  console.log('args are ', args)\n\n    let glslFunction =\n`\n  ${t.returnType} ${obj.name}(${args}) {\n      ${obj.glsl}\n  }\n`\n\n  // add extra input to beginning for backward combatibility @todo update compiler so this is no longer necessary\n    if(obj.type === 'combine' || obj.type === 'combineCoord') obj.inputs.unshift({\n        name: 'color',\n        type: 'vec4'\n      })\n    return Object.assign({}, obj, { glsl: glslFunction})\n  } else {\n    console.warn(`type ${obj.type} not recognized`, obj)\n  }\n\n}\n\nexport default GeneratorFactory\n","\nimport Output from './output.js'\nimport loop from 'raf-loop'\nimport Source from './hydra-source.js'\nimport MouseTools from './lib/mouse.js'\nimport Audio from './lib/audio.js'\nimport VidRecorder from './lib/video-recorder.js'\nimport ArrayUtils from './lib/array-utils.js'\nimport strudel from './lib/strudel.js'\nimport Sandbox from './eval-sandbox.js'\nimport Generator from './generator-factory.js'\n\nconst window = global.window\n\nconst Mouse = MouseTools()\n// to do: add ability to pass in certain uniforms and transforms\nclass HydraRenderer {\n\n  constructor ({\n    pb = null,\n    width = 1280,\n    height = 720,\n    numSources = 4,\n    numOutputs = 4,\n    makeGlobal = true,\n    autoLoop = true,\n    detectAudio = true,\n    enableStreamCapture = true,\n    canvas,\n    precision,\n    extendTransforms = {} // add your own functions on init\n  } = {}) {\n\n    ArrayUtils.init()\n\n    this.pb = pb\n\n    this.width = width\n    this.height = height\n    this.renderAll = false\n    this.detectAudio = detectAudio\n\n    this._initCanvas(canvas)\n\n    global.window.test = 'hi'\n    // object that contains all properties that will be made available on the global context and during local evaluation\n    this.synth = {\n      time: 0,\n      bpm: 30,\n      width: this.width,\n      height: this.height,\n      fps: undefined,\n      stats: {\n        fps: 0\n      },\n      speed: 1,\n      mouse: Mouse,\n      render: this._render.bind(this),\n      setResolution: this.setResolution.bind(this),\n      update: (dt) => {},// user defined update function\n      hush: this.hush.bind(this),\n      tick: this.tick.bind(this)\n    }\n\n    if (makeGlobal) window.loadScript = this.loadScript\n\n\n    this.timeSinceLastUpdate = 0\n    this._time = 0 // for internal use, only to use for deciding when to render frames\n\n    // only allow valid precision options\n    let precisionOptions = ['lowp','mediump','highp']\n    if(precision && precisionOptions.includes(precision.toLowerCase())) {\n      this.precision = precision.toLowerCase()\n      //\n      // if(!precisionValid){\n      //   console.warn('[hydra-synth warning]\\nConstructor was provided an invalid floating point precision value of \"' + precision + '\". Using default value of \"mediump\" instead.')\n      // }\n    } else {\n      let isIOS =\n    (/iPad|iPhone|iPod/.test(navigator.platform) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n    !window.MSStream;\n      this.precision = isIOS ? 'highp' : 'mediump'\n    }\n\n\n\n    this.extendTransforms = extendTransforms\n\n    // boolean to store when to save screenshot\n    this.saveFrame = false\n\n    // if stream capture is enabled, this object contains the capture stream\n    this.captureStream = null\n\n    this.generator = undefined\n\n    this._initRegl()\n    this._initOutputs(numOutputs)\n    this._initSources(numSources)\n    this._generateGlslTransforms()\n\n    this.synth.screencap = () => {\n      this.saveFrame = true\n    }\n\n    if (enableStreamCapture) {\n      try {\n        this.captureStream = this.canvas.captureStream(25)\n        // to do: enable capture stream of specific sources and outputs\n        this.synth.vidRecorder = new VidRecorder(this.captureStream)\n      } catch (e) {\n        console.warn('[hydra-synth warning]\\nnew MediaSource() is not currently supported on iOS.')\n        console.error(e)\n      }\n    }\n\n    if(detectAudio) this._initAudio()\n\n    if(autoLoop) loop(this.tick.bind(this)).start()\n\n    // final argument is properties that the user can set, all others are treated as read-only\n    this.sandbox = new Sandbox(this.synth, makeGlobal, ['speed', 'update', 'bpm', 'fps'])\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n\n  getScreenImage(callback) {\n    this.imageCallback = callback\n    this.saveFrame = true\n  }\n\n  hush() {\n    this.s.forEach((source) => {\n      source.clear()\n    })\n    this.o.forEach((output) => {\n      this.synth.solid(0, 0, 0, 0).out(output)\n    })\n    this.synth.render(this.o[0])\n    // this.synth.update = (dt) => {}\n    this.sandbox.set('update', (dt) => {})\n  }\n\n  loadScript(url = \"\") {\n   const p = new Promise((res, rej) => {\n     var script = document.createElement(\"script\");\n     script.onload = function () {\n       console.log(`loaded script ${url}`);\n       res();\n     };\n     script.onerror = (err) => {\n       console.log(`error loading script ${url}`, \"log-error\");\n       res()\n     };\n     script.src = url;\n     document.head.appendChild(script);\n   });\n   return p;\n }\n\n  setResolution(width, height) {\n  //  console.log(width, height)\n    this.canvas.width = width\n    this.canvas.height = height\n    this.width = width // is this necessary?\n    this.height = height // ?\n    this.sandbox.set('width', width)\n    this.sandbox.set('height', height)\n    console.log(this.width)\n    this.o.forEach((output) => {\n      output.resize(width, height)\n    })\n    this.s.forEach((source) => {\n      source.resize(width, height)\n    })\n    this.regl._refresh()\n     console.log(this.canvas.width)\n  }\n\n  canvasToImage (callback) {\n    const a = document.createElement('a')\n    a.style.display = 'none'\n\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.png`\n    document.body.appendChild(a)\n    var self = this\n    this.canvas.toBlob( (blob) => {\n        if(self.imageCallback){\n          self.imageCallback(blob)\n          delete self.imageCallback\n        } else {\n          a.href = URL.createObjectURL(blob)\n          console.log(a.href)\n          a.click()\n        }\n    }, 'image/png')\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(a.href);\n    }, 300);\n  }\n\n  _initAudio () {\n    const that = this\n    this.synth.a = new Audio({\n      numBins: 4,\n      parentEl: this.canvas.parentNode\n      // changeListener: ({audio}) => {\n      //   that.a = audio.bins.map((_, index) =>\n      //     (scale = 1, offset = 0) => () => (audio.fft[index] * scale + offset)\n      //   )\n      //\n      //   if (that.makeGlobal) {\n      //     that.a.forEach((a, index) => {\n      //       const aname = `a${index}`\n      //       window[aname] = a\n      //     })\n      //   }\n      // }\n    })\n  }\n\n  // create main output canvas and add to screen\n  _initCanvas (canvas) {\n    if (canvas) {\n      this.canvas = canvas\n      this.width = canvas.width\n      this.height = canvas.height\n    } else {\n      this.canvas = document.createElement('canvas')\n      this.canvas.width = this.width\n      this.canvas.height = this.height\n      this.canvas.style.width = '100%'\n      this.canvas.style.height = '100%'\n      this.canvas.style.imageRendering = 'pixelated'\n      document.body.appendChild(this.canvas)\n    }\n  }\n\n  _initRegl () {\n    this.regl = require('regl')({\n    //  profile: true,\n      canvas: this.canvas,\n      pixelRatio: 1//,\n      // extensions: [\n      //   'oes_texture_half_float',\n      //   'oes_texture_half_float_linear'\n      // ],\n      // optionalExtensions: [\n      //   'oes_texture_float',\n      //   'oes_texture_float_linear'\n     //]\n   })\n\n    // This clears the color buffer to black and the depth buffer to 1\n    this.regl.clear({\n      color: [0, 0, 0, 1]\n    })\n\n    this.renderAll = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform sampler2D tex0;\n      uniform sampler2D tex1;\n      uniform sampler2D tex2;\n      uniform sampler2D tex3;\n\n      void main () {\n        vec2 st = vec2(1.0 - uv.x, uv.y);\n        st*= vec2(2);\n        vec2 q = floor(st).xy*(vec2(2.0, 1.0));\n        int quad = int(q.x) + int(q.y);\n        st.x += step(1., mod(st.y,2.0));\n        st.y += step(1., mod(st.x,2.0));\n        st = fract(st);\n        if(quad==0){\n          gl_FragColor = texture2D(tex0, st);\n        } else if(quad==1){\n          gl_FragColor = texture2D(tex1, st);\n        } else if (quad==2){\n          gl_FragColor = texture2D(tex2, st);\n        } else {\n          gl_FragColor = texture2D(tex3, st);\n        }\n\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        tex1: this.regl.prop('tex1'),\n        tex2: this.regl.prop('tex2'),\n        tex3: this.regl.prop('tex3')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n\n    this.renderFbo = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform vec2 resolution;\n      uniform sampler2D tex0;\n\n      void main () {\n        gl_FragColor = texture2D(tex0, vec2(1.0 - uv.x, uv.y));\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        resolution: this.regl.prop('resolution')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n  }\n\n  _initOutputs (numOutputs) {\n    const self = this\n    this.o = (Array(numOutputs)).fill().map((el, index) => {\n      var o = new Output({\n        regl: this.regl,\n        width: this.width,\n        height: this.height,\n        precision: this.precision,\n        label: `o${index}`\n      })\n    //  o.render()\n      o.id = index\n      self.synth['o'+index] = o\n      return o\n    })\n\n    // set default output\n    this.output = this.o[0]\n  }\n\n  _initSources (numSources) {\n    this.s = []\n    for(var i = 0; i < numSources; i++) {\n      this.createSource(i)\n    }\n  }\n\n  createSource (i) {\n    let s = new Source({regl: this.regl, pb: this.pb, width: this.width, height: this.height, label: `s${i}`})\n    this.synth['s' + this.s.length] = s\n    this.s.push(s)\n    return s\n  }\n\n  _generateGlslTransforms () {\n    var self = this\n    this.generator = new Generator({\n      defaultOutput: this.o[0],\n      defaultUniforms: this.o[0].uniforms,\n      extendTransforms: this.extendTransforms,\n      changeListener: ({type, method, synth}) => {\n          if (type === 'add') {\n            self.synth[method] = synth.generators[method]\n            if(self.sandbox) self.sandbox.add(method)\n          } else if (type === 'remove') {\n            // what to do here? dangerously deleting window methods\n            //delete window[method]\n          }\n      //  }\n      }\n    })\n    this.synth.setFunction = this.generator.setFunction.bind(this.generator)\n  }\n\n  _render (output) {\n    if (output) {\n      this.output = output\n      this.isRenderingAll = false\n    } else {\n      this.isRenderingAll = true\n    }\n  }\n\n  // dt in ms\n  tick (dt, uniforms) {\n    this.sandbox.tick()\n    if(this.detectAudio === true) this.synth.a.tick()\n  //  let updateInterval = 1000/this.synth.fps // ms\n    this.sandbox.set('time', this.synth.time += dt * 0.001 * this.synth.speed)\n    this.timeSinceLastUpdate += dt\n    if(!this.synth.fps || this.timeSinceLastUpdate >= 1000/this.synth.fps) {\n    //  console.log(1000/this.timeSinceLastUpdate)\n      this.synth.stats.fps = Math.ceil(1000/this.timeSinceLastUpdate)\n      if(this.synth.update) {\n        try { this.synth.update(this.timeSinceLastUpdate) } catch (e) { console.log(e) }\n      }\n    //  console.log(this.synth.speed, this.synth.time)\n      for (let i = 0; i < this.s.length; i++) {\n        this.s[i].tick(this.synth.time)\n      }\n    //  console.log(this.canvas.width, this.canvas.height)\n      for (let i = 0; i < this.o.length; i++) {\n        this.o[i].tick({\n          time: this.synth.time,\n          mouse: this.synth.mouse,\n          bpm: this.synth.bpm,\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      if (this.isRenderingAll) {\n        this.renderAll({\n          tex0: this.o[0].getCurrent(),\n          tex1: this.o[1].getCurrent(),\n          tex2: this.o[2].getCurrent(),\n          tex3: this.o[3].getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      } else {\n\n        this.renderFbo({\n          tex0: this.output.getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      this.timeSinceLastUpdate = 0\n    }\n    if(this.saveFrame === true) {\n      this.canvasToImage()\n      this.saveFrame = false\n    }\n  //  this.regl.poll()\n  }\n\n\n}\n\nexport default HydraRenderer\n","import Synth from './hydra-synth.js'\n//import ShaderGenerator = require('./shader-generator.js')\n\n// export default Synth\nmodule.exports = Synth\n"],"names":["Output","regl","precision","label","width","height","positionBuffer","buffer","draw","init","pingPongIndex","fbos","Array","fill","map","framebuffer","color","texture","mag","format","depthStencil","prototype","resize","forEach","fbo","getCurrent","getTexture","index","transformIndex","fragHeader","fragBody","vert","attributes","position","uniforms","time","prop","resolution","frag","render","passes","pass","self","Object","assign","prevBuffer","count","tick","props","deviceId","navigator","mediaDevices","enumerateDevices","then","devices","filter","kind","cameras","constraints","audio","video","exact","window","getUserMedia","stream","document","createElement","setAttribute","srcObject","Promise","resolve","reject","addEventListener","play","catch","console","log","bind","options","getDisplayMedia","err","HydraSource","constructor","pb","src","dynamic","tex","shape","opts","params","data","initCam","Webcam","response","initVideo","url","vid","crossOrigin","autoplay","loop","muted","initImage","img","onload","initStream","streamName","initSource","on","nick","initScreen","Screen","clear","getTracks","track","stop","videoWidth","videoHeight","subimage","mouse","mouseButtons","ev","buttons","b","which","button","mouseElement","target","srcElement","element","mouseRelativeX","pageX","x","mouseRelativeY","pageY","y","mouseListen","callback","buttonState","mods","shift","alt","control","meta","attached","updateMods","changed","altKey","shiftKey","ctrlKey","metaKey","handleEvent","nextButtons","nextX","nextY","clearState","handleBlur","handleMods","handleMouseMove","handleMouseDown","handleMouseUp","attachListeners","detachListeners","removeEventListener","result","defineProperties","enabled","get","set","f","enumerable","Audio","numBins","cutoff","smooth","max","scale","isDrawing","parentEl","body","vol","setBins","beat","holdFrames","threshold","_cutoff","decay","_framesSinceBeat","onBeat","canvas","style","right","bottom","appendChild","ctx","getContext","fillStyle","strokeStyle","lineWidth","context","AudioContext","audio_stream","createMediaStreamSource","meyda","Meyda","createMeydaAnalyzer","audioContext","source","featureExtractors","detectBeat","level","Math","features","loudness","total","reducer","accumulator","currentValue","spacing","floor","specific","length","bins","prevBins","slice","bin","reduce","settings","fft","setCutoff","el","setSmooth","offset","a","setScale","setMax","hide","display","show","clearRect","fillRect","beginPath","moveTo","lineTo","stroke","yMax","VideoRecorder","mediaSource","MediaSource","output","sourceBuffer","addSourceBuffer","start","mimeType","recordedBlobs","mediaRecorder","MediaRecorder","e0","e1","e2","alert","error","onstop","_handleStop","ondataavailable","_handleDataAvailable","blob","Blob","type","URL","createObjectURL","href","d","Date","download","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","click","setTimeout","removeChild","revokeObjectURL","event","size","push","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","sin","PI","num","in_min","in_max","out_min","out_max","fast","speed","_speed","_smooth","ease","_ease","easing","_offset","fit","low","high","lowest","min","highest","newArr","getValue","arr","bpm","_index","currValue","nextValue","mini","parseStrudel","pattern","m","events","queryArc","value","e","warn","strudel","parent","initialCode","sandbox","createSandbox","addToContext","name","object","eval","code","initial","localEval","EvalSandbox","makeGlobal","userProps","Sandbox","properties","keys","property","add","DEFAULT_CONVERSIONS","float","args","ensure_decimal_dot","val","toString","indexOf","formatArguments","transform","startIndex","synthContext","defaultArgs","inputs","userArgs","generators","synth","input","typedArg","default","isUniform","vecLen","startsWith","Number","parseInt","substr","batchId","arrayUtils","transforms","final_transform","glsl_return_type","defaults","default_def","isArray","join","x1","shaderParams","glslFunctions","fragColor","gen","generateGlsl","uniform","values","contains","f0","uv","shaderString","f1","method","str","p","c","i","_luminance","glsl","_noise","_rgbToHsv","_hsvToRgb","GlslSource","obj","defaultOutput","defaultUniforms","addTransform","out","_output","currentFunctions","compile","shaderInfo","utilityGlsl","NaN","functions","GeneratorFactory","extendTransforms","changeListener","glslTransforms","entries","prev","sourceClass","setFunction","_addMethod","func","undefined","processedGlsl","processGlsl","typeLookup","returnType","baseArgs","arg","customArgs","glslFunction","unshift","global","Mouse","MouseTools","HydraRenderer","numSources","numOutputs","autoLoop","detectAudio","enableStreamCapture","ArrayUtils","renderAll","_initCanvas","test","fps","stats","_render","setResolution","update","dt","hush","loadScript","timeSinceLastUpdate","_time","precisionOptions","includes","toLowerCase","isIOS","platform","maxTouchPoints","MSStream","saveFrame","captureStream","generator","_initRegl","_initOutputs","_initSources","_generateGlslTransforms","screencap","vidRecorder","VidRecorder","_initAudio","getScreenImage","imageCallback","s","o","solid","res","rej","script","onerror","head","_refresh","canvasToImage","toBlob","parentNode","imageRendering","require","pixelRatio","tex0","tex1","tex2","tex3","depth","enable","renderFbo","id","createSource","Source","Generator","isRenderingAll","ceil","module","exports","Synth"],"mappings":"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C,EAAmC;AACjC,IAAA,IAAGhE,MAAM,CAACD,IAAP,IAAepB,GAAG,CAACqF,CAAD,CAAH,CAAOjE,IAAzB,EAA+B,OAAO,IAAP,CAAA;AAChC,GAAA;;AACD,EAAA,OAAO,KAAP,CAAA;AACD;;ACnGD;AAEA,kBAAe;AACbkE,EAAAA,UAAU,EAAE;AACV/I,IAAAA,IAAI,EAAE,MADI;AAEVgJ,IAAAA,IAAI,EAAG,CAAA;AACX;AACA;AACA,KAAA,CAAA;GANe;AAQbC,EAAAA,MAAM,EAAE;AACNjJ,IAAAA,IAAI,EAAE,MADA;AAENgJ,IAAAA,IAAI,EAAG,CAAA;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,CAAA;GApFe;AAwFbE,EAAAA,SAAS,EAAE;AACTlJ,IAAAA,IAAI,EAAE,MADG;AAETgJ,IAAAA,IAAI,EAAG,CAAA;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAA,CAAA;GAlGe;AAoGbG,EAAAA,SAAS,EAAE;AACTnJ,IAAAA,IAAI,EAAE,MADG;AAETgJ,IAAAA,IAAI,EAAG,CAAA;AACX;AACA;AACA;AACA,KAAA,CAAA;AANa,GAAA;AApGE,CAAf;;ACIA,IAAII,UAAU,GAAG,SAAbA,UAAa,CAAUC,GAAV,EAAe;EAC9B,IAAK/B,CAAAA,UAAL,GAAkB,EAAlB,CAAA;AACA,EAAA,IAAA,CAAKA,UAAL,CAAgBnG,IAAhB,CAAqBkI,GAArB,CAAA,CAAA;AACA,EAAA,IAAA,CAAKC,aAAL,GAAqBD,GAAG,CAACC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"}