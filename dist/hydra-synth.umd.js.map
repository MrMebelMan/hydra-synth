{"version":3,"file":"hydra-synth.umd.js","sources":["../src/output.js","../src/lib/webcam.js","../src/lib/screenmedia.js","../src/hydra-source.js","../src/lib/mouse-event.js","../src/lib/mouse.js","../src/lib/audio.js","../src/lib/video-recorder.js","../src/lib/easing-functions.js","../src/lib/array-utils.js","../src/lib/strudel.js","../src/lib/sandbox.js","../src/eval-sandbox.js","../src/format-arguments.js","../src/generate-glsl.js","../src/glsl/utility-functions.js","../src/glsl-source.js","../src/glsl/glsl-functions.js","../src/generator-factory.js","../src/hydra-synth.js","../src/index.js"],"sourcesContent":["//const transforms = require('./glsl-transforms.js')\n\nvar Output = function ({ regl, precision, label = \"\", width, height}) {\n  this.regl = regl\n  this.precision = precision\n  this.label = label\n  this.positionBuffer = this.regl.buffer([\n    [-2, 0],\n    [0, -2],\n    [2, 2]\n  ])\n\n  this.draw = () => {}\n  this.init()\n  this.pingPongIndex = 0\n\n  // for each output, create two fbos for pingponging\n  this.fbos = (Array(2)).fill().map(() => this.regl.framebuffer({\n    color: this.regl.texture({\n      mag: 'nearest',\n      width: width,\n      height: height,\n      format: 'rgba'\n    }),\n    depthStencil: false\n  }))\n\n  // array containing render passes\n//  this.passes = []\n}\n\nOutput.prototype.resize = function(width, height) {\n  this.fbos.forEach((fbo) => {\n    fbo.resize(width, height)\n  })\n//  console.log(this)\n}\n\n\nOutput.prototype.getCurrent = function () {\n  return this.fbos[this.pingPongIndex]\n}\n\nOutput.prototype.getTexture = function () {\n   var index = this.pingPongIndex ? 0 : 1\n  return this.fbos[index]\n}\n\nOutput.prototype.init = function () {\n//  console.log('clearing')\n  this.transformIndex = 0\n  this.fragHeader = `\n  precision ${this.precision} float;\n\n  uniform float time;\n  varying vec2 uv;\n  `\n\n  this.fragBody = ``\n\n  this.vert = `\n  precision ${this.precision} float;\n  attribute vec2 position;\n  varying vec2 uv;\n\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }`\n\n  this.attributes = {\n    position: this.positionBuffer\n  }\n  this.uniforms = {\n    time: this.regl.prop('time'),\n    resolution: this.regl.prop('resolution')\n  }\n\n  this.frag = `\n       ${this.fragHeader}\n\n      void main () {\n        vec4 c = vec4(0, 0, 0, 0);\n        vec2 st = uv;\n        ${this.fragBody}\n        gl_FragColor = c;\n      }\n  `\n  return this\n}\n\n\nOutput.prototype.render = function (passes) {\n  let pass = passes[0]\n  //console.log('pass', pass, this.pingPongIndex)\n  var self = this\n      var uniforms = Object.assign(pass.uniforms, { prevBuffer:  () =>  {\n             //var index = this.pingPongIndex ? 0 : 1\n          //   var index = self.pingPong[(passIndex+1)%2]\n          //  console.log('ping pong', self.pingPongIndex)\n            return self.fbos[self.pingPongIndex]\n          }\n        })\n\n  self.draw = self.regl({\n    frag: pass.frag,\n    vert: self.vert,\n    attributes: self.attributes,\n    uniforms: uniforms,\n    count: 3,\n    framebuffer: () => {\n      self.pingPongIndex = self.pingPongIndex ? 0 : 1\n      return self.fbos[self.pingPongIndex]\n    }\n  })\n}\n\n\nOutput.prototype.tick = function (props) {\n//  console.log(props)\n  this.draw(props)\n}\n\nexport default Output\n","//const enumerateDevices = require('enumerate-devices')\n\nexport default function (deviceId) {\n  return navigator.mediaDevices.enumerateDevices()\n    .then(devices => devices.filter(devices => devices.kind === 'videoinput'))\n    .then(cameras => {\n      let constraints = { audio: false, video: true}\n      if (cameras[deviceId]) {\n        constraints['video'] = {\n          deviceId: { exact: cameras[deviceId].deviceId }\n        }\n      }\n    //  console.log(cameras)\n      return window.navigator.mediaDevices.getUserMedia(constraints)\n    })\n    .then(stream => {\n      const video = document.createElement('video')\n      video.setAttribute('autoplay', '')\n      video.setAttribute('muted', '')\n      video.setAttribute('playsinline', '')\n      //  video.src = window.URL.createObjectURL(stream)\n      video.srcObject = stream\n      return new Promise((resolve, reject) => {\n        video.addEventListener('loadedmetadata', () => {\n          video.play().then(() => resolve({video: video}))\n        })\n      })\n    })\n    .catch(console.log.bind(console))\n}\n","\nexport default function (options) {\n  return new Promise(function(resolve, reject) {\n    //  async function startCapture(displayMediaOptions) {\n    navigator.mediaDevices.getDisplayMedia(options).then((stream) => {\n      const video = document.createElement('video')\n      video.srcObject = stream\n      video.addEventListener('loadedmetadata', () => {\n        video.play()\n        resolve({video: video})\n      })\n    }).catch((err) => reject(err))\n  })\n}\n","import Webcam from './lib/webcam.js'\nimport Screen from './lib/screenmedia.js'\n\nclass HydraSource {\n  constructor ({ regl, width, height, pb, label = \"\"}) {\n    this.label = label\n    this.regl = regl\n    this.src = null\n    this.dynamic = true\n    this.width = width\n    this.height = height\n    this.tex = this.regl.texture({\n      //  shape: [width, height]\n      shape: [ 1, 1 ]\n    })\n    this.pb = pb\n  }\n\n  init (opts, params) {\n    if ('src' in opts) {\n      this.src = opts.src\n      this.tex = this.regl.texture({ data: this.src, ...params })\n    }\n    if ('dynamic' in opts) this.dynamic = opts.dynamic\n  }\n\n  initCam (index, params) {\n    const self = this\n    Webcam(index)\n      .then(response => {\n        self.src = response.video\n        self.dynamic = true\n        self.tex = self.regl.texture({ data: self.src, ...params })\n      })\n      .catch(err => console.log('could not get camera', err))\n  }\n\n  initVideo (url = '', params) {\n    // const self = this\n    const vid = document.createElement('video')\n    vid.crossOrigin = 'anonymous'\n    vid.autoplay = true\n    vid.loop = true\n    vid.muted = true // mute in order to load without user interaction\n    const onload = vid.addEventListener('loadeddata', () => {\n      this.src = vid\n      vid.play()\n      this.tex = this.regl.texture({ data: this.src, ...params})\n      this.dynamic = true\n    })\n    vid.src = url\n  }\n\n  initImage (url = '', params) {\n    const img = document.createElement('img')\n    img.crossOrigin = 'anonymous'\n    img.src = url\n    img.onload = () => {\n      this.src = img\n      this.dynamic = false\n      this.tex = this.regl.texture({ data: this.src, ...params})\n    }\n  }\n\n  initStream (streamName, params) {\n    //  console.log(\"initing stream!\", streamName)\n    let self = this\n    if (streamName && this.pb) {\n      this.pb.initSource(streamName)\n\n      this.pb.on('got video', function (nick, video) {\n        if (nick === streamName) {\n          self.src = video\n          self.dynamic = true\n          self.tex = self.regl.texture({ data: self.src, ...params})\n        }\n      })\n    }\n  }\n\n  // index only relevant in atom-hydra + desktop apps\n  initScreen (index = 0, params) {\n    const self = this\n    Screen()\n      .then(function (response) {\n        self.src = response.video\n        self.tex = self.regl.texture({ data: self.src, ...params})\n        self.dynamic = true\n        //  console.log(\"received screen input\")\n      })\n      .catch(err => console.log('could not get screen', err))\n  }\n\n  resize (width, height) {\n    this.width = width\n    this.height = height\n  }\n\n  clear () {\n    if (this.src && this.src.srcObject) {\n      if (this.src.srcObject.getTracks) {\n        this.src.srcObject.getTracks().forEach(track => track.stop())\n      }\n    }\n    this.src = null\n    this.tex = this.regl.texture({ shape: [ 1, 1 ] })\n  }\n\n  tick (time) {\n    //  console.log(this.src, this.tex.width, this.tex.height)\n    if (this.src !== null && this.dynamic === true) {\n      if (this.src.videoWidth && this.src.videoWidth !== this.tex.width) {\n        console.log(\n          this.src.videoWidth,\n          this.src.videoHeight,\n          this.tex.width,\n          this.tex.height\n        )\n        this.tex.resize(this.src.videoWidth, this.src.videoHeight)\n      }\n\n      if (this.src.width && this.src.width !== this.tex.width) {\n        this.tex.resize(this.src.width, this.src.height)\n      }\n\n      this.tex.subimage(this.src)\n    }\n  }\n\n  getTexture () {\n    return this.tex\n  }\n}\n\nexport default HydraSource\n","// https://github.com/mikolalysenko/mouse-event\n\nconst mouse = {}\n\nfunction mouseButtons(ev) {\n  if(typeof ev === 'object') {\n    if('buttons' in ev) {\n      return ev.buttons\n    } else if('which' in ev) {\n      var b = ev.which\n      if(b === 2) {\n        return 4\n      } else if(b === 3) {\n        return 2\n      } else if(b > 0) {\n        return 1<<(b-1)\n      }\n    } else if('button' in ev) {\n      var b = ev.button\n      if(b === 1) {\n        return 4\n      } else if(b === 2) {\n        return 2\n      } else if(b >= 0) {\n        return 1<<b\n      }\n    }\n  }\n  return 0\n}\nmouse.buttons = mouseButtons\n\nfunction mouseElement(ev) {\n  return ev.target || ev.srcElement || window\n}\nmouse.element = mouseElement\n\nfunction mouseRelativeX(ev) {\n  if(typeof ev === 'object') {\n    if('pageX' in ev) {\n      return ev.pageX\n    }\n  }\n  return 0\n}\nmouse.x = mouseRelativeX\n\nfunction mouseRelativeY(ev) {\n  if(typeof ev === 'object') {\n    if('pageY' in ev) {\n      return ev.pageY\n    }\n  }\n  return 0\n}\nmouse.y = mouseRelativeY\n\nexport default mouse","// based on https://github.com/mikolalysenko/mouse-change\n\nexport default mouseListen\n\nimport mouse from './mouse-event.js'\n\nfunction mouseListen (element, callback) {\n  if (!callback) {\n    callback = element\n    element = window\n  }\n\n  var buttonState = 0\n  var x = 0\n  var y = 0\n  var mods = {\n    shift: false,\n    alt: false,\n    control: false,\n    meta: false\n  }\n  var attached = false\n\n  function updateMods (ev) {\n    var changed = false\n    if ('altKey' in ev) {\n      changed = changed || ev.altKey !== mods.alt\n      mods.alt = !!ev.altKey\n    }\n    if ('shiftKey' in ev) {\n      changed = changed || ev.shiftKey !== mods.shift\n      mods.shift = !!ev.shiftKey\n    }\n    if ('ctrlKey' in ev) {\n      changed = changed || ev.ctrlKey !== mods.control\n      mods.control = !!ev.ctrlKey\n    }\n    if ('metaKey' in ev) {\n      changed = changed || ev.metaKey !== mods.meta\n      mods.meta = !!ev.metaKey\n    }\n    return changed\n  }\n\n  function handleEvent (nextButtons, ev) {\n    var nextX = mouse.x(ev)\n    var nextY = mouse.y(ev)\n    if ('buttons' in ev) {\n      nextButtons = ev.buttons | 0\n    }\n    if (nextButtons !== buttonState ||\n      nextX !== x ||\n      nextY !== y ||\n      updateMods(ev)) {\n      buttonState = nextButtons | 0\n      x = nextX || 0\n      y = nextY || 0\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function clearState (ev) {\n    handleEvent(0, ev)\n  }\n\n  function handleBlur () {\n    if (buttonState ||\n      x ||\n      y ||\n      mods.shift ||\n      mods.alt ||\n      mods.meta ||\n      mods.control) {\n      x = y = 0\n      buttonState = 0\n      mods.shift = mods.alt = mods.control = mods.meta = false\n      callback && callback(0, 0, 0, mods)\n    }\n  }\n\n  function handleMods (ev) {\n    if (updateMods(ev)) {\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function handleMouseMove (ev) {\n    if (mouse.buttons(ev) === 0) {\n      handleEvent(0, ev)\n    } else {\n      handleEvent(buttonState, ev)\n    }\n  }\n\n  function handleMouseDown (ev) {\n    handleEvent(buttonState | mouse.buttons(ev), ev)\n  }\n\n  function handleMouseUp (ev) {\n    handleEvent(buttonState & ~mouse.buttons(ev), ev)\n  }\n\n  function attachListeners () {\n    if (attached) {\n      return\n    }\n    attached = true\n\n    element.addEventListener('mousemove', handleMouseMove)\n\n    element.addEventListener('mousedown', handleMouseDown)\n\n    element.addEventListener('mouseup', handleMouseUp)\n\n    element.addEventListener('mouseleave', clearState)\n    element.addEventListener('mouseenter', clearState)\n    element.addEventListener('mouseout', clearState)\n    element.addEventListener('mouseover', clearState)\n\n    element.addEventListener('blur', handleBlur)\n\n    element.addEventListener('keyup', handleMods)\n    element.addEventListener('keydown', handleMods)\n    element.addEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.addEventListener('blur', handleBlur)\n\n      window.addEventListener('keyup', handleMods)\n      window.addEventListener('keydown', handleMods)\n      window.addEventListener('keypress', handleMods)\n    }\n  }\n\n  function detachListeners () {\n    if (!attached) {\n      return\n    }\n    attached = false\n\n    element.removeEventListener('mousemove', handleMouseMove)\n\n    element.removeEventListener('mousedown', handleMouseDown)\n\n    element.removeEventListener('mouseup', handleMouseUp)\n\n    element.removeEventListener('mouseleave', clearState)\n    element.removeEventListener('mouseenter', clearState)\n    element.removeEventListener('mouseout', clearState)\n    element.removeEventListener('mouseover', clearState)\n\n    element.removeEventListener('blur', handleBlur)\n\n    element.removeEventListener('keyup', handleMods)\n    element.removeEventListener('keydown', handleMods)\n    element.removeEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.removeEventListener('blur', handleBlur)\n\n      window.removeEventListener('keyup', handleMods)\n      window.removeEventListener('keydown', handleMods)\n      window.removeEventListener('keypress', handleMods)\n    }\n  }\n\n  // Attach listeners\n  attachListeners()\n\n  var result = {\n    element: element\n  }\n\n  Object.defineProperties(result, {\n    enabled: {\n      get: function () { return attached },\n      set: function (f) {\n        if (f) {\n          attachListeners()\n        } else {\n          detachListeners()\n        }\n      },\n      enumerable: true\n    },\n    buttons: {\n      get: function () { return buttonState },\n      enumerable: true\n    },\n    x: {\n      get: function () { return x },\n      enumerable: true\n    },\n    y: {\n      get: function () { return y },\n      enumerable: true\n    },\n    mods: {\n      get: function () { return mods },\n      enumerable: true\n    }\n  })\n\n  return result\n}\n","import Meyda from 'meyda'\n\nclass Audio {\n  constructor ({\n    numBins = 4,\n    cutoff = 2,\n    smooth = 0.4,\n    max = 15,\n    scale = 10,\n    isDrawing = false,\n    parentEl = document.body\n  }) {\n    this.vol = 0\n    this.scale = scale\n    this.max = max\n    this.cutoff = cutoff\n    this.smooth = smooth\n    this.setBins(numBins)\n\n    // beat detection from: https://github.com/therewasaguy/p5-music-viz/blob/gh-pages/demos/01d_beat_detect_amplitude/sketch.js\n    this.beat = {\n      holdFrames: 20,\n      threshold: 40,\n      _cutoff: 0, // adaptive based on sound state\n      decay: 0.98,\n      _framesSinceBeat: 0 // keeps track of frames\n    }\n\n    this.onBeat = () => {\n    //  console.log(\"beat\")\n    }\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 100\n    this.canvas.height = 80\n    this.canvas.style.width = \"100px\"\n    this.canvas.style.height = \"80px\"\n    this.canvas.style.position = 'absolute'\n    this.canvas.style.right = '0px'\n    this.canvas.style.bottom = '0px'\n    parentEl.appendChild(this.canvas)\n\n    this.isDrawing = isDrawing\n    this.ctx = this.canvas.getContext('2d')\n    this.ctx.fillStyle=\"#DFFFFF\"\n    this.ctx.strokeStyle=\"#0ff\"\n    this.ctx.lineWidth=0.5\n    if(window.navigator.mediaDevices) {\n    window.navigator.mediaDevices.getUserMedia({video: false, audio: true})\n      .then((stream) => {\n      //  console.log('got mic stream', stream)\n        this.stream = stream\n        this.context = new AudioContext()\n        //  this.context = new AudioContext()\n        let audio_stream = this.context.createMediaStreamSource(stream)\n\n      //  console.log(this.context)\n        this.meyda = Meyda.createMeydaAnalyzer({\n          audioContext: this.context,\n          source: audio_stream,\n          featureExtractors: [\n            'loudness',\n            //  'perceptualSpread',\n            //  'perceptualSharpness',\n            //  'spectralCentroid'\n          ]\n        })\n      })\n      .catch((err) => console.log('ERROR', err))\n    }\n  }\n\n  detectBeat (level) {\n    //console.log(level,   this.beat._cutoff)\n    if (level > this.beat._cutoff && level > this.beat.threshold) {\n      this.onBeat()\n      this.beat._cutoff = level *1.2\n      this.beat._framesSinceBeat = 0\n    } else {\n      if (this.beat._framesSinceBeat <= this.beat.holdFrames){\n        this.beat._framesSinceBeat ++;\n      } else {\n        this.beat._cutoff *= this.beat.decay\n        this.beat._cutoff = Math.max(  this.beat._cutoff, this.beat.threshold);\n      }\n    }\n  }\n\n  tick() {\n   if(this.meyda){\n     var features = this.meyda.get()\n     if(features && features !== null){\n       this.vol = features.loudness.total\n       this.detectBeat(this.vol)\n       // reduce loudness array to number of bins\n       const reducer = (accumulator, currentValue) => accumulator + currentValue;\n       let spacing = Math.floor(features.loudness.specific.length/this.bins.length)\n       this.prevBins = this.bins.slice(0)\n       this.bins = this.bins.map((bin, index) => {\n         return features.loudness.specific.slice(index * spacing, (index + 1)*spacing).reduce(reducer)\n       }).map((bin, index) => {\n         // map to specified range\n\n        // return (bin * (1.0 - this.smooth) + this.prevBins[index] * this.smooth)\n          return (bin * (1.0 - this.settings[index].smooth) + this.prevBins[index] * this.settings[index].smooth)\n       })\n       // var y = this.canvas.height - scale*this.settings[index].cutoff\n       // this.ctx.beginPath()\n       // this.ctx.moveTo(index*spacing, y)\n       // this.ctx.lineTo((index+1)*spacing, y)\n       // this.ctx.stroke()\n       //\n       // var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n       this.fft = this.bins.map((bin, index) => (\n        // Math.max(0, (bin - this.cutoff) / (this.max - this.cutoff))\n         Math.max(0, (bin - this.settings[index].cutoff)/this.settings[index].scale)\n       ))\n       if(this.isDrawing) this.draw()\n     }\n   }\n  }\n\n  setCutoff (cutoff) {\n    this.cutoff = cutoff\n    this.settings = this.settings.map((el) => {\n      el.cutoff = cutoff\n      return el\n    })\n  }\n\n  setSmooth (smooth) {\n    this.smooth = smooth\n    this.settings = this.settings.map((el) => {\n      el.smooth = smooth\n      return el\n    })\n  }\n\n  setBins (numBins) {\n    this.bins = Array(numBins).fill(0)\n    this.prevBins = Array(numBins).fill(0)\n    this.fft = Array(numBins).fill(0)\n    this.settings = Array(numBins).fill(0).map(() => ({\n      cutoff: this.cutoff,\n      scale: this.scale,\n      smooth: this.smooth\n    }))\n    // to do: what to do in non-global mode?\n    this.bins.forEach((bin, index) => {\n      window['a' + index] = (scale = 1, offset = 0) => () => (a.fft[index] * scale + offset)\n    })\n  //  console.log(this.settings)\n  }\n\n  setScale(scale){\n    this.scale = scale\n    this.settings = this.settings.map((el) => {\n      el.scale = scale\n      return el\n    })\n  }\n\n  setMax(max) {\n    this.max = max\n    console.log('set max is deprecated')\n  }\n  hide() {\n    this.isDrawing = false\n    this.canvas.style.display = 'none'\n  }\n\n  show() {\n    this.isDrawing = true\n    this.canvas.style.display = 'block'\n\n  }\n\n  draw () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    var spacing = this.canvas.width / this.bins.length\n    var scale = this.canvas.height / (this.max * 2)\n  //  console.log(this.bins)\n    this.bins.forEach((bin, index) => {\n\n      var height = bin * scale\n\n     this.ctx.fillRect(index * spacing, this.canvas.height - height, spacing, height)\n\n  //   console.log(this.settings[index])\n     var y = this.canvas.height - scale*this.settings[index].cutoff\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, y)\n     this.ctx.lineTo((index+1)*spacing, y)\n     this.ctx.stroke()\n\n     var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, yMax)\n     this.ctx.lineTo((index+1)*spacing, yMax)\n     this.ctx.stroke()\n    })\n\n\n    /*var y = this.canvas.height - scale*this.cutoff\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, y)\n    this.ctx.lineTo(this.canvas.width, y)\n    this.ctx.stroke()\n    var yMax = this.canvas.height - scale*this.max\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, yMax)\n    this.ctx.lineTo(this.canvas.width, yMax)\n    this.ctx.stroke()*/\n  }\n}\n\nexport default Audio\n","class VideoRecorder {\n  constructor(stream) {\n    this.mediaSource = new MediaSource()\n    this.stream = stream\n\n    // testing using a recording as input\n    this.output = document.createElement('video')\n    this.output.autoplay = true\n    this.output.loop = true\n\n    let self = this\n    this.mediaSource.addEventListener('sourceopen', () => {\n      console.log('MediaSource opened');\n      self.sourceBuffer = self.mediaSource.addSourceBuffer('video/webm; codecs=\"vp8\"');\n      console.log('Source buffer: ', sourceBuffer);\n    })\n  }\n\n  start() {\n  //  let options = {mimeType: 'video/webm'};\n\n//   let options = {mimeType: 'video/webm;codecs=h264'};\n   let options = {mimeType: 'video/webm;codecs=vp9'};\n\n    this.recordedBlobs = []\n    try {\n     this.mediaRecorder = new MediaRecorder(this.stream, options)\n    } catch (e0) {\n     console.log('Unable to create MediaRecorder with options Object: ', e0)\n     try {\n       options = {mimeType: 'video/webm,codecs=vp9'}\n       this.mediaRecorder = new MediaRecorder(this.stream, options)\n     } catch (e1) {\n       console.log('Unable to create MediaRecorder with options Object: ', e1)\n       try {\n         options = 'video/vp8' // Chrome 47\n         this.mediaRecorder = new MediaRecorder(this.stream, options)\n       } catch (e2) {\n         alert('MediaRecorder is not supported by this browser.\\n\\n' +\n           'Try Firefox 29 or later, or Chrome 47 or later, ' +\n           'with Enable experimental Web Platform features enabled from chrome://flags.')\n         console.error('Exception while creating MediaRecorder:', e2)\n         return\n       }\n     }\n   }\n   console.log('Created MediaRecorder', this.mediaRecorder, 'with options', options);\n   this.mediaRecorder.onstop = this._handleStop.bind(this)\n   this.mediaRecorder.ondataavailable = this._handleDataAvailable.bind(this)\n   this.mediaRecorder.start(100) // collect 100ms of data\n   console.log('MediaRecorder started', this.mediaRecorder)\n }\n\n  \n   stop(){\n     this.mediaRecorder.stop()\n   }\n\n _handleStop() {\n   //const superBuffer = new Blob(recordedBlobs, {type: 'video/webm'})\n   // const blob = new Blob(this.recordedBlobs, {type: 'video/webm;codecs=h264'})\n  const blob = new Blob(this.recordedBlobs, {type: this.mediaRecorder.mimeType})\n   const url = window.URL.createObjectURL(blob)\n   this.output.src = url\n\n    const a = document.createElement('a')\n    a.style.display = 'none'\n    a.href = url\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.webm`\n    document.body.appendChild(a)\n    a.click()\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 300);\n  }\n\n  _handleDataAvailable(event) {\n    if (event.data && event.data.size > 0) {\n      this.recordedBlobs.push(event.data);\n    }\n  }\n}\n\nexport default VideoRecorder\n","// from https://gist.github.com/gre/1650294\n\nexport default {\n  // no easing, no acceleration\n  linear: function (t) { return t },\n  // accelerating from zero velocity\n  easeInQuad: function (t) { return t*t },\n  // decelerating to zero velocity\n  easeOutQuad: function (t) { return t*(2-t) },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n  // accelerating from zero velocity\n  easeInCubic: function (t) { return t*t*t },\n  // decelerating to zero velocity\n  easeOutCubic: function (t) { return (--t)*t*t+1 },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n  // accelerating from zero velocity\n  easeInQuart: function (t) { return t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuart: function (t) { return 1-(--t)*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n  // accelerating from zero velocity\n  easeInQuint: function (t) { return t*t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t },\n  // sin shape\n  sin: function (t) { return (1 + Math.sin(Math.PI*t-Math.PI/2))/2 }\n}\n","// WIP utils for working with arrays\n// Possibly should be integrated with lfo extension, etc.\n// to do: transform time rather than array values, similar to working with coordinates in hydra\n\nimport easing from './easing-functions.js'\n\nvar map = (num, in_min, in_max, out_min, out_max) => {\n  return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nexport default {\n  init: () => {\n\n    Array.prototype.fast = function(speed = 1) {\n      this._speed = speed\n      return this\n    }\n\n    Array.prototype.smooth = function(smooth = 1) {\n      this._smooth = smooth\n      return this\n    }\n\n    Array.prototype.ease = function(ease = 'linear') {\n      if (typeof ease == 'function') {\n        this._smooth = 1\n        this._ease = ease\n      }\n      else if (easing[ease]){\n        this._smooth = 1\n        this._ease = easing[ease]\n      }\n      return this\n    }\n\n    Array.prototype.offset = function(offset = 0.5) {\n      this._offset = offset%1.0\n      return this\n    }\n\n    // Array.prototype.bounce = function() {\n    //   this.modifiers.bounce = true\n    //   return this\n    // }\n\n    Array.prototype.fit = function(low = 0, high =1) {\n      let lowest = Math.min(...this)\n      let highest =  Math.max(...this)\n      var newArr = this.map((num) => map(num, lowest, highest, low, high))\n      newArr._speed = this._speed\n      newArr._smooth = this._smooth\n      newArr._ease = this._ease\n      return newArr\n    }\n  },\n\n  getValue: (arr = []) => ({time, bpm}) =>{\n    let speed = arr._speed ? arr._speed : 1\n    let smooth = arr._smooth ? arr._smooth : 0\n    let index = time * speed * (bpm / 60) + (arr._offset || 0)\n\n    if (smooth!==0) {\n      let ease = arr._ease ? arr._ease : easing['linear']\n      let _index = index - (smooth / 2)\n      let currValue = arr[Math.floor(_index % (arr.length))]\n      let nextValue = arr[Math.floor((_index + 1) % (arr.length))]\n      let t = Math.min((_index%1)/smooth,1)\n      return ease(t) * (nextValue - currValue) + currValue\n    }\n    else {\n      const val = arr[Math.floor(index % (arr.length))]\n      return arr[Math.floor(index % (arr.length))]\n    }\n  }\n}\n","/*\n    Utility functions for using strudel within hydra. \n    (EXPERIMENTAL) Parses all strings as mini notation. \n*/\nimport { mini } from '@strudel.cycles/mini'\n\nwindow.mini = mini\nconst parseStrudel = (pattern) => ({ time, bpm }) => {\n    try {\n        const start = time * bpm / 60\n        // const m = mini(str)\n        const m = pattern\n        const events = m.queryArc(start, start+ 0.0001)\n        if(events.length > 0) {\n          //  console.log(typeof events[0].value, events[0].value)\n            if(typeof events[0].value === 'number') return events[0].value\n        }\n        return 0\n    } catch (e) {\n        console.warn(\"error within strudel pattern\", e)\n        return 0\n    }\n}\n\nwindow.strudel = parseStrudel\n\nexport { parseStrudel }","// attempt custom evaluation sandbox for hydra functions\n// for now, just avoids polluting the global namespace\n// should probably be replaced with an abstract syntax tree\n\nexport default (parent) => {\n  var initialCode = ``\n\n  var sandbox = createSandbox(initialCode)\n\n  var addToContext = (name, object) => {\n    console.log('running', name, object)\n    initialCode += `\n      var ${name} = ${object}\n    `\n    sandbox = createSandbox(initialCode)\n  }\n\n\n  return {\n    addToContext: addToContext,\n    eval: (code) => sandbox.eval(code)\n  }\n\n  function createSandbox (initial) {\n    console.log('evaling', initial)\n    eval(initial)\n    // optional params\n    var localEval = function (code)  {\n      eval(code)\n    }\n\n    // API/data for end-user\n    return {\n      eval: localEval\n    }\n  }\n}\n","// handles code evaluation and attaching relevant objects to global and evaluation contexts\n\nimport Sandbox from './lib/sandbox.js'\nimport ArrayUtils from './lib/array-utils.js'\n\nclass EvalSandbox {\n  constructor(parent, makeGlobal, userProps = []) {\n    this.makeGlobal = makeGlobal\n    this.sandbox = Sandbox(parent)\n    this.parent = parent\n    var properties = Object.keys(parent)\n    properties.forEach((property) => this.add(property))\n    this.userProps = userProps\n  }\n\n  add(name) {\n    if(this.makeGlobal) window[name] = this.parent[name]\n    this.sandbox.addToContext(name, `parent.${name}`)\n  }\n\n// sets on window as well as synth object if global (not needed for objects, which can be set directly)\n\n  set(property, value) {\n    if(this.makeGlobal) {\n      window[property] = value\n    }\n    this.parent[property] = value\n  }\n\n  tick() {\n    if(this.makeGlobal) {\n      this.userProps.forEach((property) => {\n        this.parent[property] = window[property]\n      })\n      //  this.parent.speed = window.speed\n    } else {\n\n    }\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n}\n\nexport default EvalSandbox\n","import arrayUtils from './lib/array-utils.js'\nimport { parseStrudel } from './lib/strudel.js'\nimport { mini } from '@strudel.cycles/mini'\n\n// [WIP] how to treat different dimensions (?)\nconst DEFAULT_CONVERSIONS = {\n  float: {\n    'vec4': { name: 'sum', args: [[1, 1, 1, 1]] },\n    'vec2': { name: 'sum', args: [[1, 1]] }\n  }\n}\n\nfunction fillArrayWithDefaults(arr, len) {\n  // fill the array with default values if it's too short\n  while (arr.length < len) {\n    if (arr.length === 3) { // push a 1 as the default for .a in vec4\n      arr.push(1.0)\n    } else {\n      arr.push(0.0)\n    }\n  }\n  return arr.slice(0, len)\n}\n\nconst ensure_decimal_dot = (val) => {\n  val = val.toString()\n  if (val.indexOf('.') < 0) {\n    val += '.'\n  }\n  return val\n}\n\n\n\nexport default function formatArguments(transform, startIndex, synthContext) {\n  const defaultArgs = transform.transform.inputs\n  const userArgs = transform.userArgs\n  const { generators } = transform.synth\n  const { src } = generators // depends on synth having src() function\n  return defaultArgs.map((input, index) => {\n    const typedArg = {\n      value: input.default,\n      type: input.type, //\n      isUniform: false,\n      name: input.name,\n      vecLen: 0\n      //  generateGlsl: null // function for creating glsl\n    }\n\n    if (typedArg.type === 'float') typedArg.value = ensure_decimal_dot(input.default)\n    if (input.type.startsWith('vec')) {\n      try {\n        typedArg.vecLen = Number.parseInt(input.type.substr(3))\n      } catch (e) {\n        console.log(`Error determining length of vector input type ${input.type} (${input.name})`)\n      }\n    }\n\n    // if user has input something for this argument\n    if (userArgs.length > index) {\n      typedArg.value = userArgs[index]\n      // do something if a composite or transform\n\n      if (typeof userArgs[index] === 'function') {\n        // if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n        //    typedArg.value = (context, props, batchId) => (fillArrayWithDefaults(userArgs[index](props), typedArg.vecLen))\n        // } else {\n        typedArg.value = (context, props, batchId) => {\n          try {\n            const val = userArgs[index](props)\n            if(typeof val === 'number') {\n              return val\n            } else {\n              console.warn('function does not return a number', userArgs[index])\n            }\n            return input.default\n          } catch (e) {\n            console.warn('ERROR', e)\n            return input.default\n          }\n        }\n        //  }\n\n        typedArg.isUniform = true\n      } else if (userArgs[index].constructor === Array) {\n        //   if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n        //     typedArg.isUniform = true\n        //     typedArg.value = fillArrayWithDefaults(typedArg.value, typedArg.vecLen)\n        //  } else {\n        //  console.log(\"is Array\")\n        // filter out values that are not a number\n       // const filteredArray = userArgs[index].filter((val) => typeof val === 'number')\n       // typedArg.value = (context, props, batchId) => arrayUtils.getValue(filteredArray)(props)\n       typedArg.value = (context, props, batchId) => arrayUtils.getValue(userArgs[index])(props)\n       typedArg.isUniform = true\n        // }\n      } else if (userArgs[index].constructor.name === 'Pattern') {\n        typedArg.value = (context, props, batchId) => parseStrudel(userArgs[index])(props)\n        typedArg.isUniform = true\n      // parse strings as strudel mini notation\n      } else if (typeof userArgs[index] === \"string\") {\n        typedArg.value = input.default\n        try {\n          const pattern = mini(userArgs[index])\n          typedArg.value = (context, props, batchId) => parseStrudel(pattern)(props)\n          typedArg.isUniform = true\n        } catch (e) {\n          console.warn('error parsing strudel pattern', e)\n        }\n      }\n       \n    }\n\n    if (startIndex < 0) {\n    } else {\n      if (typedArg.value && typedArg.value.transforms) {\n        const final_transform = typedArg.value.transforms[typedArg.value.transforms.length - 1]\n\n        if (final_transform.transform.glsl_return_type !== input.type) {\n          const defaults = DEFAULT_CONVERSIONS[input.type]\n          if (typeof defaults !== 'undefined') {\n            const default_def = defaults[final_transform.transform.glsl_return_type]\n            if (typeof default_def !== 'undefined') {\n              const { name, args } = default_def\n              typedArg.value = typedArg.value[name](...args)\n            }\n          }\n        }\n\n        typedArg.isUniform = false\n      } else if (typedArg.type === 'float' && typeof typedArg.value === 'number') {\n        typedArg.value = ensure_decimal_dot(typedArg.value)\n      } else if (typedArg.type.startsWith('vec') && typeof typedArg.value === 'object' && Array.isArray(typedArg.value)) {\n        typedArg.isUniform = false\n        typedArg.value = `${typedArg.type}(${typedArg.value.map(ensure_decimal_dot).join(', ')})`\n      } else if (input.type === 'sampler2D') {\n        // typedArg.tex = typedArg.value\n        var x = typedArg.value\n        typedArg.value = () => (x.getTexture())\n        typedArg.isUniform = true\n      } else {\n        // if passing in a texture reference, when function asks for vec4, convert to vec4\n        if (typedArg.value.getTexture && input.type === 'vec4') {\n          var x1 = typedArg.value\n          typedArg.value = src(x1)\n          typedArg.isUniform = false\n        }\n      }\n\n      // add tp uniform array if is a function that will pass in a different value on each render frame,\n      // or a texture/ external source\n\n      if (typedArg.isUniform) {\n        typedArg.name += startIndex\n        //  shaderParams.uniforms.push(typedArg)\n      }\n    }\n    return typedArg\n  })\n}\n\n","import formatArguments from './format-arguments.js'\n\n// Add extra functionality to Array.prototype for generating sequences in time\nimport arrayUtils from './lib/array-utils.js'\n\n\n\n// converts a tree of javascript functions to a shader\nexport default function (transforms) {\n    var shaderParams = {\n      uniforms: [], // list of uniforms used in shader\n      glslFunctions: [], // list of functions used in shader\n      fragColor: ''\n    }\n\n    var gen = generateGlsl(transforms, shaderParams)('st')\n    shaderParams.fragColor = gen\n    // remove uniforms with duplicate names\n    let uniforms = {}\n    shaderParams.uniforms.forEach((uniform) => uniforms[uniform.name] = uniform)\n    shaderParams.uniforms = Object.values(uniforms)\n    return shaderParams\n\n}\n\n\n// recursive function for generating shader string from object containing functions and user arguments. Order of functions in string depends on type of function\n// to do: improve variable names\nfunction generateGlsl (transforms, shaderParams) {\n  // transform function that outputs a shader string corresponding to gl_FragColor\n  var fragColor = () => ''\n  // var uniforms = []\n  // var glslFunctions = []\n  transforms.forEach((transform) => {\n    var inputs = formatArguments(transform, shaderParams.uniforms.length)\n    inputs.forEach((input) => {\n      if(input.isUniform) shaderParams.uniforms.push(input)\n    })\n\n    // add new glsl function to running list of functions\n    if(!contains(transform, shaderParams.glslFunctions)) shaderParams.glslFunctions.push(transform)\n\n    // current function for generating frag color shader code\n    var f0 = fragColor\n    if (transform.transform.type === 'src') {\n      fragColor = (uv) => `${shaderString(uv, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'coord') {\n      fragColor = (uv) => `${f0(`${shaderString(uv, transform.name, inputs, shaderParams)}`)}`\n    } else if (transform.transform.type === 'color') {\n      fragColor = (uv) =>  `${shaderString(`${f0(uv)}`, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'combine') {\n      // combining two generated shader strings (i.e. for blend, mult, add funtions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${shaderString(`${f0(uv)}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`\n    } else if (transform.transform.type === 'combineCoord') {\n      // combining two generated shader strings (i.e. for modulate functions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${f0(`${shaderString(`${uv}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`)}`\n\n\n    }\n  })\n//  console.log(fragColor)\n  //  break;\n  return fragColor\n}\n\n// assembles a shader string containing the arguments and the function name, i.e. 'osc(uv, frequency)'\nfunction shaderString (uv, method, inputs, shaderParams) {\n  const str = inputs.map((input) => {\n    if (input.isUniform) {\n      return input.name\n    } else if (input.value && input.value.transforms) {\n      // this by definition needs to be a generator, hence we start with 'st' as the initial value for generating the glsl fragment\n      return `${generateGlsl(input.value.transforms, shaderParams)('st')}`\n    }\n    return input.value\n  }).reduce((p, c) => `${p}, ${c}`, '')\n\n  return `${method}(${uv}${str})`\n}\n\n// merge two arrays and remove duplicates\nfunction mergeArrays (a, b) {\n  return a.concat(b.filter(function (item) {\n    return a.indexOf(item) < 0;\n  }))\n}\n\n// check whether array\nfunction contains(object, arr) {\n  for(var i = 0; i < arr.length; i++){\n    if(object.name == arr[i].name) return true\n  }\n  return false\n}\n\n\n\n","// functions that are only used within other functions\n\nexport default {\n  _luminance: {\n    type: 'util',\n    glsl: `float _luminance(vec3 rgb){\n      const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n      return dot(rgb, W);\n    }`\n  },\n  _noise: {\n    type: 'util',\n    glsl: `\n    //\tSimplex 3D Noise\n    //\tby Ian McEwan, Ashima Arts\n    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n  vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n  float _noise(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    //  x0 = x0 - 0. + 0.0 * C\n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n    i = mod(i, 289.0 );\n    vec4 p = permute( permute( permute(\n               i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n             + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n             + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n    float n_ = 1.0/7.0; // N=7\n    vec3  ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n  // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n  }\n    `\n  },\n\n\n  _rgbToHsv: {\n    type: 'util',\n    glsl: `vec3 _rgbToHsv(vec3 c){\n            vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n            vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n            vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n            float d = q.x - min(q.w, q.y);\n            float e = 1.0e-10;\n            return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n        }`\n  },\n  _hsvToRgb: {\n    type: 'util',\n    glsl: `vec3 _hsvToRgb(vec3 c){\n        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }`\n  }\n}\n","import generateGlsl from './generate-glsl.js'\n// const formatArguments = require('./glsl-utils.js').formatArguments\n\n// const glslTransforms = require('./glsl/composable-glsl-functions.js')\nimport utilityGlsl from './glsl/utility-functions.js'\n\nvar GlslSource = function (obj) {\n  this.transforms = []\n  this.transforms.push(obj)\n  this.defaultOutput = obj.defaultOutput\n  this.synth = obj.synth\n  this.type = 'GlslSource'\n  this.defaultUniforms = obj.defaultUniforms\n  return this\n}\n\nGlslSource.prototype.addTransform = function (obj)  {\n    this.transforms.push(obj)\n}\n\nGlslSource.prototype.out = function (_output) {\n  var output = _output || this.defaultOutput\n  var glsl = this.glsl(output)\n  this.synth.currentFunctions = []\n // output.renderPasses(glsl)\n  if(output) try{\n    output.render(glsl)\n  } catch (error) {\n    console.log('shader could not compile', error)\n  }\n}\n\nGlslSource.prototype.glsl = function () {\n  //var output = _output || this.defaultOutput\n  var self = this\n  // uniforms included in all shaders\n//  this.defaultUniforms = output.uniforms\n  var passes = []\n  var transforms = []\n//  console.log('output', output)\n  this.transforms.forEach((transform) => {\n    if(transform.transform.type === 'renderpass'){\n      // if (transforms.length > 0) passes.push(this.compile(transforms, output))\n      // transforms = []\n      // var uniforms = {}\n      // const inputs = formatArguments(transform, -1)\n      // inputs.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n      //\n      // passes.push({\n      //   frag: transform.transform.frag,\n      //   uniforms: Object.assign({}, self.defaultUniforms, uniforms)\n      // })\n      // transforms.push({name: 'prev', transform:  glslTransforms['prev'], synth: this.synth})\n      console.warn('no support for renderpass')\n    } else {\n      transforms.push(transform)\n    }\n  })\n\n  if (transforms.length > 0) passes.push(this.compile(transforms))\n\n  return passes\n}\n\nGlslSource.prototype.compile = function (transforms) {\n  var shaderInfo = generateGlsl(transforms, this.synth)\n  var uniforms = {}\n  shaderInfo.uniforms.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n\n  var frag = `\n  precision ${this.defaultOutput.precision} float;\n  ${Object.values(shaderInfo.uniforms).map((uniform) => {\n    let type = uniform.type\n    switch (uniform.type) {\n      case 'texture':\n        type = 'sampler2D'\n        break\n    }\n    return `\n      uniform ${type} ${uniform.name};`\n  }).join('')}\n  uniform float time;\n  uniform vec2 resolution;\n  varying vec2 uv;\n  uniform sampler2D prevBuffer;\n\n  ${Object.values(utilityGlsl).map((transform) => {\n  //  console.log(transform.glsl)\n    return `\n            ${transform.glsl}\n          `\n  }).join('')}\n\n  ${shaderInfo.glslFunctions.map((transform) => {\n    return `\n            ${transform.transform.glsl}\n          `\n  }).join('')}\n\n  void main () {\n    vec4 c = vec4(1, 0, 0, 1);\n    vec2 st = gl_FragCoord.xy/resolution.xy;\n    gl_FragColor = ${shaderInfo.fragColor};\n  }\n  `\n\n  return {\n    frag: frag,\n    uniforms: Object.assign({}, this.defaultUniforms, uniforms)\n  }\n\n}\n\nexport default GlslSource\n","/*\nFormat for adding functions to hydra. For each entry in this file, hydra automatically generates a glsl function and javascript function with the same name. You can also ass functions dynamically using setFunction(object).\n\n{\n  name: 'osc', // name that will be used to access function in js as well as in glsl\n  type: 'src', // can be 'src', 'color', 'combine', 'combineCoords'. see below for more info\n  inputs: [\n    {\n      name: 'freq',\n      type: 'float',\n      default: 0.2\n    },\n    {\n      name: 'sync',\n      type: 'float',\n      default: 0.1\n    },\n    {\n      name: 'offset',\n      type: 'float',\n      default: 0.0\n    }\n  ],\n    glsl: `\n      vec2 st = _st;\n      float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n      float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n      float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n      return vec4(r, g, b, 1.0);\n   `\n}\n\n// The above code generates the glsl function:\n`vec4 osc(vec2 _st, float freq, float sync, float offset){\n vec2 st = _st;\n float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n return vec4(r, g, b, 1.0);\n}`\n\n\nTypes and default arguments for hydra functions.\nThe value in the 'type' field lets the parser know which type the function will be returned as well as default arguments.\n\nconst types = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n\n*/\n\nexport default () => [\n  {\n  name: 'noise',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 1.0);`\n},\n{\n  name: 'voronoi',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'blending',\n      default: 0.3,\n    }\n  ],\n  glsl:\n`   vec3 color = vec3(.0);\n   // Scale\n   _st *= scale;\n   // Tile the space\n   vec2 i_st = floor(_st);\n   vec2 f_st = fract(_st);\n   float m_dist = 10.;  // minimun distance\n   vec2 m_point;        // minimum point\n   for (int j=-1; j<=1; j++ ) {\n   for (int i=-1; i<=1; i++ ) {\n   vec2 neighbor = vec2(float(i),float(j));\n   vec2 p = i_st + neighbor;\n   vec2 point = fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n   point = 0.5 + 0.5*sin(time*speed + 6.2831*point);\n   vec2 diff = neighbor + point - f_st;\n   float dist = length(diff);\n   if( dist < m_dist ) {\n   m_dist = dist;\n   m_point = point;\n   }\n   }\n   }\n   // Assign a color using the closest point position\n   color += dot(m_point,vec2(.3,.6));\n   color *= 1.0 - blending*m_dist;\n   return vec4(color, 1.0);`\n},\n{\n  name: 'osc',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'frequency',\n      default: 60,\n    },\n{\n      type: 'float',\n      name: 'sync',\n      default: 0.1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   float g = sin((st.x+time*sync)*frequency)*0.5 + 0.5;\n   float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   return vec4(r, g, b, 1.0);`\n},\n{\n  name: 'shape',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'sides',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'radius',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'smoothing',\n      default: 0.01,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * 2. - 1.;\n   // Angle and radius from the current pixel\n   float a = atan(st.x,st.y)+3.1416;\n   float r = (2.*3.1416)/sides;\n   float d = cos(floor(.5+a/r)*r-a)*length(st);\n   return vec4(vec3(1.0-smoothstep(radius,radius + smoothing + 0.0000001,d)), 1.0);`\n},\n{\n  name: 'gradient',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_st, sin(time*speed), 1.0);`\n},\n{\n  name: 'src',\n  type: 'src',\n  inputs: [\n    {\n      type: 'sampler2D',\n      name: 'tex',\n      default: NaN,\n    }\n  ],\n  glsl:\n`   //  vec2 uv = gl_FragCoord.xy/vec2(1280., 720.);\n   return texture2D(tex, fract(_st));`\n},\n{\n  name: 'solid',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4(r, g, b, a);`\n},\n{\n  name: 'rotate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'angle',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float ang = angle + speed *time;\n   xy = mat2(cos(ang),-sin(ang), sin(ang),cos(ang))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'scale',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.5,\n    },\n{\n      type: 'float',\n      name: 'xMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'yMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(offsetX, offsetY);\n   xy*=(1.0/vec2(amount*xMult, amount*yMult));\n   xy+=vec2(offsetX, offsetY);\n   return xy;\n   `\n},\n{\n  name: 'pixelate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'pixelX',\n      default: 20,\n    },\n{\n      type: 'float',\n      name: 'pixelY',\n      default: 20,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(pixelX, pixelY);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'posterize',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'bins',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'gamma',\n      default: 0.6,\n    }\n  ],\n  glsl:\n`   vec4 c2 = pow(_c0, vec4(gamma));\n   c2 *= vec4(bins);\n   c2 = floor(c2);\n   c2/= vec4(bins);\n   c2 = pow(c2, vec4(1.0/gamma));\n   return vec4(c2.xyz, _c0.a);`\n},\n{\n  name: 'shift',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec4 c2 = vec4(_c0);\n   c2.r = fract(c2.r + r);\n   c2.g = fract(c2.g + g);\n   c2.b = fract(c2.b + b);\n   c2.a = fract(c2.a + a);\n   return vec4(c2.rgba);`\n},\n{\n  name: 'repeat',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) * offsetX;\n   st.y += step(1., mod(st.x,2.0)) * offsetY;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeat',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offsetX;\n   st.y += step(1., mod(st.x,2.0)) + _c0.g * offsetY;\n   return fract(st);`\n},\n{\n  name: 'repeatX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'repeatY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(1.0, reps);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'kaleid',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   st -= 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return r*vec2(cos(a), sin(a));`\n},\n{\n  name: 'modulateKaleid',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st - 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return (_c0.r+r)*vec2(cos(a), sin(a));`\n},\n{\n  name: 'scroll',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speedX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'speedY',\n      default: 0,\n    }\n  ],\n  glsl:\n`\n   _st.x += scrollX + time*speedX;\n   _st.y += scrollY + time*speedY;\n   return fract(_st);`\n},\n{\n  name: 'scrollX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += _c0.r*scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'scrollY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += _c0.r*scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'add',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0+_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'sub',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0-_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'layer',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(mix(_c0.rgb, _c1.rgb, _c1.a), clamp(_c0.a + _c1.a, 0.0, 1.0));`\n},\n{\n  name: 'blend',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+_c1*amount;`\n},\n{\n  name: 'mult',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+(_c0*_c1)*amount;`\n},\n{\n  name: 'diff',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(abs(_c0.rgb-_c1.rgb), max(_c0.a, _c1.a));`\n},\n{\n  name: 'modulate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   //  return fract(st+(_c0.xy-0.5)*amount);\n   return _st + _c0.xy*amount;`\n},\n{\n  name: 'modulateScale',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   xy*=(1.0/vec2(offset + multiple*_c0.r, offset + multiple*_c0.g));\n   xy+=vec2(0.5);\n   return xy;`\n},\n{\n  name: 'modulatePixelate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 3,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(offset + _c0.x*multiple, offset + _c0.y*multiple);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'modulateRotate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float angle = offset + _c0.x * multiple;\n   xy = mat2(cos(angle),-sin(angle), sin(angle),cos(angle))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'modulateHue',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _st + (vec2(_c0.g - _c0.r, _c0.b - _c0.g) * amount * 1.0/resolution);`\n},\n{\n  name: 'invert',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4((1.0-_c0.rgb)*amount + _c0.rgb*(1.0-amount), _c0.a);`\n},\n{\n  name: 'contrast',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.6,\n    }\n  ],\n  glsl:\n`   vec4 c = (_c0-vec4(0.5))*vec4(amount) + vec4(0.5);\n   return vec4(c.rgb, _c0.a);`\n},\n{\n  name: 'brightness',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.rgb + vec3(amount), _c0.a);`\n},\n{\n  name: 'mask',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n  `   float a = _luminance(_c1.rgb);\n  return vec4(_c0.rgb*a, a*_c0.a);`\n},\n\n{\n  name: 'luma',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   float a = smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb));\n   return vec4(_c0.rgb*a, a);`\n},\n{\n  name: 'thresh',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.04,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb))), _c0.a);`\n},\n{\n  name: 'color',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 c = vec4(r, g, b, a);\n   vec4 pos = step(0.0, c); // detect whether negative\n   // if > 0, return r * _c0\n   // if < 0 return (1.0-r) * _c0\n   return vec4(mix((1.0-_c0)*abs(c), c*_c0, pos));`\n},\n{\n  name: 'saturate',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 2,\n    }\n  ],\n  glsl:\n`   const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n   vec3 intensity = vec3(dot(_c0.rgb, W));\n   return vec4(mix(intensity, _c0.rgb, amount), _c0.a);`\n},\n{\n  name: 'hue',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'hue',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c.r += hue;\n   //  c.r = fract(c.r);\n   return vec4(_hsvToRgb(c), _c0.a);`\n},\n{\n  name: 'colorama',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.005,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c += vec3(amount);\n   c = _hsvToRgb(c);\n   c = fract(c);\n   return vec4(c, _c0.a);`\n},\n{\n  name: 'prev',\n  type: 'src',\n  inputs: [\n\n  ],\n  glsl:\n`   return texture2D(prevBuffer, fract(_st));`\n},\n{\n  name: 'sum',\n  type: 'color',\n  inputs: [\n    {\n      type: 'vec4',\n      name: 'scale',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 v = _c0 * s;\n   return v.r + v.g + v.b + v.a;\n   }\n   float sum(vec2 _st, vec4 s) { // vec4 is not a typo, because argument type is not overloaded\n   vec2 v = _st.xy * s.xy;\n   return v.x + v.y;`\n},\n{\n  name: 'r',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.r * scale + offset);`\n},\n{\n  name: 'g',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.g * scale + offset);`\n},\n{\n  name: 'b',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.b * scale + offset);`\n},\n{\n  name: 'a',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.a * scale + offset);`\n}\n]\n","import GlslSource from './glsl-source.js'\nimport glslFunctions from './glsl/glsl-functions.js'\nconst functions = glslFunctions()\n\nclass GeneratorFactory {\n  constructor ({\n      defaultUniforms,\n      defaultOutput,\n      extendTransforms = [],\n      changeListener = (() => {})\n    } = {}\n    ) {\n    this.defaultOutput = defaultOutput\n    this.defaultUniforms = defaultUniforms\n    this.changeListener = changeListener\n    this.extendTransforms = extendTransforms\n    this.generators = {}\n    this.init()\n  }\n  init () {\n    this.glslTransforms = {}\n    this.generators = Object.entries(this.generators).reduce((prev, [method, transform]) => {\n      this.changeListener({type: 'remove', synth: this, method})\n      return prev\n    }, {})\n\n    this.sourceClass = (() => {\n      return class extends GlslSource {\n      }\n    })()\n\n    \n\n    // add user definied transforms\n    if (Array.isArray(this.extendTransforms)) {\n      functions.concat(this.extendTransforms)\n    } else if (typeof this.extendTransforms === 'object' && this.extendTransforms.type) {\n      functions.push(this.extendTransforms)\n    }\n\n    return functions.map((transform) => this.setFunction(transform))\n }\n\n _addMethod (method, transform) {\n    const self = this\n    this.glslTransforms[method] = transform\n    if (transform.type === 'src') {\n      const func = (...args) => new this.sourceClass({\n        name: method,\n        transform: transform,\n        userArgs: args,\n        defaultOutput: this.defaultOutput,\n        defaultUniforms: this.defaultUniforms,\n        synth: self\n      })\n      this.generators[method] = func\n      this.changeListener({type: 'add', synth: this, method})\n      return func\n    } else  {\n      this.sourceClass.prototype[method] = function (...args) {\n        this.transforms.push({name: method, transform: transform, userArgs: args, synth: self})\n        return this\n      }\n    }\n    return undefined\n  }\n\n  setFunction(obj) {\n    var processedGlsl = processGlsl(obj)\n    if(processedGlsl) this._addMethod(obj.name, processedGlsl)\n  }\n}\n\nconst typeLookup = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n// expects glsl of format\n// {\n//   name: 'osc', // name that will be used to access function as well as within glsl\n//   type: 'src', // can be src: vec4(vec2 _st), coord: vec2(vec2 _st), color: vec4(vec4 _c0), combine: vec4(vec4 _c0, vec4 _c1), combineCoord: vec2(vec2 _st, vec4 _c0)\n//   inputs: [\n//     {\n//       name: 'freq',\n//       type: 'float', // 'float'   //, 'texture', 'vec4'\n//       default: 0.2\n//     },\n//     {\n//           name: 'sync',\n//           type: 'float',\n//           default: 0.1\n//         },\n//         {\n//           name: 'offset',\n//           type: 'float',\n//           default: 0.0\n//         }\n//   ],\n   //  glsl: `\n   //    vec2 st = _st;\n   //    float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n   //    float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n   //    float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n   //    return vec4(r, g, b, 1.0);\n   // `\n// }\n\n// // generates glsl function:\n// `vec4 osc(vec2 _st, float freq, float sync, float offset){\n//  vec2 st = _st;\n//  float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n//  float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n//  float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n//  return vec4(r, g, b, 1.0);\n// }`\n\nfunction processGlsl(obj) {\n  let t = typeLookup[obj.type]\n  if(t) {\n  let baseArgs = t.args.map((arg) => arg).join(\", \")\n  // @todo: make sure this works for all input types, add validation\n  let customArgs = obj.inputs.map((input) => `${input.type} ${input.name}`).join(', ')\n  let args = `${baseArgs}${customArgs.length > 0 ? ', '+ customArgs: ''}`\n//  console.log('args are ', args)\n\n    let glslFunction =\n`\n  ${t.returnType} ${obj.name}(${args}) {\n      ${obj.glsl}\n  }\n`\n\n  // add extra input to beginning for backward combatibility @todo update compiler so this is no longer necessary\n    if(obj.type === 'combine' || obj.type === 'combineCoord') obj.inputs.unshift({\n        name: 'color',\n        type: 'vec4'\n      })\n    return Object.assign({}, obj, { glsl: glslFunction})\n  } else {\n    console.warn(`type ${obj.type} not recognized`, obj)\n  }\n\n}\n\nexport default GeneratorFactory\n","\nimport Output from './output.js'\nimport loop from 'raf-loop'\nimport Source from './hydra-source.js'\nimport MouseTools from './lib/mouse.js'\nimport Audio from './lib/audio.js'\nimport VidRecorder from './lib/video-recorder.js'\nimport ArrayUtils from './lib/array-utils.js'\nimport strudel from './lib/strudel.js'\nimport Sandbox from './eval-sandbox.js'\nimport Generator from './generator-factory.js'\n\nconst window = global.window\n\nconst Mouse = MouseTools()\n// to do: add ability to pass in certain uniforms and transforms\nclass HydraRenderer {\n\n  constructor ({\n    pb = null,\n    width = 1280,\n    height = 720,\n    numSources = 4,\n    numOutputs = 4,\n    makeGlobal = true,\n    autoLoop = true,\n    detectAudio = true,\n    enableStreamCapture = true,\n    canvas,\n    precision,\n    extendTransforms = {} // add your own functions on init\n  } = {}) {\n\n    ArrayUtils.init()\n\n    this.pb = pb\n\n    this.width = width\n    this.height = height\n    this.renderAll = false\n    this.detectAudio = detectAudio\n\n    this._initCanvas(canvas)\n\n    global.window.test = 'hi'\n    // object that contains all properties that will be made available on the global context and during local evaluation\n    this.synth = {\n      time: 0,\n      bpm: 30,\n      width: this.width,\n      height: this.height,\n      fps: undefined,\n      stats: {\n        fps: 0\n      },\n      speed: 1,\n      mouse: Mouse,\n      render: this._render.bind(this),\n      setResolution: this.setResolution.bind(this),\n      update: (dt) => {},// user defined update function\n      hush: this.hush.bind(this),\n      tick: this.tick.bind(this)\n    }\n\n    if (makeGlobal) window.loadScript = this.loadScript\n\n\n    this.timeSinceLastUpdate = 0\n    this._time = 0 // for internal use, only to use for deciding when to render frames\n\n    // only allow valid precision options\n    let precisionOptions = ['lowp','mediump','highp']\n    if(precision && precisionOptions.includes(precision.toLowerCase())) {\n      this.precision = precision.toLowerCase()\n      //\n      // if(!precisionValid){\n      //   console.warn('[hydra-synth warning]\\nConstructor was provided an invalid floating point precision value of \"' + precision + '\". Using default value of \"mediump\" instead.')\n      // }\n    } else {\n      let isIOS =\n    (/iPad|iPhone|iPod/.test(navigator.platform) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n    !window.MSStream;\n      this.precision = isIOS ? 'highp' : 'mediump'\n    }\n\n\n\n    this.extendTransforms = extendTransforms\n\n    // boolean to store when to save screenshot\n    this.saveFrame = false\n\n    // if stream capture is enabled, this object contains the capture stream\n    this.captureStream = null\n\n    this.generator = undefined\n\n    this._initRegl()\n    this._initOutputs(numOutputs)\n    this._initSources(numSources)\n    this._generateGlslTransforms()\n\n    this.synth.screencap = () => {\n      this.saveFrame = true\n    }\n\n    if (enableStreamCapture) {\n      try {\n        this.captureStream = this.canvas.captureStream(25)\n        // to do: enable capture stream of specific sources and outputs\n        this.synth.vidRecorder = new VidRecorder(this.captureStream)\n      } catch (e) {\n        console.warn('[hydra-synth warning]\\nnew MediaSource() is not currently supported on iOS.')\n        console.error(e)\n      }\n    }\n\n    if(detectAudio) this._initAudio()\n\n    if(autoLoop) loop(this.tick.bind(this)).start()\n\n    // final argument is properties that the user can set, all others are treated as read-only\n    this.sandbox = new Sandbox(this.synth, makeGlobal, ['speed', 'update', 'bpm', 'fps'])\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n\n  getScreenImage(callback) {\n    this.imageCallback = callback\n    this.saveFrame = true\n  }\n\n  hush() {\n    this.s.forEach((source) => {\n      source.clear()\n    })\n    this.o.forEach((output) => {\n      this.synth.solid(0, 0, 0, 0).out(output)\n    })\n    this.synth.render(this.o[0])\n    // this.synth.update = (dt) => {}\n    this.sandbox.set('update', (dt) => {})\n  }\n\n  loadScript(url = \"\") {\n   const p = new Promise((res, rej) => {\n     var script = document.createElement(\"script\");\n     script.onload = function () {\n       console.log(`loaded script ${url}`);\n       res();\n     };\n     script.onerror = (err) => {\n       console.log(`error loading script ${url}`, \"log-error\");\n       res()\n     };\n     script.src = url;\n     document.head.appendChild(script);\n   });\n   return p;\n }\n\n  setResolution(width, height) {\n  //  console.log(width, height)\n    this.canvas.width = width\n    this.canvas.height = height\n    this.width = width // is this necessary?\n    this.height = height // ?\n    this.sandbox.set('width', width)\n    this.sandbox.set('height', height)\n    console.log(this.width)\n    this.o.forEach((output) => {\n      output.resize(width, height)\n    })\n    this.s.forEach((source) => {\n      source.resize(width, height)\n    })\n    this.regl._refresh()\n     console.log(this.canvas.width)\n  }\n\n  canvasToImage (callback) {\n    const a = document.createElement('a')\n    a.style.display = 'none'\n\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.png`\n    document.body.appendChild(a)\n    var self = this\n    this.canvas.toBlob( (blob) => {\n        if(self.imageCallback){\n          self.imageCallback(blob)\n          delete self.imageCallback\n        } else {\n          a.href = URL.createObjectURL(blob)\n          console.log(a.href)\n          a.click()\n        }\n    }, 'image/png')\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(a.href);\n    }, 300);\n  }\n\n  _initAudio () {\n    const that = this\n    this.synth.a = new Audio({\n      numBins: 4,\n      parentEl: this.canvas.parentNode\n      // changeListener: ({audio}) => {\n      //   that.a = audio.bins.map((_, index) =>\n      //     (scale = 1, offset = 0) => () => (audio.fft[index] * scale + offset)\n      //   )\n      //\n      //   if (that.makeGlobal) {\n      //     that.a.forEach((a, index) => {\n      //       const aname = `a${index}`\n      //       window[aname] = a\n      //     })\n      //   }\n      // }\n    })\n  }\n\n  // create main output canvas and add to screen\n  _initCanvas (canvas) {\n    if (canvas) {\n      this.canvas = canvas\n      this.width = canvas.width\n      this.height = canvas.height\n    } else {\n      this.canvas = document.createElement('canvas')\n      this.canvas.width = this.width\n      this.canvas.height = this.height\n      this.canvas.style.width = '100%'\n      this.canvas.style.height = '100%'\n      this.canvas.style.imageRendering = 'pixelated'\n      document.body.appendChild(this.canvas)\n    }\n  }\n\n  _initRegl () {\n    this.regl = require('regl')({\n    //  profile: true,\n      canvas: this.canvas,\n      pixelRatio: 1//,\n      // extensions: [\n      //   'oes_texture_half_float',\n      //   'oes_texture_half_float_linear'\n      // ],\n      // optionalExtensions: [\n      //   'oes_texture_float',\n      //   'oes_texture_float_linear'\n     //]\n   })\n\n    // This clears the color buffer to black and the depth buffer to 1\n    this.regl.clear({\n      color: [0, 0, 0, 1]\n    })\n\n    this.renderAll = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform sampler2D tex0;\n      uniform sampler2D tex1;\n      uniform sampler2D tex2;\n      uniform sampler2D tex3;\n\n      void main () {\n        vec2 st = vec2(1.0 - uv.x, uv.y);\n        st*= vec2(2);\n        vec2 q = floor(st).xy*(vec2(2.0, 1.0));\n        int quad = int(q.x) + int(q.y);\n        st.x += step(1., mod(st.y,2.0));\n        st.y += step(1., mod(st.x,2.0));\n        st = fract(st);\n        if(quad==0){\n          gl_FragColor = texture2D(tex0, st);\n        } else if(quad==1){\n          gl_FragColor = texture2D(tex1, st);\n        } else if (quad==2){\n          gl_FragColor = texture2D(tex2, st);\n        } else {\n          gl_FragColor = texture2D(tex3, st);\n        }\n\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        tex1: this.regl.prop('tex1'),\n        tex2: this.regl.prop('tex2'),\n        tex3: this.regl.prop('tex3')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n\n    this.renderFbo = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform vec2 resolution;\n      uniform sampler2D tex0;\n\n      void main () {\n        gl_FragColor = texture2D(tex0, vec2(1.0 - uv.x, uv.y));\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        resolution: this.regl.prop('resolution')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n  }\n\n  _initOutputs (numOutputs) {\n    const self = this\n    this.o = (Array(numOutputs)).fill().map((el, index) => {\n      var o = new Output({\n        regl: this.regl,\n        width: this.width,\n        height: this.height,\n        precision: this.precision,\n        label: `o${index}`\n      })\n    //  o.render()\n      o.id = index\n      self.synth['o'+index] = o\n      return o\n    })\n\n    // set default output\n    this.output = this.o[0]\n  }\n\n  _initSources (numSources) {\n    this.s = []\n    for(var i = 0; i < numSources; i++) {\n      this.createSource(i)\n    }\n  }\n\n  createSource (i) {\n    let s = new Source({regl: this.regl, pb: this.pb, width: this.width, height: this.height, label: `s${i}`})\n    this.synth['s' + this.s.length] = s\n    this.s.push(s)\n    return s\n  }\n\n  _generateGlslTransforms () {\n    var self = this\n    this.generator = new Generator({\n      defaultOutput: this.o[0],\n      defaultUniforms: this.o[0].uniforms,\n      extendTransforms: this.extendTransforms,\n      changeListener: ({type, method, synth}) => {\n          if (type === 'add') {\n            self.synth[method] = synth.generators[method]\n            if(self.sandbox) self.sandbox.add(method)\n          } else if (type === 'remove') {\n            // what to do here? dangerously deleting window methods\n            //delete window[method]\n          }\n      //  }\n      }\n    })\n    this.synth.setFunction = this.generator.setFunction.bind(this.generator)\n  }\n\n  _render (output) {\n    if (output) {\n      this.output = output\n      this.isRenderingAll = false\n    } else {\n      this.isRenderingAll = true\n    }\n  }\n\n  // dt in ms\n  tick (dt, uniforms) {\n    this.sandbox.tick()\n    if(this.detectAudio === true) this.synth.a.tick()\n  //  let updateInterval = 1000/this.synth.fps // ms\n    this.sandbox.set('time', this.synth.time += dt * 0.001 * this.synth.speed)\n    this.timeSinceLastUpdate += dt\n    if(!this.synth.fps || this.timeSinceLastUpdate >= 1000/this.synth.fps) {\n    //  console.log(1000/this.timeSinceLastUpdate)\n      this.synth.stats.fps = Math.ceil(1000/this.timeSinceLastUpdate)\n      if(this.synth.update) {\n        try { this.synth.update(this.timeSinceLastUpdate) } catch (e) { console.log(e) }\n      }\n    //  console.log(this.synth.speed, this.synth.time)\n      for (let i = 0; i < this.s.length; i++) {\n        this.s[i].tick(this.synth.time)\n      }\n    //  console.log(this.canvas.width, this.canvas.height)\n      for (let i = 0; i < this.o.length; i++) {\n        this.o[i].tick({\n          time: this.synth.time,\n          mouse: this.synth.mouse,\n          bpm: this.synth.bpm,\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      if (this.isRenderingAll) {\n        this.renderAll({\n          tex0: this.o[0].getCurrent(),\n          tex1: this.o[1].getCurrent(),\n          tex2: this.o[2].getCurrent(),\n          tex3: this.o[3].getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      } else {\n\n        this.renderFbo({\n          tex0: this.output.getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      this.timeSinceLastUpdate = 0\n    }\n    if(this.saveFrame === true) {\n      this.canvasToImage()\n      this.saveFrame = false\n    }\n  //  this.regl.poll()\n  }\n\n\n}\n\nexport default HydraRenderer\n","import Synth from './hydra-synth.js'\n//import ShaderGenerator = require('./shader-generator.js')\n\n// export default Synth\nmodule.exports = Synth\n"],"names":["Output","regl","precision","label","width","height","positionBuffer","buffer","draw","init","pingPongIndex","fbos","Array","fill","map","framebuffer","color","texture","mag","format","depthStencil","prototype","resize","forEach","fbo","getCurrent","getTexture","index","transformIndex","fragHeader","fragBody","vert","attributes","position","uniforms","time","prop","resolution","frag","render","passes","pass","self","Object","assign","prevBuffer","count","tick","props","deviceId","navigator","mediaDevices","enumerateDevices","then","devices","filter","kind","cameras","constraints","audio","video","exact","window","getUserMedia","stream","document","createElement","setAttribute","srcObject","Promise","resolve","reject","addEventListener","play","console","log","bind","options","getDisplayMedia","err","HydraSource","pb","src","dynamic","tex","shape","opts","params","data","initCam","Webcam","response","initVideo","url","vid","crossOrigin","autoplay","loop","muted","initImage","img","onload","initStream","streamName","initSource","on","nick","initScreen","Screen","clear","getTracks","track","stop","videoWidth","videoHeight","subimage","mouse","mouseButtons","ev","buttons","b","which","button","mouseElement","target","srcElement","element","mouseRelativeX","pageX","x","mouseRelativeY","pageY","y","mouseListen","callback","buttonState","mods","shift","alt","control","meta","attached","updateMods","changed","altKey","shiftKey","ctrlKey","metaKey","handleEvent","nextButtons","nextX","nextY","clearState","handleBlur","handleMods","handleMouseMove","handleMouseDown","handleMouseUp","attachListeners","detachListeners","removeEventListener","result","defineProperties","enabled","get","set","f","enumerable","Audio","numBins","cutoff","smooth","max","scale","isDrawing","parentEl","body","vol","setBins","beat","holdFrames","threshold","_cutoff","decay","_framesSinceBeat","onBeat","canvas","style","right","bottom","appendChild","ctx","getContext","fillStyle","strokeStyle","lineWidth","context","AudioContext","audio_stream","createMediaStreamSource","meyda","Meyda","createMeydaAnalyzer","audioContext","source","featureExtractors","detectBeat","level","Math","features","loudness","total","reducer","accumulator","currentValue","spacing","floor","specific","length","bins","prevBins","slice","bin","reduce","settings","fft","setCutoff","el","setSmooth","offset","a","setScale","setMax","hide","display","show","clearRect","fillRect","beginPath","moveTo","lineTo","stroke","yMax","VideoRecorder","mediaSource","MediaSource","output","sourceBuffer","addSourceBuffer","start","mimeType","recordedBlobs","mediaRecorder","MediaRecorder","e0","e1","e2","alert","error","onstop","_handleStop","ondataavailable","_handleDataAvailable","blob","Blob","type","URL","createObjectURL","href","d","Date","download","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","click","setTimeout","removeChild","revokeObjectURL","event","size","push","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","sin","PI","num","in_min","in_max","out_min","out_max","fast","speed","_speed","_smooth","ease","_ease","easing","_offset","fit","low","high","lowest","min","highest","newArr","getValue","arr","bpm","_index","currValue","nextValue","mini","parseStrudel","pattern","m","events","queryArc","value","e","warn","strudel","parent","initialCode","sandbox","createSandbox","addToContext","name","object","eval","code","initial","localEval","EvalSandbox","makeGlobal","userProps","Sandbox","properties","keys","property","add","DEFAULT_CONVERSIONS","args","ensure_decimal_dot","val","toString","indexOf","formatArguments","transform","startIndex","synthContext","defaultArgs","inputs","userArgs","generators","synth","input","typedArg","isUniform","vecLen","startsWith","Number","parseInt","substr","batchId","constructor","arrayUtils","transforms","final_transform","glsl_return_type","defaults","default_def","isArray","join","x1","shaderParams","glslFunctions","fragColor","gen","generateGlsl","uniform","values","contains","f0","uv","shaderString","f1","method","str","p","c","i","_luminance","glsl","_noise","_rgbToHsv","_hsvToRgb","GlslSource","obj","defaultOutput","defaultUniforms","addTransform","out","_output","currentFunctions","compile","shaderInfo","utilityGlsl","NaN","functions","GeneratorFactory","extendTransforms","changeListener","glslTransforms","entries","prev","sourceClass","setFunction","_addMethod","func","undefined","processedGlsl","processGlsl","typeLookup","returnType","baseArgs","arg","customArgs","glslFunction","unshift","global","Mouse","MouseTools","HydraRenderer","numSources","numOutputs","autoLoop","detectAudio","enableStreamCapture","ArrayUtils","renderAll","_initCanvas","test","fps","stats","_render","setResolution","update","dt","hush","loadScript","timeSinceLastUpdate","_time","precisionOptions","includes","toLowerCase","isIOS","platform","maxTouchPoints","MSStream","saveFrame","captureStream","generator","_initRegl","_initOutputs","_initSources","_generateGlslTransforms","screencap","vidRecorder","VidRecorder","_initAudio","getScreenImage","imageCallback","s","o","solid","res","rej","script","onerror","head","_refresh","canvasToImage","toBlob","parentNode","imageRendering","require","pixelRatio","tex0","tex1","tex2","tex3","depth","enable","renderFbo","id","createSource","Source","Generator","isRenderingAll","ceil","module","exports","Synth"],"mappings":"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"}